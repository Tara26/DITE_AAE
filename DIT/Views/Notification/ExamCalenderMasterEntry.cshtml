@model Models.ExamNotification.ExamCalendarMaster
@{
    ViewBag.Title = "ExamCalendarMaster";
    int sno = 1;
}
<link href="~/Content/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="~/Content/jquery.dataTables.min.css" rel="stylesheet" />
<script src="~/Scripts/jquery.dataTables.min.js"></script>
<script src="~/Content/frontend/js/bootstrap.js"></script>
<script src="~/Scripts/bootbox.js"></script>
<script src="~/Scripts/bootbox.min.js"></script>
<script src="~/Scripts/bootbox.locales.min.js"></script>
<script src="~/Content/frontend/js/jquery-ui.min.js"></script>
<script src="~/Content/js/moment.min.js"></script>
<link href="~/Content/css/jquery.datetimepicker.css" rel="stylesheet" />
<script src="~/Content/js/jquery.datetimepicker.js"></script>
<script src="~/Content/js/browser.js"></script>
<script src="~/Content/js/vfs_fonts.min.js"></script>
<script src="~/Content/js/pdfmake.min.js"></script>
<link href="~/Content/frontend/css/style1.css" rel="stylesheet" />

<style>
    button {
        background-color: #5A8CD3;
        color: white;
    }

    button {
        background-color: #5A8CD3;
        color: white;
    }

    .head1 {
        color: #195c9f;
        text-align: center;
        font-weight: 700;
        background-color: #195c9f;
        color: white;
    }

    .content-box-gray .content {
        overflow: hidden;
        padding: 10px;
        font-size: 15px;
        border-bottom-left-radius: 5px;
        border-bottom-right-radius: 5px;
        border: 1px solid gray;
        color: #3385FF;
    }

    .content-box-gray .title {
        height: 50px;
        line-height: 30px;
        border-top-left-radius: 5px;
        border-top-right-radius: 5px;
        /*background: #5A8CD3;*/
        font-size: 18px;
        font-weight: bold;
        font-family: verdana;
        display: block;
        color: white;
        display: block;
        padding: 10px;
        border: 1px solid gray;
        border-bottom: none;
    }
</style>
<br /><br /><br />

<h4>
    <ul class="nav nav-tabs font">
        <li>
            <a href="#tab_2" id="tab2" data-toggle="tab">Preparation of Exam Time Table</a>
        </li>
        <li>
            <a href="#tab_3" id="tab3" data-toggle="tab">Exam Time Table Status</a>
        </li>
    </ul>
</h4>
<div class="tab-content font">
    <div class="tab-pane fade" id="tab_2">
        <div class="container-fluid font" style="background-color:white;box-shadow: 0 2px 4px rgba(0,0,0,0.6);margin-top:20px; padding:20px;">
            <div class="row" style="border:1px solid black">
                <div class="breadcrumb font">
                    <span class="inline odd first"><a href="/Home/index1">Home</a></span> <span class="delimiter">&gt;</span>  <span class="inline odd last">
                        Create Exam Calendar
                    </span>
                </div>
                <div class="col-lg-12">
                    <h2 class="head1">Create Exam Calendar</h2>
                    <br /><br />
                    <div class="form-group row">
                        <div class="col-lg-6 col-md-6">
                            <div class="col-md-6">
                                <label for="txtAgencyRegnNo">Exam Notification Number<span style="color:red"> *</span></label>
                            </div>
                            <div class="col-md-6">
                                @Html.DropDownListFor(model => model.Exam_CalNotif_Number, new SelectList(Model.ExamNotificationList, "Value", "Text"), new { @class = "form-control select2" })
                                @Html.HiddenFor(model => model.ectId, new { @id = "ectId" })
                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6">
                            <div class="col-md-6">
                                <label for="txtAgencyRegnNo">Calender Notification Description<span style="color:red"> *</span></label>
                            </div>
                            <div class="col-md-6">
                                @Html.TextBoxFor(model => model.Exam_CalNotif_Description, new { @class = "form-control", @MaxLength = "99", @placeholder = "Notification Description" })
                            </div>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col-lg-6 col-md-6">
                            <div class="col-md-6">
                                <label for="txtAgencyRegnNo">Calender Notification Date<span style="color:red"> *</span></label>
                            </div>
                            <div class="col-md-6">
                                @Html.TextBoxFor(model => model.EExam_Date, "{0:dd/MM/yyyy}", new { @class = "form-control", autocomplete = "off", style = " background-position:right; background-size:30px; background-image:  url(../../Content/img/Calendar.png);background-repeat: no-repeat;", @placeholder = "Calender Notification Date" })
                            </div>
                        </div>
                    </div>
                    <br />
                    <div class="form-group row">
                        <div class="col-lg-4 col-md-4">
                            <div class="col-md-6">
                                <label for="txtAgencyRegnNo">Course Type<span style="color:red"> *</span></label>
                            </div>
                            <div class="col-md-6">
                                @Html.DropDownListFor(model => model.CourseTypeId, new SelectList(Model.CourseTypeList, "Value", "Text"), new { @class = "form-control select2" })
                            </div>
                        </div>
                        @*<div class="col-lg-4 col-md-4">
                                <div class="col-md-6">
                                    <label for="txtAgencyRegnNo">Trade Type<span style="color:red"> *</span></label>
                                </div>
                                <div class="col-md-6">
                                    @Html.DropDownListFor(model => model.TradeTypeId, new SelectList(Model.TradeTypeList, "Value", "Text"), new { @class = "form-control select2", @onchange = "GetTradeList()" })
                                </div>
                            </div>*@
                        @*<div class="col-lg-4 col-md-4">
                                <div class="col-md-6">
                                    <label for="txtAgencyRegnNo">Trade<span style="color:red"> *</span></label>
                                </div>
                                <div class="col-md-6">
                                    @Html.DropDownListFor(model => model.TradeId, new SelectList(Model.TradeList, "Value", "Text"), new { @class = "form-control select2" })
                                </div>
                            </div>*@
                        <div class="col-lg-4 col-md-4">
                            <div class="col-md-6">
                                <label for="txtAgencyRegnNo">Subject Type<span style="color:red"> *</span></label>
                            </div>
                            <div class="col-md-6">
                                @Html.DropDownListFor(model => model.SujectTtypeId, Model.SubjectType, new { @class = "form-control select2", @onchange = "GetSubjectList()" })
                            </div>
                        </div>
                    </div>
                    <div class="form-group row">
                        @*<div class="col-lg-4 col-md-4">
                            <div class="col-md-6">
                                <label for="txtAgencyRegnNo">Trade Year<span style="color:red"> *</span></label>
                            </div>
                            <div class="col-md-6">
                                @Html.DropDownListFor(model => model.TradeYearId, new SelectList(Model.TradeYearList, "Value", "Text"), new { @class = "form-control select2" })
                            </div>
                        </div>*@
                        <div class="col-lg-4 col-md-4">
                            <div class="col-md-6">
                                <label for="txtAgencyRegnNo">Exam Type<span style="color:red"> *</span></label>
                            </div>
                            <div class="col-md-6">
                                @Html.DropDownListFor(model => model.ExamTypeId, new SelectList(Model.ExamTypeList, "Value", "Text"), new { @class = "form-control select2" })
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-4">
                            <div class="col-md-6">
                                <label for="txtAgencyRegnNo">Exam Year<span style="color:red"> *</span></label>
                            </div>
                            <div class="col-md-6">
                                @Html.TextBoxFor(model => model.ExamYear, new { @class = "form-control", @placeholder = "Exam Year" })
                            </div>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col-lg-4 col-md-4">
                            <div class="col-md-6">
                                <label for="txtAgencyRegnNo">Regular Trade Subject<span style="color:red"> *</span></label>
                            </div>
                            <div class="col-md-6">
                                @Html.DropDownListFor(model => model.SubjectTypeId, new SelectList(Model.SubjectTypeList, "Value", "Text"), new { @class = "form-control select2", @onchange = "GetSubjectListBasedonType()" })
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-4">
                            <div class="col-md-6">
                                <label for="txtAgencyRegnNo">Special Trade Subject<span style="color:red"> *</span></label>
                            </div>
                            <div class="col-md-6">
                                <select id="mySkills" multiple="multiple" required name="mySkillsName" style="width:450px">
                                    @if (ViewBag.mySkills != null)
                                    {
                                        foreach (var item in ViewBag.mySkills)
                                        {
                                            if (item.Text != null)
                                            {
                                                <option value="@item.Value" title="@item.Text">
                                                    @item.Text
                                                </option>
                                            }
                                        }
                                    }
                                </select>
                            </div>
                        </div>

                    </div>
                    <div class="form-group row">
                        <div class="col-lg-4 col-md-4">
                            <div class="col-md-6">
                                <label for="txtAgencyRegnNo">Exam Date<span style="color:red"> *</span></label>
                            </div>
                            <div class="col-md-6">
                                @Html.TextBoxFor(model => model.Exam_Date, "{0:dd-MM-yyyy}", new { @class = "form-control", autocomplete = "off", style = " background-position:right; background-size:30px; background-image:  url(../../Content/img/Calendar.png);background-repeat: no-repeat;", @placeholder = "Exam Date" })
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-4">
                            <div class="col-md-6">
                                <label for="txtAgencyRegnNo">Exam Start Time<span style="color:red"> *</span></label>
                            </div>
                            <div class="col-md-6">
                                @Html.TextBoxFor(model => model.Exam_Start_date, "{0:hh:mm a}", new { @class = "form-control", autocomplete = "off", style = " background-position:right; background-size:30px; background-image:  url(../../Content/img/Calendar.png);background-repeat: no-repeat;", @placeholder = "Start Time" })
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-4">
                            <div class="col-md-6">
                                <label for="txtAgencyRegnNo">Exam End Time<span style="color:red"> *</span></label>
                            </div>
                            <div class="col-md-6">
                                @Html.TextBoxFor(model => model.Exam_End_date, "{0:hh:mm a}", new { @class = "form-control", autocomplete = "off", style = " background-position:right; background-size:30px; background-image:  url(../../Content/img/Calendar.png);background-repeat: no-repeat;", @placeholder = "End Time" })
                            </div>
                        </div>
                    </div>
                    <br />
                    <div class="form-group row">
                        <div class="col-lg-4 col-md-4">
                            <div class="col-md-6">
                            </div>
                            <div class="col-md-6">
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-4">
                            <div class="col-md-6">
                                <input type="button" value="Add Subject" class="btn btn-primary" style="margin-left:15px; width:250px;" id="btnAddSubject" />
                            </div>
                            <div class="col-md-6">
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-4">
                            <div class="col-md-6">
                            </div>
                            <div class="col-md-6">
                            </div>
                        </div>
                    </div>
                    <br />
                    <br />
                    <table class="table table-bordered table-hover" id="SubjectToNotificationGrid">
                        <thead>
                            <tr>
                                <td style="display:none">DATE</td>
                                <th>DATE</th>
                                <th>DAY </th>
                                <th>TIME  OF COMMENCEMENT</th>
                                <th>SUBJECTS (Regular Trade)</th>
                                <th>SUBJECTS (Special trades Sugar, Fire, Real Estate, Water Technology)</th>
                                <th>ACTION</th>
                                <td style="display:none">SubjectTypeID</td>
                                <td style="display:none">SubjectId</td>
                                <td style="display:none">Exam_End_Time</td>
                                <td style="display:none">CourseTypeId</td>
                                <td style="display:none">TradeTypeId</td>
                                <td style="display:none">TradeId</td>
                                <td style="display:none">TradeYearId</td>
                                <td style="display:none">ExamTypeId</td>
                                <td style="display:none">ExamSemId</td>
                                <td style="display:none">ExamYear</td>
                                <td style="display:none">Exam_Start_Time</td>
                                <td style="display:none">SujectTtypeId</td>
                            </tr>
                        </thead>
                        <tbody id="tbodySubjectToNotification">
                            @if (Model.NotifiationListList != null)
                            {
                                foreach (var item in Model.NotifiationListList.objSubjectsItem)
                                {
                                    <tr>
                                        <td style="display:none">@item.Exam_Date</td>
                                        <td>@item.Exam_Date</td>
                                        <td>@item.ExamDay</td>
                                        <td>@item.Exam_Start_Time</td>
                                        <td>@item.SubjectTypeID</td>
                                        <td>@item.SubjectId</td>
                                        <td>
                                            <a class="Delete" href="javascript:;">Delete</a>
                                            <a class="Edit" href="javascript:;">Edit</a>
                                        </td>
                                        <td style="display:none">@item.SubjectTypeID</td>
                                        <td style="display:none">@item.SubjectId</td>
                                        <td style="display:none">@item.Exam_End_Time</td>
                                        <td style="display:none">@item.CourseTypeId</td>
                                        <td style="display:none">@item.TradeTypeId</td>
                                        <td style="display:none">@item.TradeId</td>
                                        <td style="display:none">@item.TradeYearId</td>
                                        <td style="display:none">@item.ExamTypeId</td>
                                        <td style="display:none">@item.ExamSemId</td>
                                        <td style="display:none">@item.ExamYear</td>
                                        <td style="display:none">@item.Exam_Start_Time</td>
                                        <td style="display:none">@item.SujectTtypeId</td>
                                    </tr>
                                }
                            }
                        </tbody>
                    </table>
                    <br />
                    <div class="form-group row">
                        <div class="col-lg-12 col-md-12">
                            <div class="col-md-6 col-lg-offset-4">
                                <input type="button" value="Clear" class="btn btn-success" style="margin-left:15px;" id="btnClearNotification" />
                                <input type="button" id="btnSaveSubjets" value="Create" class="btn btn-success" style="margin-left:15px;" />
                                <input type="button" id="btnSaveSubjetsDraft" value="Save As Draft" class="btn btn-success" style="margin-left:15px;" />
                                <a href="/Notification/ExamCalenderMasterEntry" class="btn btn-success" style="margin-left:15px;">Cancel</a>
                            </div>
                        </div>
                    </div>
                    <br />
                    <br />
                    <br />
                </div>
            </div>
        </div>
        <br /><br />
    </div>
    <div class="tab-pane fade" id="tab_3">
        <div class="container-fluid font" style="background-color:white;box-shadow: 0 2px 4px rgba(0,0,0,0.6);margin-top:20px; padding:20px;">
            <div class="row border" style="border:1px solid black">
                <div class="col-lg-12">
                    <div id="DivReadyToSentforApproval">
                        <div class="form-group row">
                            <div class="breadcrumb font">
                                <span class="inline odd first"><a href="/Home/index1">Home</a></span> <span class="delimiter">&gt;</span>  <span class="inline odd last">
                                    Exam Time Table Status
                                </span>
                            </div>
                            <div class="col-lg-12 modal-header">
                                <h2 class="modal-title head1">Exam Time Table Status</h2>
                            </div>
                        </div>
                        <br />
                        <table class="table table-bordered table-hover text-center" style="color:aliceblue;" id="ReadyToSentGrid">
                            <thead>
                                <tr class="text-center">
                                    <th>Sl. No.</th>
                                    <th>Course Type</th>
                                    <th style="display:none">Name of the Section</th>
                                    <th>Exam Notification Number</th>
                                    <th>Exam Time Table Description</th>
                                    <th style="display:none">Notification Type</th>
                                    <th>Exam Time Table Created Date</th>
                                    <th>Status - Currently With</th>
                                    <th>Remarks</th>
                                    <th width="140px">Action</th>
                                    <td style="display:none">Notification Id</td>
                                    <td style="display:none">Publish Id</td>
                                    <td style="display:none">Login Id</td>
                                    <td style="display:none">Notif Present</td>
                                    <td style="display:none">PDF File</td>
                                    <td style="display:none">Notification Number Id</td>
                                    <td style="display:none">Notif Present</td>

                                </tr>
                            </thead>
                            <tbody id="tbodyReadyToSentGrid" style="color:Black;">
                                @foreach (var item in Model.NotificationForApprovalList)
                                {
                                    <tr>
                                        <td align="center">@(sno++)</td>
                                        <td>@item.CourseName</td>
                                        <td style="display:none"> @item.DeptName</td>
                                        <td>@item.Exam_CalNotif_Number</td>
                                        <td>@item.Exam_CalNotif_Description</td>
                                        <td style="display:none">Exam Time Table</td>
                                        <td>@item.Notif_Date.ToString("dd/MM/yyyy")</td>
                                        <td>
                                            @if (item.status != "Published Notification")
                                            {
                                                <label>@item.status - </label> <label>@item.By</label>
                                            }
                                            else
                                            {
                                                //@item.status
                                        <label>Published Examination Time Table</label>
                                            }

                                        </td>
                                        <td>
                                            @if (item.comcount == 0)
                                            {
                                                <a style="text-align:center; float:initial;pointer-events: none; opacity:0.5" class="btn btn-primary" onclick="GetCommentRemarksDetails(@item.NotificationId,'@item.Exam_CalNotif_Number')">View</a>
                                            }
                                            else
                                            {
                                                <a style="text-align:center; float:initial" id="btnRemarks" class="btn btn-primary" onclick="GetCommentRemarksDetails(@item.NotificationId,'@item.Exam_CalNotif_Number')">View</a>
                                            }
                                        </td>
                                        <td>
                                            @if (item.status != "Draft Notification")
                                            {
                                                <a class="text_custom_green noExport btn btn-primary View" href="javascript:;">View</a>
                                            }
                                            @if (Session["UserId"].ToString() == "1")
                                            {
                                                if (item.Login_Id == 2)
                                                {
                                                    if (item.status == "Approved")
                                                    {
                                                        <a class="text_custom_green noExport btn btn-primary Publish" href="javascript:;">Publish</a>
                                                    }
                                                    else
                                                    {
                                                        if (item.status == "Published Notification")
                                                        {

                                                        }
                                                        else
                                                        {
                                                            <a class="text_custom_green noExport btn btn-primary Edit" href="javascript:;">Edit</a>
                                                        }
                                                    }
                                                }

                                            }
                                        </td>
                                        <td style="display:none">@item.NotificationId</td>
                                        <td style="display:none">@item.PublishedId</td>
                                        <td style="display:none">@item.Login_Id</td>
                                        <td style="display:none">@item.Notif_Present</td>
                                        <td style="display:none">@item.PdfPath</td>
                                        <td style="display:none">@item.Notif_Number_Id</td>
                                        <td style="display:none">@item.status</td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                    <div id="DivViewReadyToSentforApproval" style="display:none">

                        <div class="form-group row">
                            <div class="col-lg-12 modal-header">
                                <h2 class="modal-title head1">Exam Time Table</h2>
                            </div>
                        </div>
                        <br />

                        <div class="row">
                            <div class="col-lg-2"><b>Course Type:</b></div>
                            <div class="col-lg-2" id="course">
                            </div>

                            <div class="col-lg-2"><b> Notification Number:</b></div>
                            <div class="col-lg-2" id="Notif_Number">
                            </div>
                            <div class="col-lg-2"><b> Time Table Description:</b></div>
                            <div class="col-lg-2" id="Notif_Description">
                            </div>
                        </div>
                        <br /><br />
                        <div class="row">
                            
                            <div class="col-lg-2"><b>Calender Notification Status:</b></div>
                            <div class="col-lg-2" id="Notif_Status">
                            </div>
                            

                        </div>
                        <br />
                        <table class="table table-bordered table-hover" id="ViewSubjectToNotificationGrid">
                            <thead>
                                <tr>
                                    <th>DATE</th>
                                    <th>DAY </th>
                                    <th>TIME  OF COMMENCEMENT</th>
                                    <th>SUBJECTS (Regular Trade)</th>
                                    <th>SUBJECTS (Special trades Sugar, Fire, Real Estate, Water Technology)</th>
                                </tr>
                            </thead>
                            <tbody id="tbodyViewSubjectToNotification">
                                @if (Model.NotifiationListList != null)
                                {
                                    foreach (var item in Model.NotifiationListList.objSubjectsItem)
                                    {
                                        <tr>
                                            <td>@item.Exam_Date</td>
                                            <td>@item.ExamDay</td>
                                            <td>@item.Exam_Start_Time</td>
                                            <td>@item.SubjectTypeID</td>
                                            <td>@item.SubjectId</td>
                                        </tr>
                                    }
                                }
                            </tbody>
                        </table>
                        <br />
                        <br />
                        <div class="form-group row">
                            <div class="col-lg-offset-1 col-md-2">
                                <div class="text-md-center">
                                    <label for="txtAgencyRegnNo">Remarks</label>
                                </div>
                            </div>
                            <div class="col-md-6">
                                @Html.TextBoxFor(Model => Model.Remarks, new { @class = "form-control txtarea", @rows = "10", @Maxlength = "100" })
                            </div>
                        </div>
                        <div class="form-group row">
                            @if (!Session["UserId"].Equals(9))
                            {
                                <div class="col-lg-offset-1 col-md-2">
                                    <div class="text-md-center">
                                        <label for="txtAgencyRegnNo">Send To:</label>
                                    </div>
                                </div>
                                <div class="col-md-2">
                                    @Html.DropDownListFor(model => model.RoleId, new SelectList(Model.LoginRoleList, "Value", "Text"), new { @class = "form-control select2" })
                                </div>
                            }
                            else
                            {
                                <div class="col-md-4">
                                    <div class="text-md-center">
                                    </div>
                                </div>
                            }

                            <div class="col-md-6">
                                @if (!Session["UserId"].Equals(9))
                                {
                                    <input type="button" title="Send" value="Send" id="btnforward" class="btn btn-primary" style="margin-left:8px" />
                                }

                                @if (Session["UserId"].ToString() == "6" || Session["UserId"].ToString() == "7" || Session["UserId"].ToString() == "8" || Session["UserId"].ToString() == "9")
                                {
                                    <input type="button" title="Approve" value="Approve" id="btnApprove" class="btn btn-primary" style="margin-left:8px" />
                                }
                                <input type="button" title="Cancel" value="Cancel" id="btnCancel" class="btn btn-primary" style="margin-left:8px" />

                                @if (Session["UserId"].ToString() == "6" || Session["UserId"].ToString() == "7" || Session["UserId"].ToString() == "8" || Session["UserId"].ToString() == "9")
                                {
                                    <input type="button" title="Changes/Modification" value="Changes/Modification" id="btnChangesModification" class="btn btn-primary Modification" style="margin-left:8px" />
                                }
                                <a style="text-align:center; float:initial; margin-left:8px" class="btn btn-primary" onclick="GetClientReport()">Exam Time Table Pdf </a>
                            </div>
                        </div>
                        @if (Session["UserId"].ToString() != "1")
                        {
                            <div class="row">
                                <div class="col-lg-offset-1 col-lg-2">
                                    Send Back
                                </div>
                                <div class="col-lg-2">
                                    @Html.DropDownListFor(model => model.SelectedSBID, new SelectList(Model.LoginRoleListSendBack, "Value", "Text"), new
                                    {
                                        @class = "form-control select2"
                                    })
                                    <span id="spnselectdropdown" class="text-danger" style="display:none;">Please  Select Hierarcy level</span>

                                </div>
                                <div class="col-lg-7">

                                    <a class=" btn btn-primary" id="btnSendBack">Send Back</a>

                                </div>
                            </div>
                        }

                    </div>
                </div>
            </div>
        </div>
    </div>
    <br />
    <br />
    <br />
    <div class="modal fade" id="HistoryRemarksCommentsModal" role="dialog">
        <div class="modal-dialog modal-xl" style="width: 60%; margin: 30px auto; padding: 2px;">
            <div class="modal-content" style="padding:15px;">
                <div class="modal-header">
                    <h2 class="modal-title head1">Remark Details</h2>
                </div>
                <P>Calendar Notification Number: <label id="notif"></label></P><br /><br />
                <table class="table table-striped table-hover text-center shadshadowow clswidth" id="GetCommentRemarksDetails" style="width:100% !important" border="1" align="center">
                    <thead>
                        <tr>
                            <th>Sl. No.</th>
                            <th>Date</th>
                            <th>From</th>
                            <th>To</th>
                            <th>Comments</th>
                        </tr>
                    </thead>
                    <tbody id="tbodyGrid"></tbody>
                </table>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal" style="width: 20%; background-color:forestgreen;color:white;">OK</button>
                </div>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
    var selectedTab = '@Model.selectTab';
    if (selectedTab != null)
    {
         if (selectedTab == 0) {
        $('.nav-tabs li:eq(0) a').tab('show')
        }
        else if (selectedTab == 1) {
            $('.nav-tabs li:eq(1) a').tab('show')
        }
        else if (selectedTab == 2) {
            $('.nav-tabs li:eq(2) a').tab('show')
        }
    }

    var RoleId = '@Session["UserId"]';
    var Screen_Login_Id = '@Session["LoginId"]';
    if (RoleId != null) {
        if (RoleId == 1) {
            $('#tab2').show();
            $('#tab3').show();
        }
        else {
            $('#tab2').hide();
            $('#tab3').show();
        }
    } else {
        $('#tab2').hide();
        $('#tab3').hide();
    }

    function GetSubjectListBasedonType() {

        var CourseTypeId = $('#CourseTypeId :selected').val();
        var SubjectTypeId = $('#SubjectTypeId :selected').val();
        $.ajax({
            type: 'POST',
            url: '/Notification/GetSubjectList',
            data: { CourseTypeId: CourseTypeId, STradeId: 3, subjectType: SubjectTypeId },
            success: function (data) {
                if (data.length > 0) {
                    $("#mySkills").empty();
                    $.each(data, function (key, value) {
                        $("#mySkills").append($("<option></option>").val(value.Value).html(value.Text));
                    });
                    $("#mySkills").trigger('change');
                    var table = document.getElementById('SubjectToNotificationGrid');
                    var arr = new Array();
                    var rowLength = table.rows.length;
                    for (var j = 1; j < rowLength; j++) {

                        var row = table.rows[j];
                        var rollnum = row.cells[8].innerHTML;
                        var splittedData = rollnum.split(",");
                        for (var data in splittedData) {
                            var arrVal = parseInt(splittedData[data]);
                            arr.push(arrVal);
                        }

                    }

                    for (var k in arr) {
                        var optionVal = arr[k]// arr[k];
                        $("#mySkills").find("option[value=" + optionVal + "]").hide();
                    }
                }
            }
        });
       
    }

    $("#RoleId").on('change', function () {
        if ($(this).find('option:selected').val() > 0) {
            $("#SelectedSBID").attr('disabled', true);
            $("#btnSendBack").attr('disabled', true);
            $("#btnApprove").attr('disabled', true);
            //$(".sendBtn3").attr('disabled', true);
        }
        else {
            $("#SelectedSBID").attr('disabled', false);
            $("#btnSendBack").attr('disabled', false);
            $("#btnApprove").attr('disabled', false);
            //$(".sendBtn3").attr('disabled', false);
        }

    });

    $("#SelectedSBID").on('change', function () {
        if ($(this).find('option:selected').val() > 0) {
            $("#RoleId").attr('disabled', true);
            $("#btnforward").attr('disabled', true);
            $("#btnApprove").attr('disabled', true);
            //$(".sendBtn3").attr('disabled', true);
        }
        else {
            $("#RoleId").attr('disabled', false);
            $("#btnforward").attr('disabled', false);
            $("#btnApprove").attr('disabled', false);
            //$(".sendBtn3").attr('disabled', false);
        }

    });

    $('#SujectTtypeId').on('change', function () {
        debugger;
        if ($(this).find('option:selected').val() == 1) {
            dropDownElement = $("#SubjectTypeId");
            dropDownElement.find('option[value=36]').hide();
            $("select#SubjectTypeId")[0].selectedIndex = 0;
        }
        else {
            dropDownElement = $("#SubjectTypeId");
            dropDownElement.find('option[value=36]').show();
        }
        if ($(this).find('option:selected').val() == 2) {
            dropDownElement = $("#SubjectTypeId");
            dropDownElement.find('option[value=9]').hide();
            dropDownElement.find('option[value=18]').hide();
            dropDownElement.find('option[value=19]').hide();
            dropDownElement.find('option[value=23]').hide();
            $("select#SubjectTypeId")[0].selectedIndex = 0;

        }
        else {
            dropDownElement = $("#SubjectTypeId");
            dropDownElement.find('option[value=9]').show();
            dropDownElement.find('option[value=18]').show();
            dropDownElement.find('option[value=19]').show();
            dropDownElement.find('option[value=23]').show();
        }
        var table = document.getElementById('SubjectToNotificationGrid');
        var arr = new Array();
        var rowLength = table.rows.length;
        for (var j = 1; j < rowLength; j++) {

            var row = table.rows[j];
            var rollnum = row.cells[8].innerHTML;
            var splittedData = rollnum.split(",");
            for (var data in splittedData) {
                var arrVal = parseInt(splittedData[data]);
                arr.push(arrVal);
            }

        }

        for (var k in arr) {
            var optionVal = arr[k]// arr[k];
            $("#mySkills").find("option[value=" + optionVal + "]").hide();
        }
    })
   
 
</script>
<script src="~/Scripts/ApplicationJs/Calendar.js"></script>
