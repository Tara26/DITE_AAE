@model Models.AffiliationNested
@{
    ViewBag.Title = "DeaffiliateInstitute";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<link href="~/Content/frontend/css/style1.css" rel="stylesheet" />
<style>
    .table > thead:first-child > tr:first-child > th, .table > caption + thead > tr:first-child > td, .table > colgroup + thead > tr:first-child > td, .table > thead:first-child > tr:first-child > td {
        border-top: 0;
        text-align: center;
        width: 5%;
    }
    input[type=text], input[type=password] {
        width: 100px;
        padding: 12px 20px;
        margin: 8px 0;
        display: inline-block;
        border: 1px solid #ccc;
        box-sizing: border-box;
    }
    .form-control[disabled], .form-control[readonly], fieldset[disabled] .form-control {
        background-color: #eee;
        opacity: 1;
        width: 120px;
    }
</style>

@*@if (Session["UserId"].Equals((int)Models.Affiliation.CsystemType.getCommon.CaseWorker))*@
<div class="row" style="padding-top:40px">
     <ul class="nav nav-tabs font">

            @if (Convert.ToInt32(Session["RoleId"]) == (int)Models.Affiliation.CsystemType.getCommon.CaseWorker)


            {
                <li>
                    <a href="#tab_1" id="tab1" class="tab-1" data-toggle="tab">Update Affiliate/De-Affiliate institute Details</a>
                </li>
                @*<li>
                        <a href="#tab_2" id="tab2" class="tab-2" data-toggle="tab">Review and Approve De-Affiliate/Re-Affiliate Institute status details</a>
                    </li>*@
                <li>
                    <a href="#tab_3" id="tab3" class="tab-3" data-toggle="tab">View Affiliate/De-affiliate Institute status</a>
                </li>

            }
            else if (Convert.ToInt32(Session["RoleId"]) == (int)Models.Affiliation.CsystemType.getCommon.OFFICE_SUPERINTENDENT || Convert.ToInt32(Session["RoleId"]) == (int)Models.Affiliation.CsystemType.getCommon.Assistant_Director || Convert.ToInt32(Session["RoleId"]) == (int)Models.Affiliation.CsystemType.getCommon.Deputy_Director)
            {
                <li>
                    <a href="#tab_2" id="tab2" class="tab-2" data-toggle="tab">Review Affiliate/De-Affiliate institute Details</a>
                </li>
                <li>
                    <a href="#tab_3" id="tab3" class="tab-3" data-toggle="tab">View Affiliate/De-Affiliate institute Details </a>
                </li>
            }
            else if (Convert.ToInt32(Session["RoleId"]) == (int)Models.Affiliation.CsystemType.getCommon.Assistant_Director || Convert.ToInt32(Session["RoleId"]) == (int)Models.Affiliation.CsystemType.getCommon.Deputy_Director)
            {
                <li>
                    <a href="#tab_2" id="tab2" class="tab-2" data-toggle="tab">Review Affiliate/De-Affiliate institute Details </a>
                </li>
                <li>
                    <a href="#tab_3" id="tab3" class="tab-3" data-toggle="tab">View Affiliate/De-Affiliate institute Details</a>
                </li>
            }

            else if (Session["RoleId"].Equals((int)Models.Affiliation.CsystemType.getCommon.ITIAdmin))
            {

                <li>
                    <a href="#tab_5" id="tab5" class="tab-1" data-toggle="tab">View Affiliate/De-Affiliate institute Details</a>
                </li>
            }
            else if (Convert.ToInt32(Session["RoleId"]) == (int)Models.Affiliation.CsystemType.getCommon.Commissioner || Convert.ToInt32(Session["RoleId"]) == (int)Models.Affiliation.CsystemType.getCommon.Joint_Director || Convert.ToInt32(Session["RoleId"]) == (int)Models.Affiliation.CsystemType.getCommon.Additional_Director)
            {

                <li>
                    <a href="#tab_3" id="tab3" class="tab-3" data-toggle="tab">View Affiliate/De-Affiliate institute Details</a>
                </li>
            }

        </ul>

        <div class="container-fluid font" style="background-color:white;box-shadow: 0 2px 4px rgba(0,0,0,0.6); padding:5px;">
            <div class="tab-content">
                <div class="tab-pane fade" id="tab_1">
                    <div class="row">
                        <div class="col-lg-12">
                        </div>
                    </div>

                    <input type="hidden" id="hdnSession" data-value="@Request.RequestContext.HttpContext.Session["UserId"]" />
                    @if (Convert.ToInt32(Session["RoleId"]) == (int)Models.Affiliation.CsystemType.getCommon.CaseWorker)
                    {
                        <div class="row">
                            <div class="form-group">
                                <div class="col-md-12" id="=tblGridUpdateTrade">

                                    @* <h2 class="modal-title a1" style="color:#195c9f; text-align:center; font-weight:700">De-Affiliate Institute Details</h2>*@
                                    <br /><br />
                                    <div id="DistrictWiseFilter" class="form-group" style="padding:30px">
                                        <h3 class="head1">De-affiliate Institute Details </h3>
                                        <br />
                                        <div class="row a">
                                            <div class="col-lg-1">
                                                <label class="control-label" for="txtAgencyRegnNo">Course Type</label>
                                            </div>
                                            <div class="col-lg-2">
                                                <select class="form-control filter-change" id="CourseTypes">
                                                    <option value="choose">Select</option>
                                                </select>
                                            </div>
                                            <div class="col-lg-1">
                                                <label for="txtAgencyRegnNo">Division</label>
                                            </div>
                                            <div class="col-lg-2">
                                                <select class="form-control filter-change" id="Divisions" onchange="GetDistrictList(this);">
                                                    <option value="choose">Select</option>
                                                </select>
                                            </div>
                                            <div class="col-lg-1">
                                                <label for="txtAgencyRegnNo">District</label>
                                            </div>
                                            <div class="col-lg-2">
                                                <select class="form-control filter-change district" id="Districts">
                                                    <option value="choose">Select</option>
                                                </select>
                                            </div>

                                        </div>
                                        <br />  <br />
                                        <div class="col-lg-12" align="right">
                                            <a class=" btn btn-primary sendBtn3">Search</a>
                                           <a class=" btn btn-primary search-affiliated" onclick="cancelUpdateITIInstitute();">Cancel</a>
                                        </div>
                                    </div>

                                    <div style="overflow-x:scroll" id="tblGridUpdateAffiliation_wrapper">
                                        <table class="table table-bordered table-hover" id="tblGridUpdateAffiliation1">
                                            <thead>
                                                <tr>
                                                    <th>SL.No</th>
                                                    <th>Course Type</th>
                                                    <th>MIS ITI Code</th>
                                                    <th>Institute Name</th>

                                                    <th>Division</th>
                                                    <th>District</th>
                                                    <th>Status - Currently With</th>
                                                    <th>Current Institute Status</th>
                                                    <th>Requested Institute Status</th>
                                                    <th>Action</th>
                                                </tr>
                                            </thead>
                                            @if (Model.Cwinst_list != null)
                                            {
                                                <tbody>
                                                    @for (var i = 0; i < Model.Cwinst_list.Count(); i++)
                                                    {
                                                        var FileUploadPathChk = Convert.ToString(Model.Cwinst_list[i].FileUploadPath);
                                                        var statusidChk = Convert.ToString(Model.Cwinst_list[i].status_id);
                                                    <tr>
                                                        <td></td>
                                                        <td>
                                                            @Html.DisplayFor(a => a.Cwinst_list[i].CourseType)
                                                        </td>
                                                        <td>
                                                            @Html.DisplayFor(a => a.Cwinst_list[i].MisCode)
                                                        </td>
                                                        <td>
                                                            @Html.DisplayFor(a => a.Cwinst_list[i].iti_college)

                                                            @Html.HiddenFor(a => a.Cwinst_list[i].iti_college_id, new { @class = "iti_college_id" })
                                                            @Html.HiddenFor(a => a.Cwinst_list[i].Trade_ITI_id, new { @class = "trade_iti_id" })

                                                        </td>

                                                        <td>
                                                            @Html.DisplayFor(a => a.Cwinst_list[i].Division)
                                                        </td>
                                                        <td>
                                                            @Html.DisplayFor(a => a.Cwinst_list[i].District)
                                                        </td>

                                                        <td>
                                                            @if (Model.Cwinst_list[i].StatusName != " - ")
                                                            {
                                                                @Html.DisplayFor(a => a.Cwinst_list[i].StatusName)
                                                            }

                                                        </td>
                                                        <td>
                                                            @if (Model.Cwinst_list[i].IsActive == true)
                                                            //if (Model.list1[i].ActiveDeActive == false)

                                                            {
                                                                <input type="text" id="Active_@Model.Cwinst_list[i].iti_college_id" value='Affiliate' class="form-control" readonly="readonly" />

                                                                @*@Html.HiddenFor(a => a.list1[i].iti_college_id, new { @class = "collegeId" })*@
                                                            }
                                                            else
                                                            {
                                                                <input type="text" id="Deactive_@Model.Cwinst_list[i].iti_college_id" value='Deaffiliate' class="form-control" readonly="readonly" />
                                                                @*<input type="text" id="DeActive_@Model.list1[i].Trade_ITI_id" value='Deactive' class="btn btn-primary statusbtn" onclick="SaveActivedeactiveupdate(this);" />*@
                                                                @* @Html.HiddenFor(a => a.list1[i].iti_college_id, new { @class = "collegeId" })*@
                                                            }
                                                        </td>
                                                        <td>
                                                            @if (Model.Cwinst_list[i].StatusName == " - ")
                                                            {
                                                                <input type="text" id="Active_@Model.Cwinst_list[i].iti_college_id" class="form-control" readonly="readonly" />
                                                            }
                                                            else
                                                            {
                                                                if (Model.Cwinst_list[i].IsActive1 == true)
                                                                //if (Model.list1[i].ActiveDeActive == false)

                                                                {
                                                                    <input type="text" id="Active_@Model.Cwinst_list[i].iti_college_id" value='Affiliate' class="form-control" readonly="readonly" />

                                                                    @*@Html.HiddenFor(a => a.list1[i].iti_college_id, new { @class = "collegeId" })*@
                                                                }
                                                                else
                                                                {
                                                                    <input type="text" id="Deactive_@Model.Cwinst_list[i].iti_college_id" value='De-affiliate' class="form-control" readonly="readonly" />

                                                                }
                                                            }
                                                        </td>
                                                        <td>
                                                            <input type="button" class="btn btn-primary" img src="@Url.Content("~/Content/img/pencil2.png")" id="Active_@Model.Cwinst_list[i].iti_college_id" value='View' onclick="ViewInstitutionDeatails(@Model.Cwinst_list[i].iti_college_id)" />

                                                        </td>

                                                    </tr>
                                                    }
                                                </tbody>
                                            }

                                        </table>
                                    </div>
                                </div>

                                @*test*@

                                <div id="Affiliation_view" style="display:none">
                                    <div class="form-group" style="border:1px solid black;padding:20px">
                                        <div class="row">
                                            <div class="card">
                                                <div class="card-body c">

                                                    <div class="panel panel-default">
                                                        <div class="panel-heading">
                                                            <span>Institute Details</span>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-2">
                                                            <label class="control-label">Name of ITI</label>

                                                            <input type="hidden" id="CollegeId" value="0" />
                                                            <input type="hidden" id="IsActive" value="0" />
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-name clear"></span>
                                                        </div>

                                                        <div class="col-md-2">
                                                            <label class="control-label">Type of ITI</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-type clear"></span>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <label class="control-label">Course Type</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-course_name clear"></span>
                                                        </div>
                                                    </div>

                                                    <div class="row">
                                                        <div class="col-md-2">
                                                            <label class="control-label">MIS ITI Code</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-mis clear"></span>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <label class="control-label">Email Id</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-email clear breakword"></span>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <label class="control-label">Principal Phone Number</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-number clear"></span>
                                                        </div>

                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-2">
                                                            <label class="control-label">Date of Establishment</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-AffiliationDate clear"></span>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <label class="control-label">Website</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-Website clear"></span>
                                                        </div>

                                                    </div>

                                                    <div class="panel panel-default">
                                                        <div class="panel-heading">
                                                            <span>Address Details</span>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-2">
                                                            <label class="control-label">Address</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-address clear"></span>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <label class="control-label">Location Type</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-location clear"></span>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <label class="control-label">State</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="clear">Karnataka</span>
                                                        </div>
                                                    </div>

                                                    <div class="row">
                                                        <div class="col-md-2">
                                                            <label class="control-label">Division</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-division clear"></span>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <label class="control-label">District</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-district clear"></span>
                                                        </div>

                                                        <div class="col-md-2">
                                                            <label class="control-label">Taluka</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-taluk clear"></span>
                                                        </div>

                                                    </div>

                                                    <div class="row">
                                                        <div class="col-md-2">
                                                            <label class="control-label">constituency</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-constituency clear"></span>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <label class="control-label">Build up Area</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-build clear"></span>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <label class="control-label">Geo Location Latitude:,Longitude</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-geo clear"></span>
                                                        </div>

                                                    </div>
                                                    <div class="panel panel-default">
                                                        <div class="panel-heading">
                                                            <span>Affiliation Details</span>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-2">
                                                            <label class="control-label">Affiliation Order No.</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-AfflOrderNo clear"></span>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <label class="control-label">Affiliation Order date</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-AfflOrderNoDate clear"></span>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <label class="control-label">Scheme</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-scheme_name clear"></span>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-2">
                                                            <label class="modal-title deaffiliate"> </label>
                                                            <label class="modal-title affiliate"></label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <input type="file" id="uploadfile" />
                                                            <input type="file" id="uploadfileaffiliate" />
                                                            <p>File Size Max 200KB</p>
                                                            <small class="text-danger" id="uploadfile_Required" style="display:none">file is required</small>
                                                            @*<a class='btn btn-link' onclick="GetDownloadFileLink2()">
            <img src="~/Content/img/pdf_logo.png" height="40px" width="40Px" />
            <input type="hidden" value="" id="DownloadFileLink2" />
        </a>*@
                                                        </div>
                                                        <div class="col-md-2" style="padding-left: 85px;">
                                                            <label class="modal-title deaffiliateOrderlabel"></label>
                                                            <label class="modal-title affiliateOrderlabel"></label>
                                                        </div>
                                                        <div class="col-md-2 ">
                                                            <input type="text" id="deaffiliateOrderNo" />
                                                            <input type="text" id="affiliateOrderNo" />
                                                        </div>
                                                        <div class="col-md-2">
                                                            <label class="modal-title deaffiliatedatelabel"></label>
                                                            <label class="modal-title affiliatedatelabel"></label>
                                                        </div>
                                                        <div class="col-md-2 ">
                                                            <input type="text" id="newdeaffiliatedate" class="form-control update date" , autocomplete="off" , placeholder="dd/mm/yyyy" , style="cursor:text;" />
                                                            <input type="text" id="newaffiliatedate" class="form-control update date" , autocomplete="off" , placeholder="dd/mm/yyyy" , style="cursor:text;" />
                                                        </div>
                                                    </div>
                                                    
                                                </div>

                                                <div class="row">
                                                    <h4 class="modal-title a1" style="color:#195c9f; text-align:center; font-weight:700"> Institute Trade Affiliation Document Details</h4>
                                                    <div class="col-md-12">
                                                        <br />
                                                        <table class="table table-bordered" id="tblClgTradeAffiliationDoc">
                                                            <thead>
                                                                <tr>
                                                                    <th>Sl No.</th>
                                                                    <th>Trade Name</th>
                                                                    @*<th>Affiliate/De-Affiliate Order Number</th>
                        <th>Affiliate/De-Affiliate Order Date</th>*@
                                                                    <th>FileName</th>
                                                                    <th>Document</th>
                                                                    @*<th>Document For</th>*@

                                                                </tr>
                                                            </thead>
                                                            <tbody></tbody>
                                                        </table>

                                                    </div>


                                                </div>

                                                <div class="row">
                                                    <h4 class="modal-title a1" style="color:#195c9f; text-align:center; font-weight:700"> Affiliate/Deaffiliate Document Details</h4>
                                                    <div class="col-md-12">
                                                        <br />
                                                        <table class="table table-bordered" id="tblAffiliationDoc">
                                                            <thead>
                                                                <tr>
                                                                    <th>Sl No.</th>
                                                                    <th>Affiliate/De-Affiliate Order Number</th>
                                                                    <th>Affiliate/De-Affiliate Order Date</th>
                                                                    <th>FileName</th>
                                                                    <th>Document</th>
                                                                    @*<th>Document For</th>*@

                                                                </tr>
                                                            </thead>
                                                            <tbody></tbody>
                                                        </table>

                                                    </div>


                                                </div>

                                                <div class="row">
                                                    <h4 class="modal-title a1" style="color:#195c9f; text-align:center; font-weight:700"> Trade's Details</h4>
                                                    <br />
                                                    <br />
                                                    <br>
                                                    <div class="col-md-12">
                                                        <table id="tblViewShift" class="table table-bordered">
                                                            <thead>
                                                                <tr>
                                                                    <th>Sl.No</th>
                                                                    <th>Trade</th>
                                                                    @*<th>NO Of Units</th>*@
                                                                    @*<th>Is PPP</th>
                            <th>Mode of Training</th>*@
                                                                    <th>Status</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody></tbody>
                                                        </table>
                                                    </div>

                                                </div>
                                                <div class="row"></div>
                                                <div class="row"></div>
                                                <div class="card">
                                                    <div class="card-body border">
                                                        <div class="row"></div>
                                                        <div class="row"></div>
                                                        <div class="row">
                                                            <div class="col-md-2">
                                                                <label class="control-label">Status</label>
                                                            </div>
                                                            <div class="col-md-4">
                                                                <input type="button" id="Active" value='Affiliate' class="btn btn-primary statusbtn" onclick="UpdateActivesttus(true,this.id);  " />
                                                                @*@Html.HiddenFor(a => a.Cwinst_list[i].iti_college_id, new { @class = "collegeId" })*@

                                                                <input type="button" id="DeActive" value='De-Affiliate' class="btn btn-primary statusbtn" onclick="UpdateActivesttus(false,this.id); " />
                                                                @*@Html.HiddenFor(a => a.list1[i].iti_college_id, new { @class = "collegeId" })
                        onclick="activedeactivedisable();"*@
                                                                @*<p style="color:red">Pls select Affiliate/De-Affiliate</p>*@
                                                            </div>



                                                            @if (Session["CollegeId"] == null)
                                                            {
                                                                <div class="col-md-2">
                                                                    <label class="control-label"> Send To:</label>
                                                                </div>
                                                                <div class="col-md-4">
                                                                    <select id="dd-flow" class="form-control clear"></select>
                                                                    <small class="text-danger" id="dd-flow_Required" style="display:none">Send To Field Required</small>

                                                                </div>
                                                            }
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-md-2">
                                                                <label class="control-label">Remarks</label>
                                                            </div>
                                                            <div class="col-md-4">
                                                                <textarea id="Remarks" class="form-control clear"></textarea>
                                                                <small class="text-danger" id="Remarks_required" style="display:none">Remark is required</small>

                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-md-5"></div>
                                                            <div class="col-md-2">

                                                                <input type="button" id="btn-sd" class="btn btn-primary" value="Submit" onclick="SaveAffiliateInstitute();" />

                                                                <input type="button" id="btn" class="btn btn-danger" value="Cancel" onclick="clearView()" />
                                                            </div>

                                                            <div class="col-md-5"></div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <input type="hidden" id="Trade_ITI_Id" value="" />
                                                <br />
                                                <br />

                                                <div class="row col-md-12 a" style="margin-top:10px">

                                                    @*<button class="btn btn-primary collaps-history a" data-toggle="collapse" data-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree" style="margin-top: 25px">Show Institute Affiliate/Deaffiliate History</button>*@
                                                    <div class="col-md-12" style="color:#195c9f; text-align:center">
                                                        <h3 class="modal-title head1">Institute Affiliate/Deaffiliate History:</h3>

                                                    </div>
                                                    <br />
                                                    <br />

                                                    <table class="table table-bordered" id="tblHistory">
                                                        <thead>
                                                            <tr>
                                                                <th>Slno</th>
                                                                <th>Date</th>
                                                                <th>From</th>
                                                                <th>To</th>
                                                                <th>Status</th>
                                                                <th>Remarks</th>

                                                            </tr>
                                                        </thead>
                                                        <tbody></tbody>
                                                    </table>
                                                    @*</div>*@
                                                    @*</div>*@
                                                    <!-- Modal PopUp -->
                                                </div>
                                            </div>



                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        @*test*@

                        <div class="form-group">
                            <div class="col-md-2 row">
                                <div class="col-md-6">

                                </div>
                                <div class="col-md-6">

                                </div>
                            </div>
                        </div>



                    }

                </div>
                <div class="tab-pane fade" id="tab_5">
                    <div class="row">
                        <div class="col-lg-12">
                        </div>
                    </div>

                    <input type="hidden" id="hdnSession" data-value="@Request.RequestContext.HttpContext.Session["UserId"]" />
                    @if (Convert.ToInt32(Session["RoleId"]) == (int)Models.Affiliation.CsystemType.getCommon.ITIAdmin)
                    {
                        <div class="row">
                            <div class="form-group">
                                <div class="col-md-12" id="=tblGridUpdateTrade">
                                    <div style="overflow-y:scroll" id="tblGridUpdateAffiliation_wrapper">
                                        <table class="table table-bordered table-hover" id="tblGridUpdateAffiliation1">
                                            <thead>
                                                <tr>
                                                    <th>SL.No</th>
                                                    <th>Date</th>
                                                    <th>Course Type</th>
                                                    <th>MIS ITI Code</th>
                                                    <th>Institute Name</th>
                                                    <th>Address</th>
                                                    <th>Division</th>
                                                    <th>District</th>
                                                    <th>Status - Currently With</th>
                                                    <th>Current Institute Status</th>
                                                    @*<th>Requested Institute Status</th>*@
                                                    <th>Action</th>
                                                </tr>
                                            </thead>
                                            @if (Model.aff_list != null)
                                            {
                                                <tbody>
                                                    @for (var i = 0; i < Model.aff_list.Count(); i++)
                                                    {
                                                        var FileUploadPathChk = Convert.ToString(Model.aff_list[i].FileUploadPath);
                                                        var statusidChk = Convert.ToString(Model.aff_list[i].status_id);
                                                        <tr>
                                                            <td></td>

                                                            <td>
                                                                @Html.DisplayFor(a => a.aff_list[i].Pubdate)
                                                            </td>
                                                            <td>
                                                                @Html.DisplayFor(a => a.aff_list[i].course_name)
                                                            </td>
                                                            <td>
                                                                @Html.DisplayFor(a => a.aff_list[i].mis_code)
                                                            </td>
                                                            <td>
                                                                @Html.DisplayFor(a => a.aff_list[i].name_of_iti)

                                                                @Html.HiddenFor(a => a.aff_list[i].iti_college_id, new { @class = "iti_college_id" })
                                                                @Html.HiddenFor(a => a.aff_list[i].trade_iti_id, new { @class = "trade_iti_id" })

                                                            </td>
                                                            <td>
                                                                @Html.DisplayFor(a => a.aff_list[i].address)
                                                            </td>
                                                             <td>
                                                                @Html.DisplayFor(a => a.aff_list[i].division)
                                                            </td>
                                                            <td>
                                                                @Html.DisplayFor(a => a.aff_list[i].district)
                                                            </td>
                                                            <td>
                                                                @Html.DisplayFor(a => a.aff_list[i].status)
                                                            </td>
                                                            <td>
                                                                @if (Model.aff_list[i].IsActive == true)
                                                                //if (Model.list1[i].ActiveDeActive == false)

                                                                {
                                                                    <input type="text" id="Active_@Model.aff_list[i].iti_college_id" value='Affiliate' class="form-control" readonly="readonly" />

                                                                    @*@Html.HiddenFor(a => a.list1[i].iti_college_id, new { @class = "collegeId" })*@
                                                                }
                                                                else
                                                                {
                                                                    <input type="text" id="Deactive_@Model.aff_list[i].iti_college_id" value='De-affiliate' class="form-control" readonly="readonly" />
                                                                    @*<input type="text" id="DeActive_@Model.list1[i].Trade_ITI_id" value='Deactive' class="btn btn-primary statusbtn" onclick="SaveActivedeactiveupdate(this);" />*@
                                                                    @* @Html.HiddenFor(a => a.list1[i].iti_college_id, new { @class = "collegeId" })*@
                                                                }
                                                            </td>
                                                            @*<td>*@
                                                            @*@if (Model.aff_list[i].IsActive1 == true)*@
                                                            @*if (Model.list1[i].ActiveDeActive == false)*@

                                                            @*{
                                                                <input type="text" id="Active_@Model.aff_list[i].iti_college_id" value='Affiliate' class="form-control" readonly="readonly" />*@

                                                            @*@Html.HiddenFor(a => a.list1[i].iti_college_id, new { @class = "collegeId" })*@
                                                            }
                                                            @*else
                                                                {
                                                                    <input type="text" id="Deactive_@Model.aff_list[i].iti_college_id" value='Deaffiliate' class="form-control" readonly="readonly" />

                                                                }*@
                                                            @*  </td>*@
                                                            <td>
                                                                <input type="button" class="btn btn-primary" img src="@Url.Content("~/Content/img/pencil2.png")" id="Active_@Model.aff_list[i].iti_college_id" value='View' onclick="ViewInstituteDeatailsADM(@Model.aff_list[i].iti_college_id)" />

                                                            </td>

                                                        </tr>
                                                    }
                                                </tbody>
                                            }

                                        </table>
                                    </div>
                                </div>

                                @*test*@

                                <div id="Affiliation_view" style="display:none">
                                    <div class="form-group" style="border:1px solid black;padding:20px">
                                        <div class="row">
                                            <div class="card">
                                                <div class="card-body c">

                                                    <div class="panel panel-default">
                                                        <div class="panel-heading">
                                                            <span>Institute Details</span>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-2">
                                                            <label class="control-label">Name of ITI</label>

                                                            <input type="hidden" id="CollegeId" value="0" />
                                                            <input type="hidden" id="IsActive" value="0" />

                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-nam clear"></span>
                                                        </div>

                                                        <div class="col-md-2">
                                                            <label class="control-label">Type of ITI</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-type clear"></span>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <label class="control-label">Course Type</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-course_name clear"></span>
                                                        </div>
                                                    </div>

                                                    <div class="row">
                                                        <div class="col-md-2">
                                                            <label class="control-label">MIS ITI Code</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-mis clear"></span>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <label class="control-label">Email Id</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-email clear"></span>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <label class="control-label">Principal Phone Number</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-number clear"></span>
                                                        </div>

                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-2">
                                                            <label class="control-label">Date of Establishment</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-AffiliationDate clear"></span>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <label class="control-label">Website</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-Website clear"></span>
                                                        </div>

                                                    </div>

                                                    <div class="panel panel-default">
                                                        <div class="panel-heading">
                                                            <span>Address Details</span>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-2">
                                                            <label class="control-label">Address</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-address clear"></span>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <label class="control-label">Location Type</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-location clear"></span>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <label class="control-label">State</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="clear">Karnataka</span>
                                                        </div>
                                                    </div>

                                                    <div class="row">
                                                        <div class="col-md-2">
                                                            <label class="control-label">Division</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-division clear"></span>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <label class="control-label">District</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-district clear"></span>
                                                        </div>

                                                        <div class="col-md-2">
                                                            <label class="control-label">Taluka</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-taluk clear"></span>
                                                        </div>

                                                    </div>

                                                    <div class="row">
                                                        <div class="col-md-2">
                                                            <label class="control-label">constituency</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-constituency clear"></span>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <label class="control-label">Build up Area</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-build clear"></span>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <label class="control-label">Geo Location Latitude:,Longitude</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-geo clear"></span>
                                                        </div>

                                                    </div>
                                                    <div class="panel panel-default">
                                                        <div class="panel-heading">
                                                            <span>Affiliation Details</span>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-2">
                                                            <label class="control-label">Affiliation Order No.</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-AfflOrderNo clear"></span>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <label class="control-label">Affiliation Order date</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-AfflOrderNoDate clear"></span>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <label class="control-label">Scheme</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-scheme_name clear"></span>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-2">

                                                            <label class="modal-title Affiliationdoc">Affiliation Documents</label>
                                                        </div>
                                                        <div class="col-md-2 ">
                                                            <a class='btn btn-link2 filealign1' id="Downloadffiliation" @*onclick="GetDownloadFileLinkForAffiliation()"*@><img src="~/Content/img/pdf_logo.png" height="40px" width="40px" /></a>
                                                            <input type="hidden" value="" id="DownloadFileLink3" />
                                                            <span id="AffiliationFileName"></span>
                                                        </div>

                                                        @*<div class="col-md-2 ">
                <a class='btn btn-link' id="Downloaddeaffiliate" onclick="GetDownloadFileLink2()"><img src="~/Content/img/pdf_logo.png" height="40px" width="40px" /></a>
                <input type="hidden" value="" id="DownloadFileLink2" />
            </div>

            <div class="col-md-2 ">
                <a class='btn btn-link1' id="Downloadffiliate" onclick="GetDownloadFileLinkAffiliate()"><img src="~/Content/img/pdf_logo.png" height="40px" width="40px" /></a>
                <input type="hidden" value="" id="DownloadFileLink" />
            </div>*@

                                                    </div>
                                                    <div class="row">
                                                        <h4 class="modal-title a1" style="color:#195c9f; text-align:center; font-weight:700"> Institute Trade Affiliation Document Details</h4>
                                                        <div class="col-md-12">
                                                            <br />
                                                            <table class="table table-bordered" id="tblClgTradeAffiliationDoc">
                                                                <thead>
                                                                    <tr>
                                                                        <th>Sl No.</th>
                                                                        <th>Trade Name</th>
                                                                        @*<th>Affiliate/De-Affiliate Order Number</th>
                        <th>Affiliate/De-Affiliate Order Date</th>*@
                                                                        <th>FileName</th>
                                                                        <th>Document</th>
                                                                        @*<th>Document For</th>*@

                                                                    </tr>
                                                                </thead>
                                                                <tbody></tbody>
                                                            </table>

                                                        </div>


                                                    </div>

                                                    <div class="row">
                                                        <h4 class="modal-title a1" style="color:#195c9f; text-align:center; font-weight:700"> Affiliate/Deaffiliate Document Details</h4>
                                                        <div class="col-md-12">
                                                            <br />
                                                            <table class="table table-bordered" id="tblAffiliationDoc">
                                                                <thead>
                                                                    <tr>
                                                                        <th>Sl No.</th>
                                                                        <th>Affiliate/De-Affiliate Order Number</th>
                                                                        <th>Affiliate/De-Affiliate Order Date</th>
                                                                        <th>FileName</th>
                                                                        <th>Document</th>
                                                                        @*<th>Document For</th>*@

                                                                    </tr>
                                                                </thead>
                                                                <tbody></tbody>
                                                            </table>

                                                        </div>


                                                    </div>
                                                </div>

                                                <div class="row">
                                                    <h4 class="modal-title a1" style="color:#195c9f; text-align:center; font-weight:700"> Trade's Details</h4>
                                                    <br />
                                                    <br />
                                                    <br />
                                                    <div class="col-md-12">
                                                        <table id="tblViewShift" class="table table-bordered">
                                                            <thead>
                                                                <tr>
                                                                    <th>Sl.No</th>
                                                                    <th>Trade</th>
                                                                    @*<th>NO Of Units</th>*@
                                                                    @*<th>Is PPP</th>
                                                                        <th>Mode of Training</th>*@
                                                                    <th>Status</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody></tbody>
                                                        </table>
                                                    </div>

                                                </div>
                                                <div class="row"></div>
                                                <div class="row"></div>
                                                <div class="card">
                                                    <div class="card-body border">
                                                        <div class="row"></div>
                                                        <div class="row"></div>
                                                        <div class="row">
                                                            @*<div class="col-md-2">
                                                                    <label class="control-label">Status</label>
                                                                </div>*@
                                                            @*<div class="col-md-4">
                                                                <input type="button" id="Active" value='Re-Affiliate' class="btn btn-primary statusbtn" onclick="UpdateActivesttus(true); this.style.color = 'green'; " />*@
                                                            @*@Html.HiddenFor(a => a.Cwinst_list[i].iti_college_id, new { @class = "collegeId" })*@

                                                            @*<input type="button" id="DeActive" value='De-Affiliate' class="btn btn-primary statusbtn" onclick="UpdateActivesttus(false); this.style.color = 'green';" />*@
                                                            @*@Html.HiddenFor(a => a.list1[i].iti_college_id, new { @class = "collegeId" })
                                                                onclick="activedeactivedisable();"*@

                                                            @* </div> *@



                                                            @if (Session["CollegeId"] == null)
                                                            {
                                                                @*<div class="col-md-2">
                                                                        <label class="control-label"> Send To:</label>
                                                                    </div>
                                                                    <div class="col-md-4">
                                                                        <select id="dd-flow" class="form-control clear"></select>
                                                                        <small class="text-danger" id="dd-flow_Required" style="display:none">Send To Field Required</small>

                                                                    </div>*@
                                                            }
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-md-2">
                                                                <label class="control-label">Remarks</label>
                                                            </div>
                                                            <div class="col-md-4">
                                                                <textarea id="Remarks" class="form-control clear"></textarea>
                                                                <small class="text-danger" id="Remarks_required" style="display:none">Remark is required</small>

                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-md-5"></div>
                                                            <div class="col-md-2">

                                                                <input type="button" id="btn-sends" class="btn btn-primary" value="Submit" onclick="SaveAffiliateInstituteADM();" />

                                                                <input type="button" id="" class="btn btn-danger" value="Cancel" onclick="clearView()" />
                                                            </div>

                                                            <div class="col-md-5"></div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <input type="hidden" id="Trade_ITI_Id" value="" />

                                                <br />
                                                <br />
                                                <div class="row col-md-12 a" style="margin-top:10px">

                                                    @*<button class="btn btn-primary collaps-history a" data-toggle="collapse" data-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree" style="margin-top: 25px">Show Institute Affiliate/Deaffiliate History</button>*@
                                                    <div class="col-md-12" style="color:#195c9f; text-align:center">
                                                        <h3 class="modal-title head1">Institute Affiliate/De-affiliate History:</h3>

                                                    </div>
                                                    <br />
                                                    <br />


                                                    <table class="table table-bordered" id="tblHistory">
                                                        <thead>
                                                            <tr>
                                                                <th>Slno</th>
                                                                <th>Date</th>
                                                                <th>From</th>
                                                                <th>To</th>
                                                                <th>Status</th>
                                                                <th>Remarks</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody></tbody>
                                                    </table>
                                                    @*</div>*@
                                                    @*</div>*@
                                                    <!-- Modal PopUp -->
                                                </div>
                                            </div>



                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        @*test*@

                        <div class="form-group">
                            <div class="col-md-2 row">
                                <div class="col-md-6">

                                </div>
                                <div class="col-md-6">

                                </div>
                            </div>
                        </div>



                    }

                </div>

                <div class="tab-pane fade" id="tab_2">
                    <div class="row">
                        <div class="col-lg-12">
                        </div>
                    </div>

                    <input type="hidden" id="hdnSession" data-value="@Request.RequestContext.HttpContext.Session["UserId"]" />
                    @if (Convert.ToInt32(Session["RoleId"]) == (int)Models.Affiliation.CsystemType.getCommon.OFFICE_SUPERINTENDENT)

                    {

                        <div class="row">
                            <div class="form-group">
                                <div class="col-md-12">
                                    @*<h3 class="modal-title a1 head1">De-Affiliate Institute Details</h3>*@

                                    <div id="DistrictWiseFilter" class="form-group" style="padding:30px">
                                        <h3 class="modal-title a2" style="background-color:#195c9f; color:white; text-align:center">De-affiliate Institute Details </h3>
                                        <br />
                                        <div class="row a">
                                            <div class="col-lg-1">
                                                <label class="control-label" for="txtAgencyRegnNo">Course Type</label>
                                            </div>
                                            <div class="col-lg-2">
                                                <select class="form-control filter-change" id="CourseTypes">
                                                    <option value="choose">Select</option>
                                                </select>
                                            </div>
                                            <div class="col-lg-1">
                                                <label for="txtAgencyRegnNo">Division</label>
                                            </div>
                                            <div class="col-lg-2">
                                                <select class="form-control filter-change" id="Divisions" onchange="GetDistrictList(this);">
                                                    <option value="choose">Select</option>
                                                </select>
                                            </div>
                                            <div class="col-lg-1">
                                                <label for="txtAgencyRegnNo">District</label>
                                            </div>
                                            <div class="col-lg-2">
                                                <select class="form-control filter-change district" id="Districts">
                                                    <option value="choose">Select</option>
                                                </select>
                                            </div>

                                        </div>
                                        <br />  <br />
                                        <div class="col-lg-12" align="right">
                                            <a class=" btn btn-primary sendBtn4">Search</a>
                                            <a class=" btn btn-primary search-affiliated" onclick="cancelUpdateITIInstitute();">Cancel</a>
                                        </div>
                                    </div>

                                    <div style="overflow-x:scroll" id="tblGridUpdateAffiliation_wrapper">
                                        <table class="table table-bordered table-hover" id="tblGridUpdateAffiliation1">
                                            <thead>
                                                <tr>
                                                    <th>SL.No</th>
                                                    <th>Course Type</th>
                                                    <th>MIS ITI Code</th>
                                                    <th>Institute Name</th>

                                                    <th>Division</th>
                                                    <th>District</th>
                                                    <th>Status - Currently With</th>
                                                    <th>Current Institute Status</th>
                                                    <th>Requested Institute Status</th>
                                                    <th>Action</th>

                                                </tr>
                                            </thead>
                                            @if (Model.Osinst_list != null)
                                            {
                                                <tbody>
                                                    @for (var i = 0; i < Model.Osinst_list.Count(); i++)
                                                    {
                                                        var FileUploadPathChk = Convert.ToString(Model.Osinst_list[i].FileUploadPath);
                                                        var statusidChk = Convert.ToString(Model.Osinst_list[i].status_id);
                                                    <tr>
                                                        <td></td>
                                                        @*<td>
            Sent for Review
        </td>*@
                                                        <td>
                                                            @Html.DisplayFor(a => a.Osinst_list[i].CourseType)
                                                        </td>
                                                        <td>
                                                            @Html.DisplayFor(a => a.Osinst_list[i].MisCode)
                                                        </td>
                                                        <td>
                                                            @Html.DisplayFor(a => a.Osinst_list[i].iti_college)

                                                            @Html.HiddenFor(a => a.Osinst_list[i].iti_college_id, new { @class = "iti_college_id" })
                                                        </td>

                                                        <td>
                                                            @Html.DisplayFor(a => a.Osinst_list[i].Division)
                                                        </td>
                                                        <td>
                                                            @Html.DisplayFor(a => a.Osinst_list[i].District)
                                                        </td>

                                                        @*@if (Model.Osinst_list[i].StatusName != null)
        {*@
                                                        <td>
                                                            @Html.DisplayFor(a => a.Osinst_list[i].StatusName)
                                                        </td>
                                                        <td>
                                                            @if (Model.Osinst_list[i].IsActive == true)
                                                            //if (Model.list1[i].ActiveDeActive == false)

                                                            {
                                                                <input type="text" id="Active_@Model.Osinst_list[i].iti_college_id" value='Affiliate' class="form-control" readonly="readonly" />

                                                                @*@Html.HiddenFor(a => a.list1[i].iti_college_id, new { @class = "collegeId" })*@
                                                            }
                                                            else
                                                            {
                                                                <input type="text" id="Deactive_@Model.Osinst_list[i].iti_college_id" value='De-affiliate' class="form-control" readonly="readonly" />
                                                                @*<input type="text" id="DeActive_@Model.list1[i].Trade_ITI_id" value='Deactive' class="btn btn-primary statusbtn" onclick="SaveActivedeactiveupdate(this);" />*@
                                                                @* @Html.HiddenFor(a => a.list1[i].iti_college_id, new { @class = "collegeId" })*@
                                                            }
                                                        </td>
                                                        <td>
                                                            @if (Model.Osinst_list[i].IsActive1 == true)
                                                            //if (Model.list1[i].ActiveDeActive == false)

                                                            {
                                                                <input type="text" id="Active_@Model.Osinst_list[i].iti_college_id" value='Affiliate' class="form-control" readonly="readonly" />

                                                                @*@Html.HiddenFor(a => a.list1[i].iti_college_id, new { @class = "collegeId" })*@
                                                            }
                                                            else
                                                            {
                                                                <input type="text" id="Deactive_@Model.Osinst_list[i].iti_college_id" value='De-affiliate' class="form-control" readonly="readonly" />
                                                                @*<input type="text" id="DeActive_@Model.list1[i].Trade_ITI_id" value='Deactive' class="btn btn-primary statusbtn" onclick="SaveActivedeactiveupdate(this);" />*@
                                                                @* @Html.HiddenFor(a => a.list1[i].iti_college_id, new { @class = "collegeId" })*@
                                                            }
                                                        </td>
                                                        @*}*@
                                                        @*else
        {
            <td>
                sent for review
                </td>
                }*@

                                                        <td>
                                                            <input type="button" class="btn btn-primary" img src="@Url.Content("~/Content/img/pencil2.png")" id="Active_@Model.Osinst_list[i].iti_college_id" value='View' onclick="ViewInstitutionDeatailsOS(@Model.Osinst_list[i].iti_college_id)" />

                                                        </td>

                                                    </tr>
                                                    }
                                                </tbody>
                                            }


                                        </table>
                                    </div>
                                </div>

                                @*test*@

                                <div id="Affiliation_view" style="display:none">
                                    <div class="form-group" style="border:1px solid black;padding:20px">
                                        <div class="row" style="padding:30px">
                                            <div class="card a5">
                                                <div class="card-body">
                                                    <div class="panel panel-default">
                                                        <div class="panel-heading">
                                                            <span>Institute Details</span>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-2">
                                                            <label class="control-label">Name of ITI</label>
                                                            <input type="hidden" id="CollegeId" value="0" />
                                                            <input type="hidden" id="IsActiveNew" value="" />
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-inams clear"></span>
                                                        </div>

                                                        <div class="col-md-2">
                                                            <label class="control-label">Type of ITI</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-type clear"></span>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <label class="control-label">Course Type</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-course_name clear"></span>
                                                        </div>
                                                    </div>
                                                    @*<hr>
        <div class="row">
            <div class="col-md-2">
                <label class="control-label">MIS Code</label>
            </div>
            <div class="col-md-2">
                <span class="text-mis clear"></span>
            </div>
            <div class="col-md-2">
                <label class="control-label">CSS Code</label>
            </div>
            <div class="col-md-2">
                <span class="text-css clear"></span>
            </div>
            <div class="col-md-2">
                <label class="control-label">Trade</label>
                <input type="hidden" id="tradeID" value="0" />
            </div>
            <div class="col-md-2">
                <span class="text-trade clear"></span>
            </div>
        </div>
        <hr>*@
                                                    <div class="row">
                                                        <div class="col-md-2">
                                                            <label class="control-label">MIS ITI Code</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-mis clear"></span>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <label class="control-label">Email Id</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-email clear"></span>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <label class="control-label">Principal Phone Number</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-number clear"></span>
                                                        </div>

                                                    </div>

                                                    <div class="row">
                                                        <div class="col-md-2">
                                                            <label class="control-label">Date of Establishment</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-AffiliationDate clear"></span>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <label class="control-label">Website</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-Website clear"></span>
                                                        </div>

                                                    </div>
                                                    <div class="panel panel-default">
                                                        <div class="panel-heading">
                                                            <span>Address Details</span>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-2">
                                                            <label class="control-label">Address</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-address clear"></span>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <label class="control-label">Location Type</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-location clear"></span>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <label class="control-label">State</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="clear">Karnataka</span>
                                                        </div>
                                                    </div>

                                                    <div class="row">
                                                        <div class="col-md-2">
                                                            <label class="control-label">Division</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-division clear"></span>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <label class="control-label">District</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-district clear"></span>
                                                        </div>

                                                        <div class="col-md-2">
                                                            <label class="control-label">Taluka</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-taluk clear"></span>
                                                        </div>

                                                    </div>

                                                    <div class="row">
                                                        <div class="col-md-2">
                                                            <label class="control-label">constituency</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-constituency clear"></span>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <label class="control-label">Build up Area</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-build clear"></span>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <label class="control-label">Geo Location Latitude:,Longitude</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-geo clear"></span>
                                                        </div>

                                                    </div>
                                                    <div class="panel panel-default">
                                                        <div class="panel-heading">
                                                            <span>Affiliation Details</span>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-2">
                                                            <label class="control-label">Affiliation Order No.</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-AfflOrderNo clear"></span>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <label class="control-label">Affiliation Order date</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-AfflOrderNoDate clear"></span>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <label class="control-label">Scheme</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-scheme_name clear"></span>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        @*<div class="col-md-2">
                <label class="modal-title deaffiliate"> </label>
                <label class="modal-title affiliate"></label>
            </div>*@
                                                        @*<div class="col-md-2">
            <input type="file" id="uploadfile" />
            <input type="file" id="uploadfileaffiliate" />*@
                                                        @*<small class="text-danger" id="uploadfile_Required" style="display:none">file is required</small>
            <a class='btn btn-link' onclick="GetDownloadFileLink2()">
                <img src="~/Content/img/pdf_logo.png" height="40px" width="40Px" />
                <input type="hidden" value="" id="DownloadFileLink2" />
            </a>*@
                                                        @*</div>*@
                                                    </div>
                                                    @*<div class="row">
        <div class="col-md-4">
            <label class="modal-title">View Supporting document:</label>
        </div>
        <div class="col-md-4">*@
                                                    @*<input type="file" id="uploadfile" />*@
                                                    @*<a class='btn btn-link' href='/Affiliation/DownloadAffiliationTradeDoc?TradeId=" + this.Trade_ITI_id + "'>Download File</a>*@
                                                    @*<a class='btn btn-link' onclick="GetDownloadFileLink()" id="DownloadFileLink">Download File</a>*@
                                                    @*<a class='btn btn-link' href='/Affiliation/DownloadAffiliationDoc?CollegeId=" + this.CollegeId + "'>Download File</a>*@
                                                    @*<a class='btn btn-link' onclick="GetDownloadFileLink2()">
                    <img src="~/Content/img/pdf_logo.png" height="40px" width="40Px" />
                    <input type="hidden" value="" id="DownloadFileLink2" />

                </a>
            </div>
        </div>*@
                                                    

                                                    <div class="row">
                                                        <h4 class="modal-title a1" style="color:#195c9f; text-align:center; font-weight:700"> Institute Trade Affiliation Document Details</h4>
                                                        <div class="col-md-12">
                                                            <br />
                                                            <table class="table table-bordered" id="tblClgTradeAffiliationDoc">
                                                                <thead>
                                                                    <tr>
                                                                        <th>Sl No.</th>
                                                                        <th>Trade Name</th>
                                                                        @*<th>Affiliate/De-Affiliate Order Number</th>
                        <th>Affiliate/De-Affiliate Order Date</th>*@
                                                                        <th>FileName</th>
                                                                        <th>Document</th>
                                                                        @*<th>Document For</th>*@

                                                                    </tr>
                                                                </thead>
                                                                <tbody></tbody>
                                                            </table>

                                                        </div>


                                                    </div>

                                                    <div class="row">
                                                        <h4 class="modal-title a1" style="color:#195c9f; text-align:center; font-weight:700"> Affiliate/Deaffiliate Document Details</h4>
                                                        <div class="col-md-12">
                                                            <br />
                                                            <table class="table table-bordered" id="tblAffiliationDoc">
                                                                <thead>
                                                                    <tr>
                                                                        <th>Sl No.</th>
                                                                        <th>Affiliate/De-Affiliate Order Number</th>
                                                                        <th>Affiliate/De-Affiliate Order Date</th>
                                                                        <th>FileName</th>
                                                                        <th>Document</th>
                                                                        @*<th>Document For</th>*@

                                                                    </tr>
                                                                </thead>
                                                                <tbody></tbody>
                                                            </table>

                                                        </div>


                                                    </div>

                                                    <div class="row">
                                                        <h4 class="modal-title a1" style="color:#195c9f; text-align:center; font-weight:700"> Trade's Details</h4>
                                                        <br />
                                                        <br />
                                                        <br />
                                                        <div class="col-md-12">
                                                            <table id="tblViewShift" class="table table-bordered">
                                                                <thead>
                                                                    <tr>
                                                                        <th>Sl.No</th>
                                                                        <th>Trade</th>
                                                                        @*<th>NO Of Units</th>*@
                                                                        @*<th>Is PPP</th>
                            <th>Mode of Training</th>*@
                                                                        <th>Status</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody></tbody>
                                                            </table>
                                                        </div>

                                                    </div>
                                                    <br />

                                                    <div class="card">
                                                        <div class="card-body border">
                                                            <div class="row"></div>
                                                            <div class="row"></div>
                                                            <div class="row">
                                                                <div class="col-lg-12">
                                                                    <div class="col-lg-4">
                                                                        <div class="col-lg-4">
                                                                            <label class="control-label">Status</label>
                                                                        </div>
                                                                        <div class="col-lg-8">
                                                                            <select id="dd-status" class="form-control clear"></select>
                                                                            <small class="text-danger" id="dd-status_Required" style="display:none">Status is required</small>

                                                                        </div>
                                                                    </div>
                                                                    @if (Session["CollegeId"] == null)
                                                                    {
                                                                        <div class="col-md-4">
                                                                            <div class="col-md-4">
                                                                                <label class="control-label"> Send To:</label>
                                                                            </div>
                                                                            <div class="col-md-8">
                                                                                <select id="dd-flow" class="form-control clear"></select>
                                                                                <small class="text-danger" id="dd-flow_Required" style="display:none">Send to is required</small>
                                                                            </div>
                                                                        </div>
                                                                    }

                                                                    <div class="col-md-4">
                                                                        <div class="col-md-4">
                                                                            <label class="control-label">Remarks</label>
                                                                        </div><div class="col-md-8">
                                                                            <textarea id="Remarks" class="form-control clear" style="margin: -10px;"></textarea>
                                                                            <small class="text-danger" id="Remarks_Required" style="display:none">Remarks is Required</small>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <div class="row">


                                                                <div class="col-md-5"></div>
                                                                <div class="col-md-2">
                                                                    <input type="button" id="btn-sends" class="btn btn-primary" value="Submit" onclick="SaveAffiliateInstituteOS();" />

                                                                    <input type="button" id="" class="btn btn-danger" value="Cancel" onclick="$('#tblGridUpdateAffiliation_wrapper').show();$('#Affiliation_view').hide();$('#Remarks_Required').hide();$('#uploadfile_Required').hide();$('#uploadfile').val('');$('#Remarks').val('');$('#DistrictWiseFilter').show('');$('#tblHistory tbody').empty();" />
                                                                </div>
                                                                <div class="col-md-5"></div>
                                                            </div>

                                                        </div>
                                                    </div>
                                                    <input type="hidden" id="Trade_ITI_Id" value="" />

                                                    <div class="row col-md-12 a" style="margin-top:10px">
                                                        @*<button class="btn btn-primary collaps-history a" data-toggle="collapse" data-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree" style="margin-top: 25px">Show Institute Affiliate/Deaffiliate History</button>*@

                                                        <br />
                                                        <br />
                                                        @*<div id="collapseThree" class="collapse" aria-labelledby="headingThree" data-parent="#accordionExample">*@
                                                        <div class="col-md-12" style="color:#195c9f; text-align:center">
                                                            <h4 class="modal-title head" style="margin:25px">Institute Affiliate/De-affiliate History:</h4>

                                                        </div>
                                                        <br /><br />
                                                        <br />

                                                        <table class="table table-bordered" id="tblHistory">
                                                            <thead>
                                                                <tr>
                                                                    <th>Slno</th>
                                                                    <th>Date</th>
                                                                    <th>From</th>
                                                                    <th>To</th>
                                                                    <th>Status</th>
                                                                    <th>Remarks</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody></tbody>
                                                        </table>
                                                        @*</div>*@
                                                        @*</div>*@
                                                        <!-- Modal PopUp -->
                                                        @* </div> *@
                                                    </div>
                                                </div>











                                                @*test*@
                                                <div class="form-group">
                                                    <div class="col-md-2 row">
                                                        <div class="col-md-6">

                                                        </div>
                                                        <div class="col-md-6">

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    }

                    <div>
                        <div class="row">
                            <div class="col-lg-12">
                            </div>
                        </div>

                        <input type="hidden" id="hdnSession" data-value="@Request.RequestContext.HttpContext.Session["UserId"]" />
                        @if (Convert.ToInt32(Session["RoleId"]) == (int)Models.Affiliation.CsystemType.getCommon.Assistant_Director || Convert.ToInt32(Session["RoleId"]) == (int)Models.Affiliation.CsystemType.getCommon.Deputy_Director) //for AD and DD

                        {

                            <div class="row">

                                <div class="form-group">
                                    <div class="col-md-12">
                                        @*<h2 class="modal-title head1"> CW De-Affiliate/Re-Affiliate Institute Details</h2>*@
                                        <br /><br />

                                        <div id="DistrictWiseFilter" class="form-group" style="padding:30px">
                                            <h3 class="modal-title a2" style="background-color:#195c9f; color:white; text-align:center">De-affiliate Institute Details </h3>
                                            <br />
                                            <div class="row a">
                                                <div class="col-lg-1">
                                                    <label class="control-label" for="txtAgencyRegnNo">Course Type</label>
                                                </div>
                                                <div class="col-lg-2">
                                                    <select class="form-control filter-change" id="CourseTypes">
                                                        <option value="choose">Select</option>
                                                    </select>
                                                </div>
                                                <div class="col-lg-1">
                                                    <label for="txtAgencyRegnNo">Division</label>
                                                </div>
                                                <div class="col-lg-2">
                                                    <select class="form-control filter-change" id="Divisions" onchange="GetDistrictList(this);">
                                                        <option value="choose">Select</option>
                                                    </select>
                                                </div>
                                                <div class="col-lg-1">
                                                    <label for="txtAgencyRegnNo">District</label>
                                                </div>
                                                <div class="col-lg-2">
                                                    <select class="form-control filter-change district" id="Districts">
                                                        <option value="choose">Select</option>
                                                    </select>
                                                </div>

                                            </div>
                                            <br />  <br />
                                            <div class="col-lg-12" align="right">
                                                <a class=" btn btn-primary sendBtn5">Search</a>
                                                <a class=" btn btn-primary search-affiliated" onclick="cancelUpdateITIInstitute();">Cancel</a>
                                            </div>
                                        </div>

                                        <div style="overflow-y:scroll" id="tblGridUpdateAffiliation_wrapper">
                                            <table class="table table-bordered table-hover" id="tblGridUpdateAffiliation1">
                                                <thead>
                                                    <tr>
                                                        <th>SL.No</th>
                                                        <th>Course Type</th>
                                                        <th>MIS ITI Code</th>
                                                        <th>Institute Name</th>

                                                        <th>Division</th>
                                                        <th>District</th>
                                                        <th>Status - Currently With</th>
                                                        <th>Current Institute Status</th>
                                                        <th>Rquested InstituteS tatus</th>
                                                        <th>Action</th>


                                                    </tr>
                                                </thead>
                                                @if (Model.ADDDinst_list != null)
                                                {
                                                    <tbody>
                                                        @for (var i = 0; i < Model.ADDDinst_list.Count(); i++)
                                                        {
                                                            var FileUploadPathChk = Convert.ToString(Model.ADDDinst_list[i].FileUploadPath);
                                                            var statusidChk = Convert.ToString(Model.ADDDinst_list[i].status_id);
                                                        <tr>
                                                            <td></td>
                                                            <td>
                                                                @Html.DisplayFor(a => a.ADDDinst_list[i].CourseType)
                                                            </td>
                                                            <td>
                                                                @Html.DisplayFor(a => a.ADDDinst_list[i].MisCode)
                                                            </td>
                                                            <td>
                                                                @Html.DisplayFor(a => a.ADDDinst_list[i].iti_college)

                                                                @Html.HiddenFor(a => a.ADDDinst_list[i].iti_college_id, new { @class = "iti_college_id" })
                                                            </td>

                                                            <td>
                                                                @Html.DisplayFor(a => a.ADDDinst_list[i].Division)
                                                            </td>
                                                            <td>
                                                                @Html.DisplayFor(a => a.ADDDinst_list[i].District)
                                                            </td>

                                                            <td>@Html.DisplayFor(a => a.ADDDinst_list[i].StatusName)</td>
                                                            <td>
                                                                @if (Model.ADDDinst_list[i].IsActive == true)
                                                                //if (Model.list1[i].ActiveDeActive == false)

                                                                {
                                                                    <input type="text" id="Active_@Model.ADDDinst_list[i].iti_college_id" value='Affiliate' class="form-control" readonly="readonly" />

                                                                    @*@Html.HiddenFor(a => a.list1[i].iti_college_id, new { @class = "collegeId" })*@
                                                                }
                                                                else
                                                                {
                                                                    <input type="text" id="Deactive_@Model.ADDDinst_list[i].iti_college_id" value='De-affiliate' class="form-control" readonly="readonly" />
                                                                    @*<input type="text" id="DeActive_@Model.list1[i].Trade_ITI_id" value='Deactive' class="btn btn-primary statusbtn" onclick="SaveActivedeactiveupdate(this);" />*@
                                                                    @* @Html.HiddenFor(a => a.list1[i].iti_college_id, new { @class = "collegeId" })*@
                                                                }
                                                            </td>
                                                            <td>
                                                                @if (Model.ADDDinst_list[i].IsActive1 == true)
                                                                //if (Model.list1[i].ActiveDeActive == false)

                                                                {
                                                                    <input type="text" id="Active_@Model.ADDDinst_list[i].iti_college_id" value='Affiliate' class="form-control" readonly="readonly" />

                                                                    @*@Html.HiddenFor(a => a.list1[i].iti_college_id, new { @class = "collegeId" })*@
                                                                }
                                                                else
                                                                {
                                                                    <input type="text" id="Deactive_@Model.ADDDinst_list[i].iti_college_id" value='De-affiliate' class="form-control" readonly="readonly" />
                                                                    @*<input type="text" id="DeActive_@Model.list1[i].Trade_ITI_id" value='Deactive' class="btn btn-primary statusbtn" onclick="SaveActivedeactiveupdate(this);" />*@
                                                                    @* @Html.HiddenFor(a => a.list1[i].iti_college_id, new { @class = "collegeId" })*@
                                                                }
                                                            </td>
                                                            <td>
                                                                <input type="button" class="btn btn-primary" img src="@Url.Content("~/Content/img/pencil2.png")" id="Active_@Model.ADDDinst_list[i].iti_college_id" value='View' onclick="ViewInstitutionDeatailsOS(@Model.ADDDinst_list[i].iti_college_id)" />

                                                            </td>

                                                        </tr>
                                                        }
                                                    </tbody>
                                                }

                                            </table>
                                        </div>
                                    </div>

                                    @*test*@

                                    <div id="Affiliation_view" style="display:none">
                                        <div class="form-group" style="border:1px solid black;padding:20px">
                                            <div class="row" style="padding:30px">
                                                <div class="card a5">
                                                    <div class="card-body">

                                                        <div class="panel panel-default">
                                                            <div class="panel-heading">
                                                                <span>Institute Details</span>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-md-2">
                                                                <label class="control-label">Name of ITI</label>
                                                                <input type="hidden" id="CollegeId" value="0" />
                                                                <input type="hidden" id="IsActiveNew" value="" />

                                                            </div>
                                                            <div class="col-md-2">
                                                                <span class="text-inams clear"></span>
                                                            </div>

                                                            <div class="col-md-2">
                                                                <label class="control-label">Type of ITI</label>
                                                            </div>
                                                            <div class="col-md-2">
                                                                <span class="text-type clear"></span>
                                                            </div>
                                                            <div class="col-md-2">
                                                                <label class="control-label">Course Type</label>
                                                            </div>
                                                            <div class="col-md-2">
                                                                <span class="text-course_name clear"></span>
                                                            </div>
                                                        </div>

                                                        <div class="row">
                                                            <div class="col-md-2">
                                                                <label class="control-label">MIS ITI Code</label>
                                                            </div>
                                                            <div class="col-md-2">
                                                                <span class="text-mis clear"></span>
                                                            </div>
                                                            <div class="col-md-2">
                                                                <label class="control-label">Email Id</label>
                                                            </div>
                                                            <div class="col-md-2">
                                                                <span class="text-email clear"></span>
                                                            </div>
                                                            <div class="col-md-2">
                                                                <label class="control-label">Principal Phone Number</label>
                                                            </div>
                                                            <div class="col-md-2">
                                                                <span class="text-number clear"></span>
                                                            </div>

                                                        </div>

                                                        <div class="row">
                                                            <div class="col-md-2">
                                                                <label class="control-label">Date of Establishment</label>
                                                            </div>
                                                            <div class="col-md-2">
                                                                <span class="text-AffiliationDate clear"></span>
                                                            </div>
                                                            <div class="col-md-2">
                                                                <label class="control-label">Website</label>
                                                            </div>
                                                            <div class="col-md-2">
                                                                <span class="text-Website clear"></span>
                                                            </div>

                                                        </div>
                                                        <div class="panel panel-default">
                                                            <div class="panel-heading">
                                                                <span>Address Details</span>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-md-2">
                                                                <label class="control-label">Address</label>
                                                            </div>
                                                            <div class="col-md-2">
                                                                <span class="text-address clear"></span>
                                                            </div>
                                                            <div class="col-md-2">
                                                                <label class="control-label">Location Type</label>
                                                            </div>
                                                            <div class="col-md-2">
                                                                <span class="text-location clear"></span>
                                                            </div>
                                                            <div class="col-md-2">
                                                                <label class="control-label">State</label>
                                                            </div>
                                                            <div class="col-md-2">
                                                                <span class="clear">Karnataka</span>
                                                            </div>
                                                        </div>

                                                        <div class="row">
                                                            <div class="col-md-2">
                                                                <label class="control-label">Division</label>
                                                            </div>
                                                            <div class="col-md-2">
                                                                <span class="text-division clear"></span>
                                                            </div>
                                                            <div class="col-md-2">
                                                                <label class="control-label">District</label>
                                                            </div>
                                                            <div class="col-md-2">
                                                                <span class="text-district clear"></span>
                                                            </div>

                                                            <div class="col-md-2">
                                                                <label class="control-label">Taluka</label>
                                                            </div>
                                                            <div class="col-md-2">
                                                                <span class="text-taluk clear"></span>
                                                            </div>

                                                        </div>

                                                        <div class="row">
                                                            <div class="col-md-2">
                                                                <label class="control-label">constituency</label>
                                                            </div>
                                                            <div class="col-md-2">
                                                                <span class="text-constituency clear"></span>
                                                            </div>
                                                            <div class="col-md-2">
                                                                <label class="control-label">Build up Area</label>
                                                            </div>
                                                            <div class="col-md-2">
                                                                <span class="text-build clear"></span>
                                                            </div>
                                                            <div class="col-md-2">
                                                                <label class="control-label">Geo Location Latitude:,Longitude</label>
                                                            </div>
                                                            <div class="col-md-2">
                                                                <span class="text-geo clear"></span>
                                                            </div>

                                                        </div>
                                                        <div class="panel panel-default">
                                                            <div class="panel-heading">
                                                                <span>Affiliation Details</span>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-md-2">
                                                                <label class="control-label">Affiliation Order No.</label>
                                                            </div>
                                                            <div class="col-md-2">
                                                                <span class="text-AfflOrderNo clear"></span>
                                                            </div>
                                                            <div class="col-md-2">
                                                                <label class="control-label">Affiliation Order date</label>
                                                            </div>
                                                            <div class="col-md-2">
                                                                <span class="text-AfflOrderNoDate clear"></span>
                                                            </div>
                                                            <div class="col-md-2">
                                                                <label class="control-label">Scheme</label>
                                                            </div>
                                                            <div class="col-md-2">
                                                                <span class="text-scheme_name clear"></span>
                                                            </div>
                                                        </div>
                                                        @*<div class="row">
        <div class="col-md-2">
            <label class="modal-title deaffiliate"> </label>
            <label class="modal-title affiliate"></label>
        </div>
        <div class="col-md-2">
            <input type="file" id="uploadfile" />
            <input type="file" id="uploadfileaffiliate" />*@
                                                        @*<small class="text-danger" id="uploadfile_Required" style="display:none">file is required</small>
        <a class='btn btn-link' onclick="GetDownloadFileLink2()">
            <img src="~/Content/img/pdf_logo.png" height="40px" width="40Px" />
            <input type="hidden" value="" id="DownloadFileLink2" />
        </a>*@
                                                        @*</div>
        </div>*@
                                                        @*<div class="row">
        <div class="col-md-4">
            <label class="modal-title">View Supporting document:</label>
        </div>
        <div class="col-md-4">*@
                                                        @*<input type="file" id="uploadfile" />*@
                                                        @*<a class='btn btn-link' href='/Affiliation/DownloadAffiliationTradeDoc?TradeId=" + this.Trade_ITI_id + "'>Download File</a>*@
                                                        @*<a class='btn btn-link' href='/Affiliation/DownloadAffiliationDoc?CollegeId=" + this.CollegeId + "'>Download File</a>*@
                                                        @*<a class='btn btn-link' onclick="GetDownloadFileLink2()"> <img src="~/Content/img/pdf_logo.png" height="40px" width="40Px" /></a>
                <input type="hidden" value="" id="DownloadFileLink2" />
            </div>
        </div>*@
                                                        

                                                        <div class="row">
                                                            <h4 class="modal-title a1" style="color:#195c9f; text-align:center; font-weight:700"> Institute Trade Affiliation Document Details</h4>
                                                            <div class="col-md-12">
                                                                <br />
                                                                <table class="table table-bordered" id="tblClgTradeAffiliationDoc">
                                                                    <thead>
                                                                        <tr>
                                                                            <th>Sl No.</th>
                                                                            <th>Trade Name</th>
                                                                            @*<th>Affiliate/De-Affiliate Order Number</th>
                        <th>Affiliate/De-Affiliate Order Date</th>*@
                                                                            <th>FileName</th>
                                                                            <th>Document</th>
                                                                            @*<th>Document For</th>*@

                                                                        </tr>
                                                                    </thead>
                                                                    <tbody></tbody>
                                                                </table>

                                                            </div>


                                                        </div>

                                                        <div class="row">
                                                            <h4 class="modal-title a1" style="color:#195c9f; text-align:center; font-weight:700"> Affiliate/Deaffiliate Document Details</h4>
                                                            <div class="col-md-12">
                                                                <br />
                                                                <table class="table table-bordered" id="tblAffiliationDoc">
                                                                    <thead>
                                                                        <tr>
                                                                            <th>Sl No.</th>
                                                                            <th>Affiliate/De-Affiliate Order Number</th>
                                                                            <th>Affiliate/De-Affiliate Order Date</th>
                                                                            <th>FileName</th>
                                                                            <th>Document</th>
                                                                            @*<th>Document For</th>*@

                                                                        </tr>
                                                                    </thead>
                                                                    <tbody></tbody>
                                                                </table>

                                                            </div>


                                                        </div>

                                                        <div class="row">
                                                            <h4 class="modal-title a1" style="color:#195c9f; text-align:center; font-weight:700"> Trade's Details</h4>
                                                            <br />
                                                            <br />
                                                            <br />
                                                            <div class="col-md-12">
                                                                <table id="tblViewShift" class="table table-bordered">
                                                                    <thead>
                                                                        <tr>
                                                                            <th>Sl.No</th>
                                                                            <th>Trade</th>
                                                                            @*<th>NO Of Units</th>*@
                                                                            @*<th>Is PPP</th>
                            <th>Mode of Training</th>*@
                                                                            <th>Status</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody></tbody>
                                                                </table>
                                                            </div>

                                                        </div>
                                                        <br />
                                                        <div class="row">
                                                            <div class="col-lg-3">




                                                            </div>
                                                            <div class="card">
                                                                <div class="card-body border">
                                                                    <div class="row"></div>
                                                                    <div class="row"></div>
                                                                    <div class="row">
                                                                        <div class="col-lg-12">
                                                                            <div class="col-lg-4">
                                                                                <div class="col-lg-4">
                                                                                    <label class="control-label">Status</label>
                                                                                </div>
                                                                                <div class="col-lg-8">
                                                                                    <select id="dd-status" class="form-control clear"></select>


                                                                                </div>
                                                                            </div>
                                                                            @if (Session["CollegeId"] == null)
                                                                            {

                                                                                <div class="col-lg-4">
                                                                                    <div class="col-md-4">
                                                                                        <label class="control-label"> Send To:</label>
                                                                                    </div>
                                                                                    <div class="col-md-8">
                                                                                        <select id="dd-flow" class="form-control clear"></select>

                                                                                    </div>
                                                                                </div>

                                                                            }
                                                                            <div class="col-md-4">
                                                                                <div class="col-md-4">
                                                                                    <label class="control-label">Remarks</label>
                                                                                </div>
                                                                                <div class="col-md-8">
                                                                                    <textarea id="Remarks" class="form-control clear" style="margin:-10px"></textarea>

                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="row"></div>
                                                                    <div class="row"></div>
                                                                    <div class="row">
                                                                        <div class="col-md-5"></div>
                                                                        <div class="col-md-4">
                                                                            <input type="button" id="btn-sends" class="btn btn-primary" value="Submit" onclick="SaveAffiliateInstituteADDD();" />

                                                                            <input type="button" id="" class="btn btn-danger" value="Cancel" onclick="$('#tblGridUpdateAffiliation_wrapper').show();$('#Affiliation_view').hide();$('#Remarks_Required').hide();$('#uploadfile_Required').hide();$('#uploadfile').val('');$('#Remarks').val('');$('#DistrictWiseFilter').show('');$('#tblHistory tbody').empty();" />
                                                                        </div>
                                                                        <div class="col-md-4"></div>
                                                                    </div>

                                                                </div>

                                                            </div>
                                                        </div>











                                                        <input type="hidden" id="Trade_ITI_Id" value="" />
                                                        <br />
                                                        <div class="row">
                                                            <div class="col-lg-12">
                                                                <h4 class="modal-title head1">Institute Affiliate/De-affiliate History: </h4>
                                                                <br />
                                                                <table class="table table-bordered" id="tblHistory">
                                                                    <thead>
                                                                        <tr>
                                                                            <th>Slno</th>
                                                                            <th>Date</th>
                                                                            <th>From</th>
                                                                            <th>To</th>
                                                                            <th>Status</th>
                                                                            <th>Remarks</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody></tbody>
                                                                </table>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    @*test*@

                                                    <div class="form-group">
                                                        <div class="col-md-2 row">
                                                            <div class="col-md-6">

                                                            </div>
                                                            <div class="col-md-6">

                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }
                    </div>
                </div>




                <div class="tab-pane fade" id="tab_3">
                    <div class="row">
                        <div class="col-lg-12">
                        </div>
                    </div>

                    <input type="hidden" id="hdnSession" data-value="@Request.RequestContext.HttpContext.Session["UserId"]" />
                    @if (Convert.ToInt32(Session["RoleId"]) == (int)Models.Affiliation.CsystemType.getCommon.Assistant_Director || Convert.ToInt32(Session["RoleId"]) == (int)Models.Affiliation.CsystemType.getCommon.Deputy_Director || Convert.ToInt32(Session["RoleId"]) == (int)Models.Affiliation.CsystemType.getCommon.OFFICE_SUPERINTENDENT || Convert.ToInt32(Session["RoleId"]) == (int)Models.Affiliation.CsystemType.getCommon.CaseWorker || Convert.ToInt32(Session["RoleId"]) == (int)Models.Affiliation.CsystemType.getCommon.Commissioner || Convert.ToInt32(Session["RoleId"]) == (int)Models.Affiliation.CsystemType.getCommon.Joint_Director || Convert.ToInt32(Session["RoleId"]) == (int)Models.Affiliation.CsystemType.getCommon.Additional_Director) //for AD and DD

                    {
                <div class="row" style="text-align:right;padding-left:75px">
                    @if (Convert.ToInt32(Session["RoleId"]) == (int)Models.Affiliation.CsystemType.getCommon.Deputy_Director) //for AD and DD

                    {
                        <input type="button" class="btn btn-primary" value='Publish' id="publishbutton" style="text-align:center" onclick="PublishAffiliateDeaffiliateInstitute();" hidden="@Model.Approvedinst_list" />
                        <input type="button" class="btn btn-success" value='Export To Excel' style="text-align:center" onclick="ExcelExportTentative();" />
                    }

                </div>
                        <div class="row">

                            <div class="form-group">
                                <div class="row">

                                    <h2 class="head1"> View De-Affiliate Institute Details</h2>


                                    <br /><br />
                                    <div style="overflow-y:scroll" id="tblGridUpdateAffiliation_wrapper">
                                        <table class="table table-bordered table-hover" id="tblGridUpdateAffiliation2">
                                            <thead>
                                                <tr>
                                                    <th>SL.No</th>
                                                    <th>Date</th>
                                                    <th>Course Type</th>
                                                    <th>MIS ITI Code</th>
                                                    <th>Institute Name</th>
                                                    <th>Address</th>
                                                    <th>Division</th>
                                                    <th>Disrtict</th>
                                                    <th>Current Institute Status</th>
                                                    @if (Convert.ToInt32(Session["RoleId"]) == (int)Models.Affiliation.CsystemType.getCommon.Deputy_Director) //for AD and DD
                                                    {
                                                        <th>Action</th>
                                                    }

                                                    </tr>
                                            </thead>
                                            @if (Model.Approvedinst_list != null)
                                            {
                                                <tbody>
                                                    @for (var i = 0; i < Model.Approvedinst_list.Count(); i++)
                                                    {
                                                        var FileUploadPathChk = Convert.ToString(Model.Approvedinst_list[i].FileUploadPath);
                                                        var statusidChk = Convert.ToString(Model.Approvedinst_list[i].status_id);
                                                    <tr>
                                                        <td style="width:25px"></td>
                                                        <td>@Html.DisplayFor(a => a.Approvedinst_list[i].date)</td>
                                                        <td>@Html.DisplayFor(a => a.Approvedinst_list[i].CourseType)</td>
                                                        <td>
                                                            @Html.DisplayFor(a => a.Approvedinst_list[i].MisCode)
                                                        </td>
                                                        <td>
                                                            @Html.DisplayFor(a => a.Approvedinst_list[i].iti_college)

                                                            @Html.HiddenFor(a => a.Approvedinst_list[i].iti_college_id, new { @class = "iti_college_id" })
                                                            @Html.HiddenFor(a => a.Approvedinst_list[i].Trade_ITI_id, new { @class = "trade_iti_id" })
                                                            @Html.HiddenFor(a => a.Approvedinst_list[i].StatusName, new { @class = "StatusName" })
                                                        </td>
                                                        <td>
                                                            @Html.DisplayFor(a => a.Approvedinst_list[i].Clg_Adderss)
                                                        </td>
                                                        <td>
                                                            @Html.DisplayFor(a => a.Approvedinst_list[i].Division)
                                                        </td>
                                                        <td>
                                                            @Html.DisplayFor(a => a.Approvedinst_list[i].District)
                                                        </td>
                                                        @*<td>@Html.DisplayFor(a => a.Approvedinst_list[i].StatusName)</td>*@
                                                        <td>
                                                            @if (Model.Approvedinst_list[i].IsActive == true)
                                                            {
                                                                <input type="text" id="Active_@Model.Approvedinst_list[i].iti_college_id" value='Affiliated' class="form-control" readonly="readonly" />
                                                            }
                                                            else
                                                            {
                                                                <input type="text" id="Deactive_@Model.Approvedinst_list[i].iti_college_id" value='De-Affiliated' class="form-control" readonly="readonly" />
                                                            }
                                                        </td>
                                                        @if (Convert.ToInt32(Session["RoleId"]) == (int)Models.Affiliation.CsystemType.getCommon.Deputy_Director) //for AD and DD

                                                        {
                                                            <td>

                                                                <input type="button" class="btn btn-primary" img src="@Url.Content("~/Content/img/pencil2.png")" id="Active_@Model.Approvedinst_list[i].iti_college_id" value="View" onclick="ViewInstitutionDeatailsVW(@Model.Approvedinst_list[i].iti_college_id)" />
                                                               
                                                            </td>
                                                        }
                                                        </tr>
                                                    }
                                                </tbody>
                                            }

                                        </table>
                                    </div>
                                </div>

                                @*test*@



                                @*test*@

                                <div class="form-group">
                                    <div class="col-md-2 row">
                                        <div class="col-md-6">

                                        </div>
                                        <div class="col-md-6">

                                        </div>
                                    </div>
                                </div>
                                <div id="Affiliation_view1" style="display:none">
                                    <div class="form-group" style="border:1px solid black;padding:20px">
                                        <div class="row">
                                            <div class="card">
                                                <div class="card-body c">

                                                    <div class="panel panel-default">
                                                        <div class="panel-heading">
                                                            <span>Institute Details</span>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-2">
                                                            <label class="control-label">Name of ITI</label>

                                                            <input type="hidden" id="CollegeId" value="0" />
                                                            <input type="hidden" id="IsActive" value="0" />
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-nams clear"></span>
                                                        </div>

                                                        <div class="col-md-2">
                                                            <label class="control-label">Type of ITI</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-type clear"></span>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <label class="control-label">Course Type</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-course_name clear"></span>
                                                        </div>
                                                    </div>

                                                    <div class="row">
                                                        <div class="col-md-2">
                                                            <label class="control-label">MIS ITI Code</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-mis clear"></span>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <label class="control-label">Email Id</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-email clear"></span>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <label class="control-label">Principal Phone Number</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-number clear"></span>
                                                        </div>

                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-2">
                                                            <label class="control-label">Date of Establishment</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-AffiliationDate clear"></span>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <label class="control-label">Website</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-Website clear"></span>
                                                        </div>

                                                    </div>

                                                    <div class="panel panel-default">
                                                        <div class="panel-heading">
                                                            <span>Address Details</span>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-2">
                                                            <label class="control-label">Address</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-address clear"></span>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <label class="control-label">Location Type</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-location clear"></span>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <label class="control-label">State</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="clear">Karnataka</span>
                                                        </div>
                                                    </div>

                                                    <div class="row">
                                                        <div class="col-md-2">
                                                            <label class="control-label">Division</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-division clear"></span>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <label class="control-label">District</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-district clear"></span>
                                                        </div>

                                                        <div class="col-md-2">
                                                            <label class="control-label">Taluka</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-taluk clear"></span>
                                                        </div>

                                                    </div>

                                                    <div class="row">
                                                        <div class="col-md-2">
                                                            <label class="control-label">constituency</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-constituency clear"></span>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <label class="control-label">Build up Area</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-build clear"></span>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <label class="control-label">Geo Location Latitude:,Longitude</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-geo clear"></span>
                                                        </div>

                                                    </div>
                                                    <div class="panel panel-default">
                                                        <div class="panel-heading">
                                                            <span>Affiliation Details</span>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-2">
                                                            <label class="control-label">Affiliation Order No.</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-AfflOrderNo clear"></span>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <label class="control-label">Affiliation Order date</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-AfflOrderNoDate clear"></span>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <label class="control-label">Scheme</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="text-scheme_name clear"></span>
                                                        </div>
                                                    </div>
                                                    
                                                </div>

                                                <div class="row">
                                                    <h4 class="modal-title a1" style="color:#195c9f; text-align:center; font-weight:700"> Institute Trade Affiliation Document Details</h4>
                                                    <div class="col-md-12">
                                                        <br />
                                                        <table class="table table-bordered" id="tblClgTradeAffiliationDoc">
                                                            <thead>
                                                                <tr>
                                                                    <th>Sl No.</th>
                                                                    <th>Trade Name</th>
                                                                    @*<th>Affiliate/De-Affiliate Order Number</th>
                            <th>Affiliate/De-Affiliate Order Date</th>*@
                                                                    <th>FileName</th>
                                                                    <th>Document</th>
                                                                    @*<th>Document For</th>*@

                                                                </tr>
                                                            </thead>
                                                            <tbody></tbody>
                                                        </table>

                                                    </div>


                                                </div>

                                                <div class="row">
                                                    <h4 class="modal-title a1" style="color:#195c9f; text-align:center; font-weight:700"> Affiliate/Deaffiliate Document Details</h4>
                                                    <div class="col-md-12">
                                                        <br />
                                                        <table class="table table-bordered" id="tblAffiliationDoc">
                                                            <thead>
                                                                <tr>
                                                                    <th>Sl No.</th>
                                                                    <th>Affiliate/De-Affiliate Order Number</th>
                                                                    <th>Affiliate/De-Affiliate Order Date</th>
                                                                    <th>FileName</th>
                                                                    <th>Document</th>
                                                                    @*<th>Document For</th>*@

                                                                </tr>
                                                            </thead>
                                                            <tbody></tbody>
                                                        </table>

                                                    </div>


                                                </div>

                                                <div class="row">
                                                    <h4 class="modal-title a1" style="color:#195c9f; text-align:center; font-weight:700"> Trade's Details</h4>
                                                    <br />
                                                    <br />
                                                    <br>
                                                    <div class="col-md-12">
                                                        <table id="tblViewShift" class="table table-bordered">
                                                            <thead>
                                                                <tr>
                                                                    <th>Sl.No</th>
                                                                    <th>Trade</th>
                                                                    @*<th>NO Of Units</th>*@
                                                                    @*<th>Is PPP</th>
                            <th>Mode of Training</th>*@
                                                                    <th>Status</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody></tbody>
                                                        </table>
                                                    </div>

                                                </div>
                                                <div class="row"></div>
                                                <div class="row"></div>
                                                <div class="card">
                                                    <div class="card-body border">
                                                        <div class="row"></div>
                                                        <div class="row"></div>
                                                        <div class="row">
                                                            <div class="col-md-5"></div>
                                                            <div class="col-md-2">

                                                                @*<input type="button" id="btn-send" class="btn btn-primary" value="Submit" onclick="SaveAffiliateInstitute();" />*@

                                                                <input type="button" id="" class="btn btn-danger" value="Cancel" onclick="$('#tblGridUpdateAffiliation_wrapper').show(); $('#tblGridUpdateTrade').show(); $('#tblGridUpdateTrade1').show(); $('#tblGridUpdateAffiliation1').show(); $('#tblGridUpdateAffiliation2').show(); $('#tblGridUpdateAffiliation2_paginate').show(); $('#Affiliation_view1').hide(); $('#Remarks_Required').hide(); $('#uploadfile_Required').hide(); $('#uploadfile').val(''); $('#Remarks').val(''); $('#dd-flow').val(''); $('#dd-status').val(''); $('#tblHistory tbody').empty(); $('#DistrictWiseFilter').show();$('#publishbutton').show()" />
                                                            </div>

                                                            <div class="col-md-5"></div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <input type="hidden" id="Trade_ITI_Id" value="" />
                                                <br />
                                                <br />

                                                <div class="row col-md-12 a" style="margin-top:10px">

                                                    @*<button class="btn btn-primary collaps-history a" data-toggle="collapse" data-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree" style="margin-top: 25px">Show Institute Affiliate/Deaffiliate History</button>*@
                                                    <div class="col-md-12" style="color:#195c9f; text-align:center">
                                                        <h3 class="modal-title head1">Institute Affiliate/De-affiliate History:</h3>

                                                    </div>
                                                    <br />
                                                    <br />

                                                    <table class="table table-bordered" id="tblHistory">
                                                        <thead>
                                                            <tr>
                                                                <th>Slno</th>
                                                                <th>Date</th>
                                                                <th>From</th>
                                                                <th>To</th>
                                                                <th>Status</th>
                                                                <th>Remarks</th>

                                                            </tr>
                                                        </thead>
                                                        <tbody></tbody>
                                                    </table>
                                                    @*</div>*@
                                                    @*</div>*@
                                                    <!-- Modal PopUp -->
                                                </div>
                                            </div>



                                        </div>
                                    </div>
                                </div>
                            </div>
                            @*</div>*@

                        </div>
                    }

                    @*</div>*@
                    @*</div>*@



                    <div class="modal fade" id="myModal" role="dialog">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <label id="id1" style="display:none"></label>
                                <label id="id2" style="display:none"></label>

                                <div class="row">
                                    <div class="col-lg-offset-1 col-lg-5">
                                        <h5>save the changes</h5>
                                        <br />
                                        <br />
                                    </div>

                                    <div class="col-lg-5">
                                        <a class=" btn btn-primary" id="submitbtn" data-dismiss="modal" onclick="UpdateRemarksDetailsForSeat()">Submit</a>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    @*</div>*@
                    @*</div>*@
                </div>
            </div>
        </div>
    </div>
 
    <script>

        function ViewInstitutionDeatails(collegeId) {
            
            $("#DistrictWiseFilter").hide();
            $.ajax({

                type: 'Get',
                url: '/Affiliation/GetCollegeDetailsInstitute',
                data: { collegeId: collegeId },
                success: function (data) {
                    
                    if (data != null) {

                        $("#CollegeId").val(collegeId);
                        $("#Affiliation_div").hide();
                        $("#Affiliation_view").show();
                        $("#tblGridUpdateAffiliation_wrapper").hide();
                        $(".text-location").text(data.location_type);
                        $(".text-name").text(data.name_of_iti);
                        $(".text-type").text(data.type_of_iti);
                        $(".text-course_code").text(data.course_code);
                        $(".text-mis").text(data.mis_code);
                        $(".text-email").text(data.email);
                        $(".text-number").text(data.phone_number);
                        $(".text-Website").text(data.Website);
                        $(".text-AffiliationDate").text(data.date);
                        $(".text-address").text(data.address);
                        $(".text-location").text(data.location_type);
                        $(".text-division").text(data.division);
                        $(".text-district").text(data.district);
                        $(".text-taluk").text(data.taluka);
                        $(".text-constituency").text(data.constituency);
                        $(".text-build").text(data.build_up_area);
                        $(".text-geo").text(data.geo_location);

                        $(".text-css").text(data.css_code);
                        $(".text-trade").text(data.list_trades);
                        $(".text-tradeName").text(data.trade);
                        $(".text-Panchayat").text(data.panchayat);
                        $(".text-village").text(data.village);
                        $(".text-AfflOrderNo").text(data.AffiliationOrderNo);
                        $(".text-AfflOrderNoDate").text(data.order_no_date);
                        $(".text-course_name").text(data.course_name);
                        $(".text-scheme_name").text(data.scheme_name);
                        $(".text-division").text(data.division);
                        $("#DownloadFileLink2").val(data.FileUploadPath);
                        $(".deaffiliate").text("Upload De-affiliate Document");
                        $(".affiliate").text("Upload affiliate Document");
                        
                        $(".DeaffiliateDoc").text("De-affiliate Supporting Document");
                        $(".AffiliateDoc").text("Affiliate Supporting Document");
                        $(".Affiliationdoc").text("Affiliation Supporting Document");

                        //if (data.AffiliationDoc != null) {
                        //    if (data.AffiliationDoc.Flag == 5) {
                        //        $("#deaffiliateOrderNo").val(data.AffiliationDoc.AffiliationOrder_Number);
                        //        $("#newdeaffiliatedate").val(data.AffiliationDoc.Affiliation_date);
                        //    }
                        //    else
                        //        if (data.AffiliationDoc.Flag == 6) {
                        //            $("#affiliateOrderNo").val(data.AffiliationDoc.AffiliationOrder_Number);
                        //            $("#newaffiliatedate").val(data.AffiliationDoc.Affiliation_date);
                        //        }
                        //}

                        $(".deaffiliateOrderlabel").text("De-affiliate Order No.");
                        $(".deaffiliatedatelabel").text("De-affiliate Date");
                        $(".affiliateOrderlabel").text("Affiliation Order No.");
                        $(".affiliatedatelabel").text("Affiliation Date");
                        //$(".text-pincode").text(data.geo_location);
                        $("#Downloadffiliation").empty();
                        var html = "<a class='btn btn-link' href='/Affiliation/DownloadAffiliationDoc?CollegeId=" + collegeId + "' ><img src='/Content/img/pdf_logo.png' height='40px' width='40px' /></a>"
                        $("#Downloadffiliation").append(html);
                        
                        $("#AffiliationFileName").text(data.Filename);
                        $(".text-date").text(data.date);
                        $(".text-unit").text(data.no_units);
                        $(".text-shift").text(data.no_shifts);
                        $("#DownloadFileLink2").val(data.FileUploadPath);

                        if (data.FileUploadPath == null) {
                            $("#Downloaddeaffiliate").hide();
                            $(".DeaffiliateDoc").hide();
                        }
                        else {
                            $("#Downloaddeaffiliate").show();
                            $(".DeaffiliateDoc").show();
                        }
                        $("#DownloadFileLink").val(data.AffiliateFilePath);
                        if (data.AffiliateFilePath == null) {
                            $("#Downloadffiliate").hide();
                            $(".AffiliateDoc").hide();
                        }
                        else {
                            $("#Downloadffiliate").show();
                            $(".AffiliateDoc").show();
                        }

                        $(".text-ActiveDeactive").val(data.ActiveDeactive);
                        if (data.ActiveDeactive == true) {
                            $(".text-ActiveDeactive").text("Active");
                        }
                        else {
                            $(".text-ActiveDeactive").text("Deactive");
                        }

                        
                        $("#IsActive").val(data.IsActive);

                        if (data.IsActive) {
                            $(".deaffiliate").show()
                            $("#uploadfile").show()
                            $(".deaffiliateOrderlabel").show()
                            $("#deaffiliateOrderNo").show()
                            $(".deaffiliatedatelabel").show()
                            $("#newdeaffiliatedate").show()
                            $(".affiliate").hide()
                            $("#uploadfileaffiliate").hide()
                            $(".affiliateOrderlabel").hide()
                            $("#affiliateOrderNo").hide()
                            $(".affiliatedatelabel").hide()
                            $("#newaffiliatedate").hide()

                        }

                        else {
                            $(".affiliate").show()
                            $("#uploadfileaffiliate").show()
                            $(".affiliateOrderlabel").show()
                            $("#affiliateOrderNo").show()
                            $(".affiliatedatelabel").show()
                            $("#newaffiliatedate").show()
                            $(".deaffiliate").hide()
                            $("#uploadfile").hide()
                            $(".deaffiliateOrderlabel").hide()
                            $("#deaffiliateOrderNo").hide()
                            $(".deaffiliatedatelabel").hide()
                            $("#newdeaffiliatedate").hide()

                        }
                        if (data.status == 'Send Back For Correction/Clarification') {
                            $("#Active").show().attr("disabled", false)
                            $("#DeActive").show().attr("disabled", false)
                            $("#DeActive").show()
                            $("#Active").show()
                        }
                        else if (data.IsActive) {

                            $("#Active").show().attr("disabled", true)
                            $("#DeActive").show().attr("disabled", false)
                            $("#DeActive").show()
                        }
                        else {
                            $("#Active").show()
                            $("#DeActive").show().attr("disabled", true)
                            $("#Active").show().attr("disabled", false)
                        }

                        var _table = $("#tblViewShift tbody");
                        _table.empty();
                        var IsActiveTrueVal = 0;
                        $.each(data.trades_list, function (i) {
                            
                            var _tr = $("<tr/>");
                            _tr.append("<td>" + (i + 1) + "</td>");
                            _tr.append("<td>" + this.trade_name + "</td");
                            // _tr.append("<td>" + this.units + "</td>");
                            //_tr.append("<td>" + this.IsPPP + "</td>");
                            //_tr.append("<td>" + this.Dual_System + "</td>");
                            if (this.ISActive) {
                                IsActiveTrueVal = 1;
                                _tr.append("<td>Active <input type='hidden' class='active_status' value='true' /><input type='hidden' class='shiftId' value='" + this.ITI_Trade_Shift_Id + "' /></td>");

                            }
                            else {
                                //if (this.Status == 5) {
                                //    _tr.append("<td>Pending for Approval <input type='hidden' class='active_status' value='false' /><input type='hidden' class='shiftId' value='" + this.ITI_Trade_Shift_Id + "' /></td>");
                                //}
                                //else {
                                _tr.append("<td>DeActive <input type='hidden' class='active_status' value='false' /><input type='hidden' class='shiftId' value='" + this.ITI_Trade_Shift_Id + "' /></td>");
                                // }

                            }
                            _table.append(_tr);
                        });

                        if (IsActiveTrueVal == 1) {
                            $("#btn-sd").attr("disabled", true);
                        }

                        else if (data.flow_id == null || data.flow_id == 8 || data.status == "Approved" || data.status == "Published") {
                            $("#btn-sd").attr("disabled", false);
                        }
                        else {
                            $("#btn-sd").attr("disabled", true);
                        }
                        //if (data.flow_id == null || data.flow_id == 8) {
                        //    $("#btn-sd").attr("disabled", false);
                        //}
                        //else {
                        //    $("#btn-sd").attr("disabled", true);
                        //}

                        //$("#ViewFile").empty();
                        //if (data.FileUploadPath != null && data.FileUploadPath != "") {
                        //    var html = "<a class='btn btn-link' href='/Affiliation/DownloadAffiliationDoc?CollegeId=" + collegeId + "' >Download File</a>"
                        //    $("#ViewFile").append(html);
                        //}
                        
                        if (data.activeDeactiveTradeHistories.length > 0) {
                            $.each(data.activeDeactiveTradeHistories, function (i) {
                                var _tr = $("<tr/>");

                                _tr.append("<td>" + (i + 1) + "</td>");
                                _tr.append("<td>" + data.activeDeactiveTradeHistories[i].date + "</td");
                                _tr.append("<td>" + data.activeDeactiveTradeHistories[i].User + "</td>");
                                _tr.append("<td>" + data.activeDeactiveTradeHistories[i].Flow_user + "</td>");
                                _tr.append("<td>" + data.activeDeactiveTradeHistories[i].Status + "</td>");
                                _tr.append("<td>" + data.activeDeactiveTradeHistories[i].ActDeActRemarks + "</td>");


                                $("#tblHistory tbody").append(_tr);
                            });
                        }
                        else {
                            var _tr = $("<tr/>");
                            _tr.append("<td>" + "" + "</td>");
                            _tr.append("<td>" + "" + "</td>");
                            _tr.append("<td>" + "No Data Available" + "</td>");
                            _tr.append("<td>" + "" + "</td>");
                            _tr.append("<td>" + "" + "</td>");

                            $("#tblHistory tbody").append(_tr);
                        }
                        //$("#tblHistory tbody").load();

                        if (data.AffiliationDocs.length > 0) {
                            var _table = $("#tblAffiliationDoc tbody");
                            _table.empty();
                            $.each(data.AffiliationDocs, function (i) {

                                var _tr = $("<tr/>");
                                _tr.append("<td>" + (i + 1) + "</td>");
                                _tr.append("<td>" + this.AffiliationOrder_Number + "</td>");
                                _tr.append("<td>" + this.Affiliation_date.split(' ')[0] + "</td>");
                                _tr.append("<td >" + this.FileName + "</td>");
                                _tr.append("<td ><a class='btn btn-link' href='/Affiliation/DownloadAffiliationDoc?CollegeId=" + data.iti_college_id + "&Trade_Id=" + this.Trade_Id + "&shift_id=" + this.Shift + "&flag=" + this.Flag + "' ><img src='/Content/img/pdf_logo.png' height='40px' width='40px' /></a>" + "" + "</td>");
                                // _tr.append("<td ><a class='btn btn-link' href='/Affiliation/DownloadAffiliationTradeandUnitDoc?Trade_Id=" + this.Trade_Id + "' ><img src='/Content/img/pdf_logo.png' height='40px' width='40px' /></a>" + "" + "</td>");
                                //_tr.append("<td >" + this.Status + "</td>");
                                _table.append(_tr);
                            });
                        }

                        if (data.TradeWiseAffiliationDoc.length > 0) {
                            var _table = $("#tblClgTradeAffiliationDoc tbody");
                            _table.empty();
                            $.each(data.TradeWiseAffiliationDoc, function (i) {

                                var _tr = $("<tr/>");
                                _tr.append("<td>" + (i + 1) + "</td>");
                                _tr.append("<td>" + this.Trade_Name + "</td>");
                                //_tr.append("<td>" + this.Affiliation_date.split(' ')[0] + "</td>");
                                _tr.append("<td >" + this.FileName + "</td>");
                                _tr.append("<td ><a class='btn btn-link' href='/Affiliation/DownloadAffiliationDoc?CollegeId=" + data.iti_college_id + "&Trade_Id=" + this.Trade_Id + "&shift_id=" + this.Shift + "&flag=" + this.Flag + "' ><img src='/Content/img/pdf_logo.png' height='40px' width='40px' /></a>" + "" + "</td>");
                                // _tr.append("<td ><a class='btn btn-link' href='/Affiliation/DownloadAffiliationTradeandUnitDoc?Trade_Id=" + this.Trade_Id + "' ><img src='/Content/img/pdf_logo.png' height='40px' width='40px' /></a>" + "" + "</td>");
                                //_tr.append("<td >" + this.Status + "</td>");
                                _table.append(_tr);
                            });
                        }
                    }
                    else {
                        bootbox.alert("Error occured try again")
                    }
                }
            });
        }

        function ViewInstitutionDeatailsOS(collegeId) {
            $("#DistrictWiseFilter").hide();
            $.ajax({
                type: 'Get',
                url: '/Affiliation/GetCollegeDetailsInstitute',
                data: { collegeId: collegeId },
                success: function (data) {

                    if (data.flag == 1) {
                        if (data.en_edit) {
                            $("#dd-status").attr("disabled", false);
                            $("#dd-flow").attr("disabled", false);
                            $("#Remarks").attr("disabled", false);
                            $("#btn-sends").attr("disabled", false);
                        }
                        else {

                            $("#dd-status").attr("disabled", true);
                            $("#dd-flow").attr("disabled", true);
                            $("#Remarks").attr("disabled", true);
                            $("#btn-sends").attr("disabled", true);
                        }

                        $("#CollegeId").val(collegeId);
                        $("#Affiliation_div").hide();
                        $("#Affiliation_view").show();
                        $("#tblGridUpdateAffiliation_wrapper").hide();
                        $(".text-location").text(data.location_type);
                        $(".text-inams").text(data.name_of_iti);
                        $(".text-type").text(data.type_of_iti);
                        $(".text-course_code").text(data.course_code);
                        $(".text-mis").text(data.mis_code);
                        $(".text-email").text(data.email);
                        $(".text-number").text(data.phone_number);
                        $(".text-Website").text(data.Website);
                        $(".text-AffiliationDate").text(data.date);
                        $(".text-address").text(data.address);
                        $(".text-location").text(data.location_type);
                        $(".text-division").text(data.division);
                        $(".text-district").text(data.district);
                        $(".text-taluk").text(data.taluka);
                        $(".text-constituency").text(data.constituency);
                        $(".text-build").text(data.build_up_area);
                        $(".text-geo").text(data.geo_location);

                        $(".text-css").text(data.css_code);
                        $(".text-trade").text(data.list_trades);
                        $(".text-tradeName").text(data.trade);
                        $(".text-Panchayat").text(data.panchayat);
                        $(".text-village").text(data.village);
                        $(".text-AfflOrderNo").text(data.AffiliationOrderNo);
                        $(".text-AfflOrderNoDate").text(data.order_no_date);
                        $(".text-course_name").text(data.course_name);
                        $(".text-scheme_name").text(data.scheme_name);
                        $(".text-division").text(data.division);
                        $(".deaffiliate").text("Upload De-affiliate Document");
                        $(".affiliate").text("Upload affiliate Document");
                        
                        $(".DeaffiliateDoc").text("De-affiliate Supporting Document");
                        $(".AffiliateDoc").text("Affiliate Supporting Document");
                        $(".Affiliationdoc").text("Affiliation Supporting Document");
                        $("#DownloadFileLink2").val(data.FileUploadPath);
                        if (data.FileUploadPath == null) {
                            $("#Downloaddeaffiliate").hide();
                            $(".DeaffiliateDoc").hide();
                        }
                        else {
                            $("#Downloaddeaffiliate").show();
                            $(".DeaffiliateDoc").show();
                        }
                        //$("#DownloadFileLink").val(data.AffiliateFilePath);
                        $("#Downloadffiliation").empty();
                        var html = "<a class='btn btn-link' href='/Affiliation/DownloadAffiliationDoc?CollegeId=" + collegeId + "' ><img src='/Content/img/pdf_logo.png' height='40px' width='40px' /></a>"
                        $("#Downloadffiliation").append(html);
                        $("#AffiliationFileName").text(data.Filename);
                        if (data.AffiliateFilePath == null) {
                            $("#Downloadffiliate").hide();
                            $(".AffiliateDoc").hide();
                        }
                        else {
                            $("#Downloadffiliate").show();
                            $(".AffiliateDoc").show();
                        }
                        $(".text-unit").text(data.no_units);
                        $(".text-ActiveDeactive").val(data.ActiveDeactive);
                        if (data.ActiveDeactive == true) {
                            $(".text-ActiveDeactive").text("Active");
                        }
                        else {
                            $(".text-ActiveDeactive").text("Deactive");
                        }


                        $("#IsActive").val(data.IsActive);
                        
                        if (data.IsActive) {
                            $(".deaffiliate").show()
                            $("#uploadfile").show()
                            $(".affiliate").hide()
                            $("#uploadfileaffiliate").hide()
                        }

                        else {
                            $(".affiliate").show()
                            $("#uploadfileaffiliate").show()
                            $(".deaffiliate").hide()
                            $("#uploadfile").hide()

                        }
                        $("#IsActiveNew").val(data.IsActiveNew);
                        if (data.ActiveDeActive) {

                            $("#Active").hide()
                            $("#DeActive").show()
                        }
                        else {
                            $("#Active").show()
                            $("#DeActive").hide()
                        }
                        var _table = $("#tblViewShift tbody");
                        _table.empty();
                        $.each(data.trades_list, function (i) {

                            var _tr = $("<tr/>");
                            _tr.append("<td>" + (i + 1) + "</td>");
                            _tr.append("<td>" + this.trade_name + "</td");
                            //_tr.append("<td>" + this.units + "</td>");
                            //_tr.append("<td>" + this.IsPPP + "</td>");
                            //_tr.append("<td>" + this.Dual_System + "</td>");
                            if (this.ISActive) {
                                _tr.append("<td>Active <input type='hidden' class='active_status' value='true' /><input type='hidden' class='shiftId' value='" + this.ITI_Trade_Shift_Id + "' /></td>");

                            }
                            else {
                                //if (this.Status == 5) {
                                //    _tr.append("<td>Pending for Approval <input type='hidden' class='active_status' value='false' /><input type='hidden' class='shiftId' value='" + this.ITI_Trade_Shift_Id + "' /></td>");
                                //}
                                //else {
                                _tr.append("<td>DeActive <input type='hidden' class='active_status' value='false' /><input type='hidden' class='shiftId' value='" + this.ITI_Trade_Shift_Id + "' /></td>");
                                // }

                            }
                            _table.append(_tr);
                        });

                        //$("#ViewFile").empty();
                        //if (data.FileUploadPath != null && data.FileUploadPath != "") {
                        //    var html = "<a class='btn btn-link' href='/Affiliation/DownloadAffiliationDoc?CollegeId=" + collegeId + "' >Download File</a>"
                        //    $("#ViewFile").append(html);
                        //}
                        if (data.activeDeactiveTradeHistories.length > 0) {
                            $.each(data.activeDeactiveTradeHistories, function (i) {
                                var _tr = $("<tr/>");

                                _tr.append("<td>" + (i + 1) + "</td>");
                                _tr.append("<td>" + data.activeDeactiveTradeHistories[i].date + "</td");
                                _tr.append("<td>" + data.activeDeactiveTradeHistories[i].User + "</td>");
                                _tr.append("<td>" + data.activeDeactiveTradeHistories[i].Flow_user + "</td>");
                                _tr.append("<td>" + data.activeDeactiveTradeHistories[i].Status + "</td>");
                                _tr.append("<td>" + data.activeDeactiveTradeHistories[i].ActDeActRemarks + "</td>");


                                $("#tblHistory tbody").append(_tr);
                            });
                        }

                        else {
                            var _tr = $("<tr/>");
                            _tr.append("<td>" + "" + "</td>");
                            _tr.append("<td>" + "" + "</td>");
                            _tr.append("<td>" + "No Data Available" + "</td>");
                            _tr.append("<td>" + "" + "</td>");
                            _tr.append("<td>" + "" + "</td>");

                            $("#tblHistory tbody").append(_tr);
                        }

                        if (data.AffiliationDocs.length > 0) {
                            var _table = $("#tblAffiliationDoc tbody");
                            _table.empty();
                            $.each(data.AffiliationDocs, function (i) {

                                var _tr = $("<tr/>");
                                _tr.append("<td>" + (i + 1) + "</td>");
                                _tr.append("<td>" + this.AffiliationOrder_Number + "</td>");
                                _tr.append("<td>" + this.Affiliation_date.split(' ')[0] + "</td>");
                                _tr.append("<td >" + this.FileName + "</td>");
                                _tr.append("<td ><a class='btn btn-link' href='/Affiliation/DownloadAffiliationDoc?CollegeId=" + data.iti_college_id + "&Trade_Id=" + this.Trade_Id + "&shift_id=" + this.Shift + "&flag=" + this.Flag + "' ><img src='/Content/img/pdf_logo.png' height='40px' width='40px' /></a>" + "" + "</td>");
                                //_tr.append("<a class='btn btn-link' href='/Affiliation/DownloadAffiliationDoc?CollegeId=" + collegeId + "' ><img src='/Content/img/pdf_logo.png' height='40px' width='40px' /></a>" + "" + "</td>");
                                // _tr.append("<td ><a class='btn btn-link' href='/Affiliation/DownloadAffiliationTradeandUnitDoc?Trade_Id=" + this.Trade_Id + "' ><img src='/Content/img/pdf_logo.png' height='40px' width='40px' /></a>" + "" + "</td>");
                                //_tr.append("<td >" + this.Status + "</td>");
                                _table.append(_tr);
                            });
                        }

                        if (data.TradeWiseAffiliationDoc.length > 0) {
                            var _table = $("#tblClgTradeAffiliationDoc tbody");
                            _table.empty();
                            $.each(data.TradeWiseAffiliationDoc, function (i) {

                                var _tr = $("<tr/>");
                                _tr.append("<td>" + (i + 1) + "</td>");
                                _tr.append("<td>" + this.Trade_Name + "</td>");
                                //_tr.append("<td>" + this.Affiliation_date.split(' ')[0] + "</td>");
                                _tr.append("<td >" + this.FileName + "</td>");
                                _tr.append("<td ><a class='btn btn-link' href='/Affiliation/DownloadAffiliationDoc?CollegeId=" + data.iti_college_id + "&Trade_Id=" + this.Trade_Id + "&shift_id=" + this.Shift + "&flag=" + this.Flag + "' ><img src='/Content/img/pdf_logo.png' height='40px' width='40px' /></a>" + "" + "</td>");
                                // _tr.append("<td ><a class='btn btn-link' href='/Affiliation/DownloadAffiliationTradeandUnitDoc?Trade_Id=" + this.Trade_Id + "' ><img src='/Content/img/pdf_logo.png' height='40px' width='40px' /></a>" + "" + "</td>");
                                //_tr.append("<td >" + this.Status + "</td>");
                                _table.append(_tr);
                            });
                        }

                    }
                    else {
                        bootbox.alert("Error occured try again")
                    }
                }
            });
        }

        var activestatus = 0;

        function UpdateActivesttus(status, id) {
            
            clicked = true;
            activestatus = status;
            var uplfile = $("#uploadfile").val();
            if (activestatus == true) {
                var affiliatefileupload = $("#uploadfileaffiliate").val();
                if ((affiliatefileupload == "" || affiliatefileupload == null) && ($('#uploadfileaffiliate').is(':visible'))) {
                    IsValid = false;

                    bootbox.alert("pls upload PDF file")
                    $("#uploadfileaffiliate").show()
                    return IsValid;
                    //  confirm(msg);
                }
                 bootbox.confirm('<br><br> Are you sure you want to Affiliate ?', (confirma) => {
                if (confirma) {
                $('#' + id).attr("disabled", true);
                $('#DeActive').attr("disabled", true);

                   // return bootbox.alert(" <br><br> Are you sure you want to Affiliate Institute");
                     }
                 });
            }
              
            else {
                if (uplfile == "" || uplfile == null) {
                    IsValid = false;
                    var file = $("#DownloadFileLink").val()
                    if ((file == false || file == undefined) && ($('#uploadfile').is(':visible'))) {
                        bootbox.alert("pls upload PDF file")
                        $("#uploadfile_Required").show()
                        return IsValid;
                    }
                }
                bootbox.confirm('<br><br> Are you sure you want to Deaffiliate?', (confirma) => {
                    if (confirma) {
                $('#' + id).attr("disabled", true);
                $('#Active').attr("disabled", true);
                //return bootbox.alert("<br><br> Are you sure You Want to De-Affiliate Institute");
                    }
                });
                //confirm(msg);
            }
        }

        $('#uploadfile').change(function () {
            
            var ext = $(this).val().split('.').pop().toLowerCase();
            if (ext != "") {
                if ($.inArray(ext, ['pdf', 'PDF']) == -1) {
                    bootbox.alert("<br><br>Kindly upload valid PDF file");
                    $(this).val("");
                }
            } else {
                $(this).val("");
            }

            if (this.files[0].size > 200 * 1024) {
                bootbox.alert("<br><br>File size should be less than 200KB");
                $(this).val("");
            }

        });
        $('#uploadfileaffiliate').change(function () {
            
            var ext = $(this).val().split('.').pop().toLowerCase();
            if (ext != "") {
                if ($.inArray(ext, ['pdf', 'PDF']) == -1) {
                    bootbox.alert("<br><br>Kindly upload valid PDF file");
                    $(this).val("");
                }
            } else {
                $(this).val("");
            }

            if (this.files[0].size > 200 * 1024) {
                bootbox.alert("<br><br>File size should be less than 200KB");
                $(this).val("");
            }

        });

        function SaveAffiliateInstitute() {
            

            var CollegeId = $("#CollegeId").val();
            var ActiveVal = $("#IsActive").val();
            var ADRemarks = $("#Remarks").val();
            var clgn = $(".text-name").text();
            var IsValid = true;
            var uplfile = $("#uploadfile").val();
            var DeaffiliateOrderNo = $("#deaffiliateOrderNo").val();
            var AffiliateOrderNo = $("#affiliateOrderNo").val();
            var Deaffiliateedate = $("#newdeaffiliatedate").val();
            var AffiliateDate = $("#newaffiliatedate").val();
            var Tstatus = true;
            var deactivevalue = $("#DeActive").prop("disabled");
            var activevalue = $("#Active").prop("disabled");
            //if (deactivevalue == false && activevalue == false) {
            //    Tstatus = activestatus;
            //}
            var IsValid = true;
            if (clicked == false) {
                //Tstatus = activestatus;
                IsValid = false;
                return bootbox.alert("<br><br>Please Select the Affiliate /De-Affiliate before submitting the record");
                return IsValid;
            }
            Tstatus = activestatus;
            //else if (deactivevalue && activevalue == false) {
            //    Tstatus = true;

            //}
            //else {
            //    Tstatus = false;

            //}
            
            //if (Tstatus == false) {
            //    if (uplfile == "" || uplfile == null) {
            //        var file = $("#DownloadFileLink2").val()
            //        if (file == false) {
            //            return bootbox.alert("pls upload a file")
            //            $("#uploadfile_Required").show()
            //        }

            //    }
            //    else {
            //        $("#uploadfile_Required").hide()
            //    }
            //    if (DeaffiliateOrderNo == "") {
            //        return bootbox.alert("Pls enter De-Affiliate Order No.;")
            //    }
            //    else if (Deaffiliateedate == "") {
            //        return bootbox.alert("Pls enter De-Affiliate Date;")
            //    }
            //}

            var IsValid = true;
            var type = $("#dd-flow").val();
            if (type == "" || type == "0" || type == null) {
                IsValid = false;
              return  bootbox.alert("Select Send To field")
                $("#dd-flow_Required").show()
                return IsValid;
            }
            else {
                $("#dd-flow_Required").hide()

            }

            var IsValid = true;
            if (ADRemarks == "" || ADRemarks == null) {
                IsValid = false;
               return bootbox.alert("Pls enter Remarks")
                $("#Remarks_Required").show();
                return IsValid;
            }
            else {
                $("#Remarks_Required").hide();

            }




          //  var IsValid = true;
            if (activestatus == 0) {


                activestatus = false;

            }
            else if (activestatus == 1) {
                activestatus = true;
            }



            var STATUS = $("#dd-status").val();
            // fileData.append("STATUS", STATUS);


            
            var fileUpload = $("#uploadfile").get(0);//$('#ActiveDeactiveinsertUpdate-Add').get(0);
            var files = fileUpload.files;
            var fileData = new FormData();
            for (var i = 0; i < files.length; i++) {
                fileData.append("ImageFile", files[i]);
            }
            //if (fileUpload != 0 || fileUpload != null) {

            //if (files[0].size >200 * 1024)
            //{
            //    bootbox.alert('pls select file Size less tha or eual to 200 kb');
            //    }
            //}
            var activefileupload = $("#uploadfileaffiliate").get(0);
            var activefiles = activefileupload.files;
            //var fileData = new FormData();
            for (var i = 0; i < activefiles.length; i++) {
                fileData.append("ActiveImageFile", activefiles[i]);
            }
            var CollegeId = CollegeId;
            //var val = $(thd).val();


            //IsValid = true;
            if (IsValid == true) {
                
                var msg = "De-Affiliate";
                if (Tstatus) {
                    msg = "Affiliate";
                }
                if (type == 5) {
                    var name = "Deputy Director";
                }
                else if (type == 3) {
                    name = "Assistant Director";
                }
                else if (type == 8) {
                    name = "Case Worker";
                }
                else if (type == 7) {
                    name = "Office Superintendent";
                }
                if (status == 4) {
                    var stname = "Sent Back For Correction/Clarification";

                }
                else if (status == 7) {
                    stname = "Reviewed and Recommended";
                }

                bootbox.confirm("<br><br>Are you sure you want to send  " + clgn + " " + msg + " request  for review to " + name + "?", function (confirmed) {
                    if (confirmed) {
                        fileData.append("ClgId", CollegeId);

                        var IsActive = $("#Active").val();
                        
                        var IsActive = $("DeActive").val();
                        

                        if (IsActive == 'Active') {
                            
                            IsActive = $("#Active").val();

                        }
                        else {
                            IsActive = $("#DeActive").val();
                        }

                        var a = $("#dd-flow").val();
                        //alert(a);
                        fileData.append("Flowid", a);
                        fileData.append("IsActive", Tstatus);

                        fileData.append("ActDeActRemarks", ADRemarks);

                        fileData.append("DeaffiliateOrderNo", DeaffiliateOrderNo);
                        fileData.append("DeffiliateDate", Deaffiliateedate);
                        fileData.append("AffiliateOrderNo", AffiliateOrderNo);
                        fileData.append("AffiliateDate", AffiliateDate);

                        if (IsActive == 'Active') {
                            
                            fileData.append("IsActive", true);
                        }
                        else {
                            fileData.append("IsActive", false);
                        }
                        if (IsValid) {
                            $.ajax({
                                type: 'POST',
                                url: '/Affiliation/InstituteDeaffiliateDeatils',
                                contentType: false, // Not to set any content header
                                //processData: false, // Not to process data
                                //async: false,
                                //contentType: 'application/json',
                                // contentType: 'application/json; charset=utf-8',
                                processData: false,
                                // dataType: 'json',
                                data: fileData,
                                success: function (result) {

                                    if (result) {

                                        bootbox.alert("<br><br>" + clgn + " " + msg + " request sent to " + name + " for review successfully");
                                        GetAllInstituteDetails();
                                        // GetAllInstituteDetails();
                                        $("#Remarks").val('');
                                        $("#dd-flow").val('');
                                        $("#uploadfile").val('');
                                        

                                        $("#tblGridUpdateAffiliation_wrapper").show();
                                        $("#Affiliation_view").hide();
                                    }
                                    else {
                                        bootbox.alert("failed")
                                    }
                                }
                            });
                        }
                    }
                });
            }

        }

        function SaveAffiliateInstituteOS() {
            
            //$("#DistrictWiseFilter").show();
            var CollegeId = $("#CollegeId").val();
            var IsActive = $('#IsActiveNew').val();
            var ADRemarks = $("#Remarks").val();
            var status = $("#dd-status").val();
            var FlowId = $("#dd-flow").val();
            var clgname = $(".text-nams").text()
            var IsValid = true;
            var type = $("#dd-status").val();
            if (type == "" || type == "0" || type == null) {
                IsValid = false;
                bootbox.alert("status is required")
                //$("#dd-status_Required").show()
                return IsValid;
            }
            else {
                $("#dd-status_Required").hide()

            }
            var flow = $("#dd-flow").val();
            if (flow == "" || flow == "0" || flow == null) {
                if (type != 2) {
                    IsValid = false;
                    bootbox.alert("Pls select send to Field");
                    //  $("#dd-flow_Required").show()
                    return IsValid;
                }
                else {

                    $("#dd-flow_Required").hide()

                }

            }
            else {
                $("#dd-flow_Required").hide();
            }


            //var IsValid = true;
            //var type = $("#dd-flow").val();
            //if (type == "" || type == "0" || type == null) {
            //    IsValid = false;
            //    bootbox.alert("Pls select send to Field")
            //    //  $("#dd-flow_Required").show()
            //    return IsValid;
            //}
            //else {
            //    $("#dd-flow_Required").hide()

            //}
            var IsValid = true;
            if (ADRemarks == "" || ADRemarks == null) {
                IsValid = false;
                bootbox.alert("Remarks is required")
                //  $("#Remarks_Required").show();
                return IsValid;
            }
            else {
                $("#Remarks_Required").hide();

            }


            //var fileUpload = $("#uploadfile").get(0);//$('#ActiveDeactiveinsertUpdate-Add').get(0);
            //var files = fileUpload.files;
            var fileData = new FormData();
            //for (var i = 0; i < files.length; i++) {
            //    fileData.append("ImageFile", files[i]);
            //}
            //var activefileupload = $("#uploadfileaffiliate").get(0);
            //var activefiles = activefileupload.files;
            ////var fileData = new FormData();
            //for (var i = 0; i < activefiles.length; i++) {
            //    fileData.append("ActiveImageFile", activefiles[i]);
            //}
            var CollegeId = CollegeId;
            //var val = $(thd).val();



            if (IsValid) {
                

                if (FlowId == 5) {
                    var name = "Deputy Director";
                }
                else if (FlowId == 3) {
                    name = "Assistant Director";
                }
                else if (FlowId == 8) {
                    name = "Case Worker";
                }
                if (status == 4) {
                    var stname = "Correction/Clarification";

                }
                else if (status == 7) {
                    stname = "Review";
                }
                var msg = "De-Affiliate";
                if (IsActive== true) {
                    msg = "Affiliate";
                }
                bootbox.confirm("<br><br> Are you sure you want to send  " + clgname + " " + msg + " request  to  " + name + " for " + stname + "?", function (confirmed) {
                    if (confirmed) {
                        fileData.append(
                            "ClgId", CollegeId
                        );
                        fileData.append(
                            "StatusId", status

                        );
                        fileData.append(
                            "Flowid", FlowId

                        );

                        fileData.append(
                            "ActDeActRemarks", ADRemarks

                        );
                        fileData.append("IsActive", IsActive);
                        $.ajax({
                            type: 'POST',
                            url: '/Affiliation/InstituteDeaffiliateDeatils',
                            contentType: false, // Not to set any content header
                            //processData: false, // Not to process data
                            //async: false,
                            //contentType: 'application/json',
                            // contentType: 'application/json; charset=utf-8',
                            processData: false,
                            // dataType: 'json',
                            data: fileData,
                            success: function (result) {

                                if (result) {
                                    
                                    if (FlowId == 5) {
                                        bootbox.alert("<br><br> " + clgname + " " + msg + " request sent to  deputy director for review successfully")
                                    }
                                    else if
                                        (FlowId == 3) {
                                        bootbox.alert("<br><br> " + clgname + " " + msg + " request sent to  assistant director for  review successfully")
                                    }
                                    else if
                                        (FlowId == 8) {
                                        bootbox.alert("<br><br> " + clgname + " " + msg + " request sent to case worker for correction/clarification successfully")
                                    }

                                    $("#Remarks").val('');
                                    $("#dd-flow").val('');
                                    $("#dd-status").val('');
                                    GetAllInstituteDetailsOS();
                                    //GetAllInstituteDetails();
                                    $("#tblGridUpdateAffiliation_wrapper").show();
                                    $("#Affiliation_view").hide();
                                }
                                else {
                                    bootbox.alert("failed, Please check again")
                                }
                            }
                        });
                    }
                });
            }

        }

        //$("#dd-status").change(function () {
        //    
        //    $("#dd-flow").empty();
        //    var value = $(this).val();
        //    //if (value == 4) {
        //    $.ajax({
        //        url: "/Affiliation/GetAllUsers1",
        //        type: 'Get',
        //        data: { statusValue: value },
        //        contentType: 'application/json; charset=utf-8',
        //        success: function (data) {

        //            if (data != null || data != '') {
        //                $.each(data, function () {
        //                    
        //                    $("#dd-flow").append($("<option/>").val(this.Value).text(this.Text));
        //                });
        //            }
        //            else {
        //                $("#dd-flow").attr("disabled", true);
        //            }



        //        }, error: function (result) {
        //            bootbox.alert("Error", "something went wrong");
        //        }

        //    });
        //    //}
        //    //var value = $(this).val();
        //    //if (value == 2 || value == 4) {
        //    //    $("#dd-flow").attr("disabled", true);
        //    //}
        //    //else {
        //    //    $("#dd-flow").attr("disabled", false);
        //    //}
        //});


        function SaveAffiliateInstituteADDD() {
            

            var CollegeId = $("#CollegeId").val();
            var IsActive = $('#IsActiveNew').val();
            var ADRemarks = $("#Remarks").val();
            var status = $("#dd-status").val();
            var FlowId = $("#dd-flow").val();

            //var fileUpload = $("#uploadfile").get(0);//$('#ActiveDeactiveinsertUpdate-Add').get(0);
            //var files = fileUpload.files;
            var fileData = new FormData();
            //for (var i = 0; i < files.length; i++) {
            //    fileData.append("ImageFile", files[i]);
            //}
            //var activefileupload = $("#uploadfileaffiliate").get(0);
            //var activefiles = activefileupload.files;
            ////var fileData = new FormData();
            //for (var i = 0; i < activefiles.length; i++) {
            //    fileData.append("ActiveImageFile", activefiles[i]);
            //}
            var CollegeId = CollegeId;
            //var val = $(thd).val();


            var IsValid = true;
            var type = $("#dd-status").val();
            if (type == "" || type == "0" || type == null) {
                IsValid = false;
                bootbox.alert("status is required")
                //$("#dd-status_Required").show()
                return IsValid;
            }
            else {
                $("#dd-status_Required").hide()

            }

            var flow = $("#dd-flow").val();
            if (flow == "" || flow == "0" || flow == null) {
                if (type != 2) {
                    IsValid = false;
                    bootbox.alert("Pls select send to Field");
                    //  $("#dd-flow_Required").show()
                    return IsValid;
                }
                else {

                    $("#dd-flow_Required").hide()

                }

            }
            else {
                $("#dd-flow_Required").hide();
            }

            var IsValid = true;
            if (ADRemarks == "" || ADRemarks == null) {
                IsValid = false;
                bootbox.alert("Remarks is required")
                //  $("#Remarks_Required").show();
                return IsValid;
            }
            else {
                $("#Remarks_Required").hide();

            }




            //IsValid = true;
            if (IsValid) {
                
                if (FlowId == 5) {
                    var name = "Deputy Director"
                }
                else if (FlowId == 3) {
                    name = "Assistant Director"
                }
                else if (FlowId == 8) {
                    name = "Case Worker"
                }
                else if (FlowId == 7) {
                    name = "Office Superintendent"
                }
                else if (FlowId == 0) {
                    name = ""
                }
                if (status == 4) {
                    var stname = "Correction/Clarification"

                }
                else if (status == 7) {
                    stname = "Review"
                }
                else if (status == 2) {
                    stname = "Approved"
                }
                var msg = "De-Affiliate";
                if (IsActive) {
                    msg = "Affiliate";
                }
                if (stname == "Review" || stname == "Correction/Clarification") {
                    bootbox.confirm("<br><br>Are you sure to send " + $(".text-nams").text() + " " + msg + "  request  to  " + name + " for " + stname + " ?", function (confirmed) {
                        if (confirmed) {
                            fileData.append(
                                "ClgId", CollegeId
                            );
                            fileData.append(
                                "StatusId", status

                            );
                            fileData.append(
                                "Flowid", FlowId

                            );

                            fileData.append(
                                "ActDeActRemarks", ADRemarks

                            );

                            fileData.append("IsActive", IsActive);

                            $.ajax({
                                type: 'POST',
                                url: '/Affiliation/InstituteDeaffiliateDeatils',
                                contentType: false, // Not to set any content header
                                //processData: false, // Not to process data
                                //async: false,
                                //contentType: 'application/json',
                                // contentType: 'application/json; charset=utf-8',
                                processData: false,
                                // dataType: 'json',
                                data: fileData,
                                success: function (result) {

                                    if (result) {
                                        if (FlowId == 5) {
                                            bootbox.alert("<br><br> " + $(".text-nams").text() + " " + msg + " request sent to deputy director for review successfully")
                                        }
                                        else if
                                            (FlowId == 3) {
                                            bootbox.alert("<br><br> " + $(".text-nams").text() + " " + msg + " request sent to assistant director for  correction/clarification successfully")
                                        }
                                        else if
                                            (FlowId == 8) {
                                            bootbox.alert(" <br><br>" + $(".text-nams").text() + " " + msg + " request sent to case worker for correction/clarification successfully")
                                        }
                                        else if
                                            (FlowId == 7) {
                                            bootbox.alert(" <br><br>" + $(".text-nams").text() + " " + msg + " request sent to office superintendent for correction/clarification successfully")
                                        }
                                        else {
                                            bootbox.alert("<br><br> " + $(".text-nams").text() + " " + msg + " request approved successfully")
                                        }
                                        //$("#Remarks").val('');

                                        //$("#dd-status").val('');
                                        GetAllInstituteDetailsAdd();
                                        $("#tblGridUpdateAffiliation_wrapper").show();
                                        $("#Affiliation_view").hide();
                                    }
                                    else {
                                        bootbox.alert("failed, Please check again")
                                    }
                                }
                            });
                        }
                    });
                }
                else {
                    bootbox.confirm("<br><br>Are you sure you want to Approve " + $(".text-nams").text() + " " + msg + "  request?", function (confirmed) {
                        if (confirmed) {
                            fileData.append(
                                "ClgId", CollegeId
                            );
                            fileData.append(
                                "StatusId", status

                            );
                            fileData.append(
                                "Flowid", FlowId

                            );

                            fileData.append(
                                "ActDeActRemarks", ADRemarks

                            );

                            fileData.append("IsActive", IsActive);

                            $.ajax({
                                type: 'POST',
                                url: '/Affiliation/InstituteDeaffiliateDeatils',
                                contentType: false, // Not to set any content header
                                //processData: false, // Not to process data
                                //async: false,
                                //contentType: 'application/json',
                                // contentType: 'application/json; charset=utf-8',
                                processData: false,
                                // dataType: 'json',
                                data: fileData,
                                success: function (result) {
                                    
                                    if (result) {
                                        if (FlowId == 5) {
                                            bootbox.alert("<br><br>" + "Assistant Director" + " has sent " + $(".text-nams").text() + "" + msg + "request for" + stname + " to  deputy director successfully")
                                        }
                                        else if
                                            (FlowId == 3) {
                                            bootbox.alert("<br><br> Sent back for more clarification to assistant director successfully on " + $(".text-nams").text() + "" + msg + "request ")
                                        }
                                        else if
                                            (FlowId == 8) {
                                            bootbox.alert("<br><br> Sent back for more clarification to office superintendent successfully on " + $(".text-nams").text() + "" + msg + "request")
                                        }
                                        else if
                                            (FlowId == 7) {
                                            bootbox.alert("<br><br> Sent back for more clarification to case worker successfully on " + $(".text-nams").text() + "" + msg + "request")
                                        }
                                        else {
                                            bootbox.alert(" <br><br>" + $(".text-nams").text() + " " + msg + " Request Approved Successfully")
                                            
                                        }
                                        //$("#Remarks").val('');
                                        
                                        //$("#dd-status").val('');
                                        GetAllInstituteDetailsAdd();
                                        $("#tblGridUpdateAffiliation_wrapper").show();
                                        $("#Affiliation_view").hide();
                                        fnRefreshScreenDataDeaffiliate();
                                    }
                                    else {
                                        bootbox.alert("failed, Please check again")
                                    }
                                }
                            });
                        }
                    });
                }

            }

        }


        function GetAllInstituteDetails() {
            
            $("#Affiliation_view").hide();
            $("#tblGridUpdateAffiliation_wrapper").show();
            $.ajax({
                type: 'Get',
                url: '/Affiliation/GetAffiliateInstituteDetails',
                success: function (data) {

                    var index = 1;
                    if (data.length > 0) {

                        var t = $('#tblGridUpdateAffiliation1').DataTable({
                            data: data,
                            "destroy": true,
                            "bSort": true,
                            columns: [
                                { 'data': 'Slno', 'title': 'Slno', 'className': '' },
                                { 'data': 'MisCode', 'title': 'MIS ITI Code', 'className': 'text-left' },
                                { 'data': 'iti_college', 'title': 'Name of ITI', 'className': '' },
                                { 'data': 'CourseType', 'title': 'CourseType', 'className': 'text-left' },
                                { 'data': 'Division', 'title': 'Division', 'className': 'text-left' },
                                { 'data': 'District', 'title': 'District', 'className': 'text-left' },
                                { 'data': 'StatusName', 'title': 'Status - Currently With', 'className': 'text-left' },
                                {
                                    'data': 'IsActive', 'title': 'Current Institute Status',
                                    render: function (data, type, row) {
                                        if (row.IsActive == true) {
                                            return "<input type='text' id='Active_160' value='Affiliate' class='form - control' readonly='readonly'>"
                                        }
                                        else {
                                            return "<input type='text' id='Active_160' value='De-Affiliate' class='form - control' readonly='readonly'>"
                                        }
                                    }
                                },
                                {
                                    'data': 'IsActive1', 'title': 'Requested Institute Status',
                                    render: function (data, type, row) {
                                        if (row.StatusName == " - ") {
                                            return "<input type='text' id='Active_160'  class='form - control' readonly='readonly'>"
                                        }
                                        else {
                                            if (row.IsActive1 == true) {
                                                return "<input type='text' id='Active_160' value='Affiliate' class='form - control' readonly='readonly'>"
                                            }
                                            else {
                                                return "<input type='text' id='Active_160' value='De-Affiliate' class='form - control' readonly='readonly'>"
                                            }
                                        }
                                    }
                                },
                                {
                                    'data': 'FileUploadPath',
                                    render: function (data, type, row) {

                                        return "<input type='button' class='btn btn-primary' img='' src='/Content/img/pencil2.png' id='Active_" + row.iti_college_id + "' value='View' onclick='ViewInstitutionDeatails(" + row.iti_college_id + ")'>"


                                    }
                                }

                            ],
                            "columnDefs": [{
                                "render": function (data, type, full, meta) {

                                    return index++;
                                },
                                "targets": 0
                            }],
                        });
                        t.on('order.dt search.dt', function () {
                            t.column(0, { search: 'applied', order: 'applied' }).nodes().each(function (cell, i) {
                                cell.innerHTML = i + 1;
                            });
                        }).draw();
                    }
                    else {
                        //alert("No data found!")
                        $('#tblGridUpdateAffiliation1').DataTable().clear().draw();
                    }

                }, error: function (result) {
                    bootbox.alert("Error", "something went wrong");
                }
            });
            $("#DistrictWiseFilter").show();
        }




        function GetAllInstituteDetailsOS() {
            
            $("#DistrictWiseFilter").show();
            $.ajax({
                type: 'Get',
                url: '/Affiliation/GetAffiliateInstituteDetailsOs',
                success: function (data) {

                    var index = 1;
                    if (data.length > 0) {

                        var t = $('#tblGridUpdateAffiliation1').DataTable({
                            data: data,
                            "destroy": true,
                            "bSort": true,
                            columns: [
                                { 'data': 'Slno', 'title': 'Slno', 'className': '' },
                                { 'data': 'MisCode', 'title': 'MIS ITI Code', 'className': 'text-left' },
                                { 'data': 'iti_college', 'title': 'Name of ITI', 'className': '' },
                                { 'data': 'CourseType', 'title': 'CourseType', 'className': 'text-left' },
                                { 'data': 'Division', 'title': 'Division', 'className': 'text-left' },
                                { 'data': 'District', 'title': 'District', 'className': 'text-left' },
                                { 'data': 'StatusName', 'title': 'Status - Currently With', 'className': 'text-left' },
                                {
                                    'data': 'IsActive', 'title': 'Current Institute Status',
                                    render: function (data, type, row) {
                                        if (row.IsActive == true) {
                                            return "<input type='text' id='Active_160' value='Affiliate' class='form - control' readonly='readonly'>"
                                        }
                                        else {
                                            return "<input type='text' id='Active_160' value='De-Affiliate' class='form - control' readonly='readonly'>"
                                        }
                                    }
                                },
                                {
                                    'data': 'IsActive1', 'title': 'Requested Institute Status',
                                    render: function (data, type, row) {
                                        if (row.IsActive1 == true) {
                                            return "<input type='text' id='Active_160' value='Affiliate' class='form - control' readonly='readonly'>"
                                        }
                                        else {
                                            return "<input type='text' id='Active_160' value='De-Affiliate' class='form - control' readonly='readonly'>"
                                        }
                                    }
                                },
                                {
                                    'data': 'FileUploadPath',
                                    render: function (data, type, row) {

                                        return "<input type='button' class='btn btn-primary' img='' src='/Content/img/pencil2.png' id='Active_" + row.iti_college_id + "' value='View' onclick='ViewInstitutionDeatailsOS(" + row.iti_college_id + ")'>"


                                    }
                                }

                            ],
                            "columnDefs": [{
                                "render": function (data, type, full, meta) {

                                    return index++;
                                },
                                "targets": 0
                            }],
                        });
                        t.on('order.dt search.dt', function () {
                            t.column(0, { search: 'applied', order: 'applied' }).nodes().each(function (cell, i) {
                                cell.innerHTML = i + 1;
                            });
                        }).draw();
                    }
                    else {
                        //alert("No data found!")
                        $('#tblGridUpdateAffiliation1').DataTable().clear().draw();
                    }

                }, error: function (result) {
                    bootbox.alert("Error", "something went wrong");
                }
            });
        }

        function GetAllInstituteDetailsAdd() {
            
            $("#DistrictWiseFilter").show();
            $.ajax({
                type: 'Get',
                url: '/Affiliation/GetAffiliateInstituteDetailsDD',
                success: function (data) {

                    var index = 1;
                    if (data.length > 0) {

                        var t = $('#tblGridUpdateAffiliation1').DataTable({
                            data: data,
                            "destroy": true,
                            "bSort": true,
                            columns: [
                                { 'data': 'Slno', 'title': 'Slno', 'className': '' },
                                { 'data': 'MisCode', 'title': 'MIS ITI Code', 'className': 'text-left' },
                                { 'data': 'iti_college', 'title': 'Name of ITI', 'className': '' },
                                { 'data': 'CourseType', 'title': 'CourseType', 'className': 'text-left' },
                                { 'data': 'Division', 'title': 'Division', 'className': 'text-left' },
                                { 'data': 'District', 'title': 'District', 'className': 'text-left' },
                                { 'data': 'StatusName', 'title': 'Status - Currently With', 'className': 'text-left' },
                                {
                                    'data': 'IsActive', 'title': 'Current Institute Status',
                                    render: function (data, type, row) {
                                        if (row.IsActive == true) {
                                            return "<input type='text' id='Active_160' value='Affiliate' class='form - control' readonly='readonly'>"
                                        }
                                        else {
                                            return "<input type='text' id='Active_160' value='De-Affiliate' class='form - control' readonly='readonly'>"
                                        }
                                    }
                                },
                                {
                                    'data': 'IsActive1', 'title': 'Rquested Institute Status',
                                    render: function (data, type, row) {
                                        if (row.IsActive1 == true) {
                                            return "<input type='text' id='Active_160' value='Affiliate' class='form - control' readonly='readonly'>"
                                        }
                                        else {
                                            return "<input type='text' id='Active_160' value='De-Affiliate' class='form - control' readonly='readonly'>"
                                        }
                                    }
                                },
                                {
                                    'data': 'FileUploadPath',
                                    render: function (data, type, row) {

                                        return "<input type='button' class='btn btn-primary' img='' src='/Content/img/pencil2.png' id='Active_" + row.iti_college_id + "' value='View' onclick='ViewInstitutionDeatailsOS(" + row.iti_college_id + ")'>"


                                    }
                                }

                            ],
                            "columnDefs": [{
                                "render": function (data, type, full, meta) {

                                    return index++;
                                },
                                "targets": 0
                            }],
                        });
                        t.on('order.dt search.dt', function () {
                            t.column(0, { search: 'applied', order: 'applied' }).nodes().each(function (cell, i) {
                                cell.innerHTML = i + 1;
                            });
                        }).draw();
                    }
                    else {
                        //alert("No data found!")
                        $('#tblGridUpdateAffiliation1').DataTable().clear().draw();
                    }

                }, error: function (result) {
                    bootbox.alert("Error", "something went wrong");
                }
            });
        }

        function GetDownloadFileLink2() {
            
            var DownloadFileLinkId = $('#DownloadFileLink2').val();
            var urlPath = "../../Affiliation/" + DownloadFileLinkId;
            window.open(urlPath, '_blank');

        }
        function GetDownloadFileLinkAffiliate() {
            
            var DownloadFileLinkId = $('#DownloadFileLink').val();
            var urlPath = "../../Affiliation/" + DownloadFileLinkId;
            window.open(urlPath, '_blank');

        }
        function GetDownloadFileLinkForAffiliation() {
            
            var DownloadFileLinkId = $('#DownloadFileLink3').val();
            var urlPath = "../../Affiliation/" + DownloadFileLinkId;
            window.open(urlPath, '_blank');

        }

        $(".sendBtn3").click(function () {

            var Course_type = $("#CourseTypes").val();
            var Division = $("#Divisions").val();
            var District = $("#Districts").val();
            var Trade = $("#Trades").val();

            GetAllAffiliateStatus(Course_type, Division, District);
        });

        function GetAllAffiliateStatus(courseId, divisionId, districtId) {
            $.ajax({
                type: 'Get',
                url: '/Affiliation/FilterSubmittedAffiliateDetails',
                data: { courseId: courseId, divisionId: divisionId, districtId: districtId },
                success: function (data) {
                    
                    var index = 1;
                    if (data.length > 0) {
                        
                        $('#tblGridUpdateAffiliation1').DataTable().clear().draw();
                        var t = $('#tblGridUpdateAffiliation1').DataTable({
                            data: data,
                            "destroy": true,
                            "bSort": true,
                            columns: [
                                { 'data': 'iti_college', 'title': 'Slno', 'className': '' },
                                { 'data': 'MisCode', 'title': 'MIS ITI Code', 'className': 'text-left' },
                                { 'data': 'iti_college', 'title': 'Institute Name', 'className': '' },
                                { 'data': 'CourseType', 'title': 'CourseType', 'className': 'text-left' },
                                { 'data': 'Division', 'title': 'Division', 'className': 'text-left' },
                                { 'data': 'District', 'title': 'District', 'className': 'text-left' },
                                { 'data': 'StatusName', 'title': 'Status - Currently With', 'className': 'text-left' },
                                {
                                    'data': 'IsActive', 'title': 'Current Institute Status',
                                    render: function (data, type, row) {
                                        if (row.IsActive == true) {
                                            return "<input type='text' id='Active_160' value='Affiliate' class='form - control' readonly='readonly'>"
                                        }
                                        else {
                                            return "<input type='text' id='Active_160' value='De-Affiliate' class='form - control' readonly='readonly'>"
                                        }
                                    }
                                },
                                {
                                    'data': 'IsActive11', 'title': 'Requested Institute Status',
                                    render: function (data, type, row) {
                                        if (row.StatusName == " - ") {
                                            return "<input type='text' id='Active_160'  class='form - control' readonly='readonly'>"
                                        }
                                        else {
                                            if (row.IsActive1 == true) {
                                                return "<input type='text' id='Active_160' value='Affiliate' class='form - control' readonly='readonly'>"
                                            }
                                            else {
                                                return "<input type='text' id='Active_160' value='De-Affiliate' class='form - control' readonly='readonly'>"
                                            }
                                        }
                                    }
                                },
                                {
                                    'data': 'FileUploadPath',
                                    render: function (data, type, row) {

                                        return "<input type='button' class='btn btn-primary' img='' src='/Content/img/pencil2.png' id='Active_" + row.iti_college_id + "' value='View' onclick='ViewInstitutionDeatails(" + row.iti_college_id + ")'>"


                                    }
                                }

                            ]
                        });
                        t.on('order.dt search.dt', function () {
                            t.column(0, { search: 'applied', order: 'applied' }).nodes().each(function (cell, i) {
                                cell.innerHTML = i + 1;
                            });
                        }).draw();
                    }
                    else {

                        $('#tblGridUpdateAffiliation1').DataTable().clear().draw();
                        //bootbox.alert("No data found!")
                    }

                }, error: function (result) {
                    alert("Error", "something went wrong");
                }
            });
        }

        $(".sendBtn4").click(function () {

            var Course_type = $("#CourseTypes").val();
            var Division = $("#Divisions").val();
            var District = $("#Districts").val();
            var Trade = $("#Trades").val();

            GetAllAffiliateStatusForOS(Course_type, Division, District);
        });

        function GetAllAffiliateStatusForOS(courseId, divisionId, districtId) {
            $.ajax({
                type: 'Get',
                url: '/Affiliation/FilterSubmittedAffiliateDetailsForOS',
                data: { courseId: courseId, divisionId: divisionId, districtId: districtId },
                success: function (data) {
                    
                    if (data.length > 0) {
                        
                        $('#tblGridUpdateAffiliation1').DataTable().clear().draw();
                        var t = $('#tblGridUpdateAffiliation1').DataTable({
                            data: data,
                            destroy: true,
                            columns: [
                                { 'data': 'iti_college', 'title': 'Slno', 'className': '' },
                                { 'data': 'MisCode', 'title': 'MIS ITI Code', 'className': 'text-left' },
                                { 'data': 'iti_college', 'title': 'Institute Name', 'className': '' },
                                { 'data': 'CourseType', 'title': 'CourseType', 'className': 'text-left' },
                                { 'data': 'Division', 'title': 'Division', 'className': 'text-left' },
                                { 'data': 'District', 'title': 'District', 'className': 'text-left' },
                                { 'data': 'StatusName', 'title': 'Status - Currently With', 'className': 'text-left' },
                                {
                                    'data': 'IsActive', 'title': 'Current Institute Status',
                                    render: function (data, type, row) {
                                        if (row.IsActive == true) {
                                            return "<input type='text' id='Active_160' value='Affiliate' class='form - control' readonly='readonly'>"
                                        }
                                        else {
                                            return "<input type='text' id='Active_160' value='De-Affiliate' class='form - control' readonly='readonly'>"
                                        }
                                    }
                                },
                                {
                                    'data': 'IsActive1', 'title': 'Requested Institute Status',
                                    render: function (data, type, row) {
                                        if (row.StatusName == " - ") {
                                            return "<input type='text' id='Active_160'  class='form - control' readonly='readonly'>"
                                        }
                                        else {
                                            if (row.IsActive1 == true) {
                                                return "<input type='text' id='Active_160' value='Affiliate' class='form - control' readonly='readonly'>"
                                            }
                                            else {
                                                return "<input type='text' id='Active_160' value='De-Affiliate' class='form - control' readonly='readonly'>"
                                            }
                                        }
                                    }
                                },
                                {
                                    'data': 'FileUploadPath',
                                    render: function (data, type, row) {

                                        return "<input type='button' class='btn btn-primary' img='' src='/Content/img/pencil2.png' id='Active_" + row.iti_college_id + "' value='View' onclick='ViewInstitutionDeatailsOS(" + row.iti_college_id + ")'>"


                                    }
                                }

                            ]
                        });
                        t.on('order.dt search.dt', function () {
                            t.column(0, { search: 'applied', order: 'applied' }).nodes().each(function (cell, i) {
                                cell.innerHTML = i + 1;
                            });
                        }).draw();
                    }
                    else {

                        $('#tblGridUpdateAffiliation1').DataTable().clear().draw();
                        alert("No data found!")
                    }

                }, error: function (result) {
                    bootbox.alert("Error", "something went wrong");
                }
            });
        }

        $(".sendBtn5").click(function () {

            var Course_type = $("#CourseTypes").val();
            var Division = $("#Divisions").val();
            var District = $("#Districts").val();
            var Trade = $("#Trades").val();

            GetAllAffiliateStatusForAd(Course_type, Division, District);
        });

        function GetAllAffiliateStatusForAd(courseId, divisionId, districtId) {
            $.ajax({
                type: 'Get',
                url: '/Affiliation/FilterSubmittedAffiliateDetailsForAD',
                data: { courseId: courseId, divisionId: divisionId, districtId: districtId },
                success: function (data) {
                    
                    if (data.length > 0) {
                        
                        $('#tblGridUpdateAffiliation1').DataTable().clear().draw();
                        var t = $('#tblGridUpdateAffiliation1').DataTable({
                            data: data,
                            destroy: true,
                            columns: [
                                { 'data': 'iti_college', 'title': 'Slno', 'className': '' },
                                { 'data': 'MisCode', 'title': 'MIS ITI Code', 'className': 'text-left' },
                                { 'data': 'iti_college', 'title': 'Institute Name', 'className': '' },
                                { 'data': 'CourseType', 'title': 'CourseType', 'className': 'text-left' },
                                { 'data': 'Division', 'title': 'Division', 'className': 'text-left' },
                                { 'data': 'District', 'title': 'District', 'className': 'text-left' },
                                { 'data': 'StatusName', 'title': 'Status - Currently With', 'className': 'text-left' },
                                {
                                    'data': 'IsActive', 'title': 'Current Institute Status',
                                    render: function (data, type, row) {
                                        if (row.IsActive == true) {
                                            return "<input type='text' id='Active_160' value='Affiliate' class='form - control' readonly='readonly'>"
                                        }
                                        else {
                                            return "<input type='text' id='Active_160' value='De-Affiliate' class='form - control' readonly='readonly'>"
                                        }
                                    }
                                },
                                {
                                    'data': 'IsActive1', 'title': 'Requested Institute Status',
                                    render: function (data, type, row) {
                                        if (row.StatusName == " - ") {
                                            return "<input type='text' id='Active_160'  class='form - control' readonly='readonly'>"
                                        }
                                        else {
                                            if (row.IsActive1 == true) {
                                                return "<input type='text' id='Active_160' value='Affiliate' class='form - control' readonly='readonly'>"
                                            }
                                            else {
                                                return "<input type='text' id='Active_160' value='De-Affiliate' class='form - control' readonly='readonly'>"
                                            }
                                        }
                                    }
                                },
                                {
                                    'data': 'FileUploadPath',
                                    render: function (data, type, row) {

                                        return "<input type='button' class='btn btn-primary' img='' src='/Content/img/pencil2.png' id='Active_" + row.iti_college_id + "' value='View' onclick='ViewInstitutionDeatailsOS(" + row.iti_college_id + ")'>"


                                    }
                                }

                            ]
                        });
                        t.on('order.dt search.dt', function () {
                            t.column(0, { search: 'applied', order: 'applied' }).nodes().each(function (cell, i) {
                                cell.innerHTML = i + 1;
                            });
                        }).draw();
                    }
                    else {

                        $('#tblGridUpdateAffiliation1').DataTable().clear().draw();
                        bootbox.alert("No data found!")
                    }

                }, error: function (result) {
                    alert("Error", "something went wrong");
                }
            });
        }

        function ViewInstituteDeatailsADM(collegeId) {
            
            $("#DistrictWiseFilter").hide();
            $.ajax({

                type: 'Get',
                url: '/Affiliation/GetCollegeDetailsInstitute',
                data: { collegeId: collegeId },
                success: function (data) {

                    
                    if (data != null) {

                        if (data.status == "Approve" || data.status == "Published") {
                            $("#btn-sends").attr("disabled", false);
                        }
                        else {
                            $("#btn-sends").attr("disabled", true);
                        }


                        $("#CollegeId").val(collegeId);
                        $("#Affiliation_div").hide();
                        $("#Affiliation_view").show();
                        $("#tblGridUpdateAffiliation_wrapper").hide();
                        $(".text-location").text(data.location_type);
                        $(".text-nam").text(data.name_of_iti);
                        $(".text-type").text(data.type_of_iti);
                        $(".text-course_code").text(data.course_code);
                        $(".text-mis").text(data.mis_code);
                        $(".text-email").text(data.email);
                        $(".text-number").text(data.phone_number);
                        $(".text-Website").text(data.Website);
                        $(".text-AffiliationDate").text(data.date);
                        $(".text-address").text(data.address);
                        $(".text-location").text(data.location_type);
                        $(".text-division").text(data.division);
                        $(".text-district").text(data.district);
                        $(".text-taluk").text(data.taluka);
                        $(".text-constituency").text(data.constituency);
                        $(".text-build").text(data.build_up_area);
                        $(".text-geo").text(data.geo_location);

                        $(".text-css").text(data.css_code);
                        $(".text-trade").text(data.list_trades);
                        $(".text-tradeName").text(data.trade);
                        $(".text-Panchayat").text(data.panchayat);
                        $(".text-village").text(data.village);
                        $(".text-AfflOrderNo").text(data.AffiliationOrderNo);
                        $(".text-AfflOrderNoDate").text(data.order_no_date);
                        $(".text-course_name").text(data.course_name);
                        $(".text-scheme_name").text(data.scheme_name);
                        $(".text-division").text(data.division);
                        $("#DownloadFileLink2").val(data.FileUploadPath);
                        

                        $("#Downloadffiliation").empty();
                        var html = "<a class='btn btn-link' href='/Affiliation/DownloadAffiliationDoc?CollegeId=" + collegeId + "' ><img src='/Content/img/pdf_logo.png' height='40px' width='40px' /></a>"
                        $("#Downloadffiliation").append(html);


                        if (data.FileUploadPath != null && data.FileUploadPath != "") {

                            $("#DownloadFileLink2").val(data.FileUploadPath);
                        }
                        else {
                            $("#DownloadFileLink2").hide();
                            $("#Downloaddeaffiliate").hide();
                        }
                        if (data.AffiliateFilePath != null && data.AffiliateFilePath != "") {
                            $("#DownloadFileLink").val(data.AffiliateFilePath);
                        }
                        else {
                            $("#DownloadFileLink").hide();
                            $("#Downloadffiliate").hide();
                        }
                        //$(".text-pincode").text(data.geo_location);

                        $(".text-date").text(data.date);
                        $(".text-unit").text(data.no_units);
                        $(".text-shift").text(data.no_shifts);
                        $("#uploadfile").val(data.Activefilepath);
                        $(".text-ActiveDeactive").val(data.ActiveDeactive);
                        if (data.ActiveDeactive == true) {
                            $(".text-ActiveDeactive").text("Active");
                        }
                        else {
                            $(".text-ActiveDeactive").text("Deactive");
                        }

                        
                        $("#IsActive").val(data.IsActive);
                        if (data.IsActive) {

                            $("#Active").show().attr("disabled", true)
                            $("#DeActive").show().attr("disabled", false)
                            $("#DeActive").show()
                        }
                        else {
                            $("#Active").show()
                            $("#DeActive").show().attr("disabled", true)
                            $("#Active").show().attr("disabled", false)
                        }

                        var _table = $("#tblViewShift tbody");
                        _table.empty();
                        $.each(data.trades_list, function (i) {

                            var _tr = $("<tr/>");
                            _tr.append("<td>" + (i + 1) + "</td>");
                            _tr.append("<td>" + this.trade_name + "</td");
                            // _tr.append("<td>" + this.units + "</td>");
                            //_tr.append("<td>" + this.IsPPP + "</td>");
                            //_tr.append("<td>" + this.Dual_System + "</td>");
                            if (this.ISActive) {
                                _tr.append("<td>Active <input type='hidden' class='active_status' value='true' /><input type='hidden' class='shiftId' value='" + this.ITI_Trade_Shift_Id + "' /></td>");

                            }
                            else {
                                //if (this.Status == 5) {
                                //    _tr.append("<td>Pending for Approval <input type='hidden' class='active_status' value='false' /><input type='hidden' class='shiftId' value='" + this.ITI_Trade_Shift_Id + "' /></td>");
                                //}
                                //else {
                                _tr.append("<td>DeActive <input type='hidden' class='active_status' value='false' /><input type='hidden' class='shiftId' value='" + this.ITI_Trade_Shift_Id + "' /></td>");
                                // }

                            }
                            _table.append(_tr);
                        });

                        //$("#ViewFile").empty();
                        //if (data.FileUploadPath != null && data.FileUploadPath != "") {
                        //    var html = "<a class='btn btn-link' href='/Affiliation/DownloadAffiliationDoc?CollegeId=" + collegeId + "' >Download File</a>"
                        //    $("#ViewFile").append(html);
                        //}
                        
                        if (data.activeDeactiveTradeHistories.length > 0) {
                            $.each(data.activeDeactiveTradeHistories, function (i) {
                                var _tr = $("<tr/>");

                                _tr.append("<td>" + (i + 1) + "</td>");
                                _tr.append("<td>" + data.activeDeactiveTradeHistories[i].date + "</td");
                                _tr.append("<td>" + data.activeDeactiveTradeHistories[i].User + "</td>");
                                _tr.append("<td>" + data.activeDeactiveTradeHistories[i].Flow_user + "</td>");
                                _tr.append("<td>" + data.activeDeactiveTradeHistories[i].Status + "</td>");
                                _tr.append("<td>" + data.activeDeactiveTradeHistories[i].ActDeActRemarks + "</td>");


                                $("#tblHistory tbody").append(_tr);
                            });
                        }
                        else {
                            var _tr = $("<tr/>");
                            _tr.append("<td>" + "" + "</td>");
                            _tr.append("<td>" + "" + "</td>");
                            _tr.append("<td>" + "No Data Available" + "</td>");
                            _tr.append("<td>" + "" + "</td>");
                            _tr.append("<td>" + "" + "</td>");

                            $("#tblHistory tbody").append(_tr);
                        }
                        //$("#tblHistory tbody").load();

                        if (data.AffiliationDocs.length > 0) {
                            var _table = $("#tblAffiliationDoc tbody");
                            _table.empty();
                            $.each(data.AffiliationDocs, function (i) {

                                var _tr = $("<tr/>");
                                _tr.append("<td>" + (i + 1) + "</td>");
                                _tr.append("<td>" + this.AffiliationOrder_Number + "</td>");
                                _tr.append("<td>" + this.Affiliation_date.split(' ')[0] + "</td>");
                                _tr.append("<td >" + this.FileName + "</td>");
                                _tr.append("<a class='btn btn-link' href='/Affiliation/DownloadAffiliationDoc?CollegeId=" + collegeId + "' ><img src='/Content/img/pdf_logo.png' height='40px' width='40px' /></a>" + "" + "</td>");
                                // _tr.append("<td ><a class='btn btn-link' href='/Affiliation/DownloadAffiliationTradeandUnitDoc?Trade_Id=" + this.Trade_Id + "' ><img src='/Content/img/pdf_logo.png' height='40px' width='40px' /></a>" + "" + "</td>");
                                //_tr.append("<td >" + this.Status + "</td>");
                                _table.append(_tr);
                            });
                        }

                        if (data.TradeWiseAffiliationDoc.length > 0) {
                            var _table = $("#tblClgTradeAffiliationDoc tbody");
                            _table.empty();
                            $.each(data.TradeWiseAffiliationDoc, function (i) {

                                var _tr = $("<tr/>");
                                _tr.append("<td>" + (i + 1) + "</td>");
                                _tr.append("<td>" + this.Trade_Name + "</td>");
                                //_tr.append("<td>" + this.Affiliation_date.split(' ')[0] + "</td>");
                                _tr.append("<td >" + this.FileName + "</td>");
                                _tr.append("<td ><a class='btn btn-link' href='/Affiliation/DownloadAffiliationDoc?CollegeId=" + data.iti_college_id + "&Trade_Id=" + this.Trade_Id + "&shift_id=" + this.Shift + "&flag=" + this.Flag + "' ><img src='/Content/img/pdf_logo.png' height='40px' width='40px' /></a>" + "" + "</td>");
                                // _tr.append("<td ><a class='btn btn-link' href='/Affiliation/DownloadAffiliationTradeandUnitDoc?Trade_Id=" + this.Trade_Id + "' ><img src='/Content/img/pdf_logo.png' height='40px' width='40px' /></a>" + "" + "</td>");
                                //_tr.append("<td >" + this.Status + "</td>");
                                _table.append(_tr);
                            });
                        }

                    }
                    else {
                        bootbox.alert("Error occured try again")
                    }
                }
            });
        }

        function SaveAffiliateInstituteADM() {
            

            var CollegeId = $("#CollegeId").val();
            var ActiveVal = $("#IsActive").val();
            var ADRemarks = $("#Remarks").val();

            var IsValid = true;
            var uplfile = $("#uploadfile").val();
            //if (uplfile == "" || uplfile == null) {
            //    IsValid = false;
            //    bootbox.alert("pls upload a file")
            //    return IsValid;
            //    $("#uploadfile_Required").show()
            //}
            //else {
            //    $("#uploadfile_Required").hide()
            //}

            //var IsValid = true;
            //var type = $("#dd-flow").val();
            //if (type == "" || type == "0" || type == null) {
            //    IsValid = false;
            //    bootbox.alert("Select flow field")
            //    $("#dd-flow_Required").show()
            //    return IsValid;
            //}
            //else {
            //    $("#dd-flow_Required").hide()

            //}

            var IsValid = true;
            if (ADRemarks == "" || ADRemarks == null) {
                IsValid = false;
                bootbox.alert("Pls enter Remarks")
                $("#Remarks_Required").show();
                return IsValid;
            }
            else {
                $("#Remarks_Required").hide();

            }

            var STATUS = $("#dd-status").val();
            // fileData.append("STATUS", STATUS);



            //var fileUpload = $("#uploadfile").get(0);//$('#ActiveDeactiveinsertUpdate-Add').get(0);
            //var files = fileUpload.files;
            var fileData = new FormData();
            //for (var i = 0; i < files.length; i++) {
            //    fileData.append("ImageFile", files[i]);
            //}

            var CollegeId = CollegeId;
            //var val = $(thd).val();


            //IsValid = true;
            if (IsValid == true) {
                
                fileData.append("ClgId", CollegeId);


                // var IsActive = '';
                var IsActive = $("#Active").val();
                
                var IsActive = $("DeActive").val();
                

                if (IsActive == 'Active') {
                    
                    IsActive = $("#Active").val();

                }
                else {
                    IsActive = $("#DeActive").val();
                }

                var a = $("#dd-flow").val();
                //alert(a);
                fileData.append("Flowid", a);
                fileData.append("IsActive", ActiveVal);

                fileData.append("ActDeActRemarks", ADRemarks);

                if (IsActive == 'Active') {
                    
                    fileData.append("IsActive", true);
                }
                else {
                    fileData.append("IsActive", false);
                }
                if (IsValid) {
                    bootbox.confirm("<br><br>Are you sure you want to Send Institute Details For Correction/Clarification For Case Worker  ?", function (confirmed) {
                        if (confirmed) {
                            $.ajax({
                                type: 'POST',
                                url: '/Affiliation/InstituteDeaffiliateDeatils',
                                contentType: false, // Not to set any content header
                                //processData: false, // Not to process data
                                //async: false,
                                //contentType: 'application/json',
                                // contentType: 'application/json; charset=utf-8',
                                processData: false,
                                // dataType: 'json',
                                data: fileData,
                                success: function (result) {

                                    if (result) {
                                        GetAllInstituteDetailsForAdm();
                                        bootbox.alert("<br><br> Institute details sent to case worker for correction/clarification successfully")

                                        $("#Remarks").val('');
                                        $("#uploadfile").val('');
                                        //   GetAllInstituteDetails();
                                        $("#tblGridUpdateAffiliation_wrapper").show();
                                        $("#Affiliation_view").hide();
                                    }
                                    else {
                                        bootbox.alert("failed")
                                    }
                                }
                            });
                        }
                    });


                }
            }

        }

        function GetAllInstituteDetailsForAdm() {
            
            $("#Affiliation_view").hide();
            $("#tblGridUpdateAffiliation_wrapper").show();
            $.ajax({
                type: 'Get',
                url: '/Affiliation/GetInstituteDetailsForAdmin',
                success: function (data) {

                    var index = 1;
                    if (data.length > 0) {

                        var t = $('#tblGridUpdateAffiliation1').DataTable({
                            data: data,
                            "destroy": true,
                            "bSort": true,
                            columns: [
                                { 'data': 'Slno', 'title': 'Slno', 'className': '' },
                                { 'data': 'Pubdate', 'title': 'MIS ITI Code', 'className': 'text-left' },
                                { 'data': 'course_name', 'title': 'Name of ITI', 'className': '' },
                                { 'data': 'mis_code', 'title': 'CourseType', 'className': 'text-left' },
                                { 'data': 'name_of_iti', 'title': 'Division', 'className': 'text-left' },
                                { 'data': 'address', 'title': 'District', 'className': 'text-left' },
                                { 'data': 'district', 'title': 'Status - Currently With', 'className': 'text-left' },
                                { 'data': 'division', 'title': 'District', 'className': 'text-left' },
                                { 'data': 'status', 'title': 'Status - Currently With', 'className': 'text-left' },
                                {
                                    'data': 'IsActive', 'title': 'Current Institute Status',
                                    render: function (data, type, row) {
                                        if (row.IsActive == true) {
                                            return "<input type='text' id='Active_160' value='Affiliate' class='form - control' readonly='readonly'>"
                                        }
                                        else {
                                            return "<input type='text' id='Active_160' value='De-Affiliate' class='form - control' readonly='readonly'>"
                                        }
                                    }
                                },

                                {
                                    'data': 'FileUploadPath',
                                    render: function (data, type, row) {

                                        return "<input type='button' class='btn btn-primary' img='' src='/Content/img/pencil2.png' id='Active_" + row.iti_college_id + "' value='View' onclick='ViewInstituteDeatailsADM(" + row.iti_college_id + ")'>"


                                    }
                                }

                            ],
                            "columnDefs": [{
                                "render": function (data, type, full, meta) {

                                    return index++;
                                },
                                "targets": 0
                            }],
                        });
                        t.on('order.dt search.dt', function () {
                            t.column(0, { search: 'applied', order: 'applied' }).nodes().each(function (cell, i) {
                                cell.innerHTML = i + 1;
                            });
                        }).draw();
                    }
                    else {
                        //alert("No data found!")
                        $('#tblGridUpdateAffiliation1').DataTable().clear().draw();
                    }

                }, error: function (result) {
                    bootbox.alert("Error", "something went wrong");
                }
            });
            $("#DistrictWiseFilter").show();
        }

        function ViewInstitutionDeatailsVW(collegeId) {
            
            $("#DistrictWiseFilter").hide();
            $('#publishbutton').hide()
            $.ajax({

                type: 'Get',
                url: '/Affiliation/GetCollegeDetailsInstitute',
                data: { collegeId: collegeId },
                success: function (data) {
                    
                    if (data != null) {

                        $("#CollegeId").val(collegeId);
                        $("#Affiliation_div").hide();
                        $("#Affiliation_view1").show();
                        $("#tblGridUpdateAffiliation2").hide();
                        $("#tblGridUpdateAffiliation1_wrapper").hide();
                        $("#tblGridUpdateAffiliation2_filter").hide();
                        $("#tblGridUpdateAffiliation2_length").hide();
                        $("#tblGridUpdateAffiliation2_paginate").hide();
                        $("#tblGridUpdateAffiliation2_info").hide();


                        $(".text-location").text(data.location_type);
                        $(".text-nams").text(data.name_of_iti);
                        $(".text-type").text(data.type_of_iti);
                        $(".text-course_code").text(data.course_code);
                        $(".text-mis").text(data.mis_code);
                        $(".text-email").text(data.email);
                        $(".text-number").text(data.phone_number);
                        $(".text-Website").text(data.Website);
                        $(".text-AffiliationDate").text(data.date);
                        $(".text-address").text(data.address);
                        $(".text-location").text(data.location_type);
                        $(".text-division").text(data.division);
                        $(".text-district").text(data.district);
                        $(".text-taluk").text(data.taluka);
                        $(".text-constituency").text(data.constituency);
                        $(".text-build").text(data.build_up_area);
                        $(".text-geo").text(data.geo_location);

                        $(".text-css").text(data.css_code);
                        $(".text-trade").text(data.list_trades);
                        $(".text-tradeName").text(data.trade);
                        $(".text-Panchayat").text(data.panchayat);
                        $(".text-village").text(data.village);
                        $(".text-AfflOrderNo").text(data.AffiliationOrderNo);
                        $(".text-AfflOrderNoDate").text(data.order_no_date);
                        $(".text-course_name").text(data.course_name);
                        $(".text-scheme_name").text(data.scheme_name);
                        $(".text-division").text(data.division);

                        
                        //$(".DeaffiliateDoc").text("Deffiliate Supporting Document");
                        //$(".AffiliateDoc").text("Affiliate Supporting Document");
                        //$(".Affiliationdoc").text("Affiliation Supporting Document");
                        //$(".text-pincode").text(data.geo_location);
                        // $("#DownloadFileLink2").val(data.FileUploadPath);
                        //if (data.FileUploadPath == null) {
                        //    $("#Downloaddeaffiliate").hide();
                        //    $(".DeaffiliateDoc").hide();
                        //}
                        //else {
                        //    $("#Downloaddeaffiliate").show();
                        //    $(".DeaffiliateDoc").show();
                        //}
                        //$("#DownloadFileLink").val(data.AffiliateFilePath);
                        // $("#Downloadffiliation").empty();

                        //var html = "<a class='btn btn-link' href='/Affiliation/DownloadAffiliationDoc?CollegeId=" + collegeId + "' ><img src='/Content/img/pdf_logo.png' height='40px' width='40px' /></a>"
                        //$("#Downloadffiliation").append(html);




                        //if (data.AffiliateFilePath == null) {
                        //    $("#Downloadffiliate").hide();
                        //    $(".AffiliateDoc").hide();
                        //}
                        //else {
                        //    $("#Downloadffiliate").show();
                        //    $(".AffiliateDoc").show();
                        //}
                        $(".text-date").text(data.date);
                        $(".text-unit").text(data.no_units);
                        $(".text-shift").text(data.no_shifts);
                        $("#uploadfile").val(data.Activefilepath);
                        $(".text-ActiveDeactive").val(data.ActiveDeactive);
                        if (data.ActiveDeactive == true) {
                            $(".text-ActiveDeactive").text("Active");
                        }
                        else {
                            $(".text-ActiveDeactive").text("Deactive");
                        }

                        
                        $("#IsActive").val(data.IsActive);
                        if (data.IsActive) {

                            $("#Active").show().attr("disabled", true)
                            $("#DeActive").show().attr("disabled", false)
                            $("#DeActive").show()
                        }
                        else {
                            $("#Active").show()
                            $("#DeActive").show().attr("disabled", true)
                            $("#Active").show().attr("disabled", false)
                        }

                        var _table = $("#tblViewShift tbody");
                        _table.empty();
                        var IsActiveTrueVal = 0;
                        $.each(data.trades_list, function (i) {
                            
                            var _tr = $("<tr/>");
                            _tr.append("<td>" + (i + 1) + "</td>");
                            _tr.append("<td>" + this.trade_name + "</td");
                            // _tr.append("<td>" + this.units + "</td>");
                            //_tr.append("<td>" + this.IsPPP + "</td>");
                            //_tr.append("<td>" + this.Dual_System + "</td>");
                            if (this.ISActive) {
                                IsActiveTrueVal = 1;
                                _tr.append("<td>Active <input type='hidden' class='active_status' value='true' /><input type='hidden' class='shiftId' value='" + this.ITI_Trade_Shift_Id + "' /></td>");

                            }
                            else {
                                //if (this.Status == 5) {
                                //    _tr.append("<td>Pending for Approval <input type='hidden' class='active_status' value='false' /><input type='hidden' class='shiftId' value='" + this.ITI_Trade_Shift_Id + "' /></td>");
                                //}
                                //else {
                                _tr.append("<td>DeActive <input type='hidden' class='active_status' value='false' /><input type='hidden' class='shiftId' value='" + this.ITI_Trade_Shift_Id + "' /></td>");
                                // }

                            }
                            _table.append(_tr);
                        });

                        if (IsActiveTrueVal == 1) {
                            $("#btn-send").attr("disabled", true);
                        }
                        else if (data.flow_id == null || data.flow_id == 8) {
                            $("#btn-send").attr("disabled", false);
                        }
                        else {
                            $("#btn-send").attr("disabled", true);
                        }

                        
                        if (data.activeDeactiveTradeHistories.length > 0) {
                            $.each(data.activeDeactiveTradeHistories, function (i) {
                                var _tr = $("<tr/>");

                                _tr.append("<td>" + (i + 1) + "</td>");
                                _tr.append("<td>" + data.activeDeactiveTradeHistories[i].date + "</td");
                                _tr.append("<td>" + data.activeDeactiveTradeHistories[i].User + "</td>");
                                _tr.append("<td>" + data.activeDeactiveTradeHistories[i].Flow_user + "</td>");
                                _tr.append("<td>" + data.activeDeactiveTradeHistories[i].Status + "</td>");
                                _tr.append("<td>" + data.activeDeactiveTradeHistories[i].ActDeActRemarks + "</td>");


                                $("#tblHistory tbody").append(_tr);
                            });
                        }
                        else {
                            var _tr = $("<tr/>");
                            _tr.append("<td>" + "" + "</td>");
                            _tr.append("<td>" + "" + "</td>");
                            _tr.append("<td>" + "No Data Available" + "</td>");
                            _tr.append("<td>" + "" + "</td>");
                            _tr.append("<td>" + "" + "</td>");

                            $("#tblHistory tbody").append(_tr);
                        }
                        //$("#tblHistory tbody").load();

                        if (data.AffiliationDocs.length > 0) {
                            var _table = $("#tblAffiliationDoc tbody");
                            _table.empty();
                            $.each(data.AffiliationDocs, function (i) {

                                var _tr = $("<tr/>");
                                _tr.append("<td>" + (i + 1) + "</td>");
                                _tr.append("<td>" + this.AffiliationOrder_Number + "</td>");
                                _tr.append("<td>" + this.Affiliation_date.split(' ')[0] + "</td>");
                                _tr.append("<td >" + this.FileName + "</td>");
                                _tr.append("<td ><a class='btn btn-link' href='/Affiliation/DownloadAffiliationDoc?CollegeId=" + data.iti_college_id + "&Trade_Id=" + this.Trade_Id + "&shift_id=" + this.Shift + "&flag=" + this.Flag + "' ><img src='/Content/img/pdf_logo.png' height='40px' width='40px' /></a>" + "" + "</td>");
                                // _tr.append("<td ><a class='btn btn-link' href='/Affiliation/DownloadAffiliationTradeandUnitDoc?Trade_Id=" + this.Trade_Id + "' ><img src='/Content/img/pdf_logo.png' height='40px' width='40px' /></a>" + "" + "</td>");
                                //_tr.append("<td >" + this.Status + "</td>");
                                _table.append(_tr);
                            });
                        }

                        if (data.TradeWiseAffiliationDoc.length > 0) {
                            var _table = $("#tblClgTradeAffiliationDoc tbody");
                            _table.empty();
                            $.each(data.TradeWiseAffiliationDoc, function (i) {

                                var _tr = $("<tr/>");
                                _tr.append("<td>" + (i + 1) + "</td>");
                                _tr.append("<td>" + this.Trade_Name + "</td>");
                                //_tr.append("<td>" + this.Affiliation_date.split(' ')[0] + "</td>");
                                _tr.append("<td >" + this.FileName + "</td>");
                                _tr.append("<td ><a class='btn btn-link' href='/Affiliation/DownloadAffiliationDoc?CollegeId=" + data.iti_college_id + "&Trade_Id=" + this.Trade_Id + "&shift_id=" + this.Shift + "&flag=" + this.Flag + "' ><img src='/Content/img/pdf_logo.png' height='40px' width='40px' /></a>" + "" + "</td>");
                                // _tr.append("<td ><a class='btn btn-link' href='/Affiliation/DownloadAffiliationTradeandUnitDoc?Trade_Id=" + this.Trade_Id + "' ><img src='/Content/img/pdf_logo.png' height='40px' width='40px' /></a>" + "" + "</td>");
                                //_tr.append("<td >" + this.Status + "</td>");
                                _table.append(_tr);
                            });
                        }

                    }
                    else {
                        bootbox.alert("Error occured try again")
                    }
                }
            });
        }

        function PublishAffiliateDeaffiliateInstitute() {
            
            $("#DistrictWiseFilter").show();
            
            var IsValid = true;
            $('#tblGridUpdateAffiliation2').DataTable().destroy();
            $('#tblGridUpdateAffiliation2').DataTable({ "paging": false }).draw(false);
            var _Publish_table = $("#tblGridUpdateAffiliation2 tbody");
            var sendObj = [];


            _Publish_table.find("tr").each(function (len) {
                //t.destroy();
                var $tr = $(this);
                var StatusName = $tr.find(".StatusName").val();
                var iti_college_id = $tr.find(".iti_college_id").val();


                var obj = {

                    StatusName: StatusName,
                    iti_college_id: iti_college_id,


                };
                sendObj.push(obj);
            });
            var finalObj = JSON.stringify({ Approvedinst_list: sendObj });
            $('#tblGridUpdateAffiliation2').DataTable().destroy();
            $('#tblGridUpdateAffiliation2').DataTable({ "paging": true }).draw(false);
            if (IsValid) {

                bootbox.confirm("<br><br>Are you sure you want to publish the De-Affiliate/Affiliate Institute(s) ?", function (confirmed) {
                    if (confirmed) {
                        


                        if (IsValid) {
                            $.ajax({
                                type: 'POST',
                                url: '/Affiliation/PublishAffiliateDeaffiliateInstitute',
                                //contentType: false, // Not to set any content header

                                dataType: 'json',
                                contentType: 'application/json; charset=utf-8',
                                // dataType: 'json',
                                data: finalObj,
                                success: function (result) {

                                    if (result) {

                                        bootbox.alert("De-Affiliate/Affiliate Institute(s) details published successfully")
                                        
                                        fnRefreshScreenDataDeaffiliate();
                                        $("#Remarks").val('');
                                        $("#uploadfile").val('');
                                        //GetAllActiveDeactiveRequestDetails();
                                        $("#tblGridUpdateAffiliation_wrapper").show();
                                        $("#Affiliation_view").hide();
                                    }
                                    else {
                                        bootbox.alert("failed")
                                    }
                                }
                            });
                        }
                    }
                });
            }
        }

        function fnRefreshScreenDataDeaffiliate() {
            var url = '/Affiliation/DeaffiliateInstitute';
            window.location.replace(url);
        }
    </script>
    <script src="~/Content/js/select2.min.js"></script>
    @*<script src="~/Scripts/ActiveandDeactive/activedeactive.js"></script>*@
    @Scripts.Render("~/bundles/affiliationMainJs")
    @Scripts.Render("~/bundles/DataTable")

    <script>
        $('.tab-3').tab('show');
        $('.tab-2').tab('show');
        $('.tab-1').tab('show');
        clicked = false;
        $(document).ready(function () {
            var tblGridSeatAvailability = $('#tblGridUpdateAffiliation1').DataTable();
            tblGridSeatAvailability.on('order.dt arch.dt', function () {
                tblGridSeatAvailability.column(0, { search: 'applied', order: 'applied' }).nodes().each(function (cell, i) {
                    cell.innerHTML = i + 1;
                });
            }).draw();
            
           
        });

        $(document).ready(function () {
            var tblGridSeatAvailability = $('#tblGridUpdateAffiliation2').DataTable();
            tblGridSeatAvailability.on('order.dt arch.dt', function () {
                tblGridSeatAvailability.column(0, { search: 'applied', order: 'applied' }).nodes().each(function (cell, i) {
                    cell.innerHTML = i + 1; "clearView()"
                });
            }).draw();
        });

        function clearView() {
            
            $("#tblGridUpdateAffiliation_wrapper").show(); $("#Affiliation_view").hide(); $("#Remarks_Required").hide(); $("#uploadfile_Required").hide(); $("#uploadfile").val(""); $("#Remarks").val(""); $('#tblHistory tbody').empty(); $("#DistrictWiseFilter").show(""); $('#tblClgTradeAffiliationDoc tbody').empty(); /*$("#btn-sends").val(""); $("#btn-send").prop()*/;
        }

        function ExcelExportTentative() {
            
            var today = new Date();
            var dd = String(today.getDate()).padStart(2, '0');
            var mm = String(today.getMonth() + 1).padStart(2, '0');
            var yyyy = today.getFullYear();
            today = dd + '/' + mm + '/' + yyyy;
            $('#tblGridUpdateAffiliation2').DataTable().destroy();
            $('#tblGridUpdateAffiliation2').DataTable({ "paging": false }).draw(false);
            $("#tblGridUpdateAffiliation2").table2excel({
                filename: "View Affiliate/Deaffiliate Institute" + today + ".xls",
            });
            $('#tblGridUpdateAffiliation2').DataTable().destroy();
            $('#tblGridUpdateAffiliation2').DataTable({ "paging": true }).draw(false);
        }
    </script>
    <script src="~/Scripts/table2excel.js"></script>




