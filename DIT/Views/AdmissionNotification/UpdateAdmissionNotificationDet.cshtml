

@model Models.Admission.AdmissionNotification
@{
    Layout = null;

    //int sno = 1;
}
<div>
    <div class="content">
        <input type="hidden" value="@Model.Admission_Notif_Id" name="Exam_Notif_Id" />
        <input type="hidden" value="@Model.Exam_Notif_Number" name="Exam_Notif_Number" />
        <div class="container" style="background-color:white;box-shadow: 0 2px 4px rgba(0,0,0,0.6);margin-top:20px; padding:20px;">
            <div class="row">
                <div class="col-lg-12">
                    <h4 class="headetitle">Upload Exam Attendance Details</h4>
                    <br />
                    <br />
                    <div class="row" id="tableGrid">
                        <table class="table table-bordered table-hover text-center " id="AdmissionNotificationTable"></table>
                            @*<table class="table table-bordered table-hover text-center " style="color:white; background-color:aliceblue" id="tblGrid1">
                                <thead>
                                    <tr class="text-center" style="color:black">
                                        <th>SlNo.</th>
                                        <th>Course Type</th>
                                        <th style="width:-550px;">Name of the Department</th>
                                        <th>Notification Number</th>
                                        <th>Notification Description</th>
                                        <th>Date and Time</th>
                                        <th>Status</th>
                                        <th style="width:250px;">Action</th>
                                    </tr>
                                </thead>
                                <tbody style="color:Black;">
                                    <input type="hidden" value="@(Model.slno=1)" />
                                    @foreach (var item in Model.GetUpdateNotifDet)
                                    {
                                        <tr>
                                            <td>@(Model.slno++)</td>
                                            
                                            <td>@item.CourseTypeName</td>
                                            <td>@item.DeptName</td>
                                            <td>@item.Exam_Notif_Number</td>
                                            <td>@item.Exam_Notif_Desc</td>
                                            <td>@item.Exam_notif_date.ToString("dd/MM/yyyy")</td>
                                            <td>@item.exam_notif_status_desc</td>

                                            <td>
                                                @if (item.StatusId == 110)
                                                {
                                                    if (item.login_id == 1)
                                                    {
                                                        <a class="btn btn-primary btn-xs" id="sendBtn" onclick="viewAdmissionNotificationDetails(@item.Admission_Notif_Id)">View</a>
                                                        <a class="btn btn-primary btn-xs" id="sendBtn" onclick="PublishDetails(@item.Admission_Notif_Id)">Publish</a>
                                                    }
                                                    else
                                                    {
                                                        <a class="btn btn-primary btn-xs" id="sendBtn" onclick="viewAdmissionNotificationDetails(@item.Admission_Notif_Id)">View</a>
                                                    }
                                                }
                                                else if (item.StatusId == 100 || item.StatusId == 102 || item.StatusId == 108)
                                                {

                                                    <a class="btn btn-primary btn-xs" id="sendBtn" onclick="viewAdmissionNotificationDetails(@item.Admission_Notif_Id)">View</a>
                                                    <a class=" btn btn-primary btn-xs" href='@Url.Action("CreateAdmissionNotification", "AdmissionNotification", new { NotificationId = item.Admission_Notif_Id})'>Edit</a>
                                                }
                                                else
                                                {
                                                    <a class="btn btn-primary btn-xs" id="sendBtn" onclick="viewAdmissionNotificationDetails(@item.Admission_Notif_Id)">View</a>
                                                }
                                            </td>
                                        </tr>
                                    }
                                </tbody>
                            </table>*@
                    </div>
                    <div class="row" style="margin-left:10px;" id="ViewDetailsDiv">
                        <div class="row">
                            <span style="display:none" id="id"></span>

                            <div class="col-lg-2"><label>Course Type:</label></div>
                            <div class="col-lg-2">
                                <span id="course"></span>
                            </div>
                            <div class="col-lg-2"><label>Name of the Department:</label></div>
                            <div class="col-lg-2">
                                <span id="dept"></span>
                            </div>
                            <div class="col-lg-2"><label>Notification Number:</label></div>
                            <div class="col-lg-2">
                                <span id="notifynum"></span>
                            </div>
                        </div>

                        <br /><br />
                        <div class="row">

                            <div class="col-lg-2"><label>Notification Type:</label></div>
                            <div class="col-lg-2">
                                <span id="desc1"></span>
                            </div>
                            <div class="col-lg-2"><label>Date and Time:</label></div>
                            <div class="col-lg-2">
                                <span id="datenotify"></span>
                            </div>
                            <div class="col-lg-2"><label>Status</label></div>
                            <div class="col-lg-2">
                                <span id="statusdesc"></span>
                            </div>
                        </div>
                        <br /><br />
                        <div class="row">

                            <div class="col-lg-2"><label>Notification pending with:</label></div>
                            <div class="col-lg-2">
                                <span id="RecordLevel"></span>
                            </div>
                        </div>
                        <br /><br />
                        <div class="row">

                        </div>

                        <br /><br />
                        <div class="row">
                            <div class=" col-lg-offset-4 col-lg-2">
                                <a style="text-align:center; float:initial" class="btn btn-primary" onclick="GetClientReport1()">View Notification Pdf</a>
                            </div>
                            <div class="col-lg-4">
                                <a style="text-align:center; float:initial" class="btn btn-primary" onclick="GetCommentTable()">View Comments</a>
                            </div>
                        </div>
                        <br /><br />
                        <div class="row">
                            <div class="col-lg-offset-1 col-lg-2">
                                Remarks
                            </div>

                            <div class="col-lg-6">
                                <input type="text" multiple style="height:auto;" id="remarks" class="form-control" />
                            </div>
                        </div>
                        <br />
                        <div class="row">
                            <div class="col-lg-offset-1 col-lg-2">
                                Forward To
                            </div>
                            <div class="col-lg-2">
                                <select class="form-control" id="users"></select>
                                <span id="spnselectdropdown" class="text-danger" style="display:none;">Please  Select Hierarcy level</span>
                            </div>
                            <div class="col-lg-7">
                                <a class=" btn btn-primary" id="sendBtn1" onclick="ForwardAdmissionNotification()">Forward</a>
                                <a class=" btn btn-primary" id="sendBtn3" onclick="ApproveAdmissionNotification()">Approve</a>
                                <a class=" btn btn-primary" id="sendBtnchanges" onclick="ChangesAdmissionNotification()">Changes/Modification</a>
                                <a class=" btn btn-primary" id="CancelBtn">Cancel</a>
                            </div>
                        </div>
                    </div>
                    <div class="modal fade" id="RemarksCommentsModal" role="dialog">
                        <div class="modal-dialog modal-xl" style="width: 60%; margin: 30px auto; padding: 2px;">
                            <div class="modal-content" style="padding:15px;">
                                <div class="modal-header">
                                    <h4 class="modal-title">Remark Details</h4>
                                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                                </div>
                                <table class="table table-striped table-hover text-center shadow clswidth" id="CommentsTable" style="width:100% !important" border="1" align="center"></table>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-default" data-dismiss="modal" style="width: 20%;">OK</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>    
    function GetClientReport() {
        var urlPath = "../../Content/Template/Notification_" + NotifId + ".pdf";
        window.open(urlPath, '_blank');
    }

    //function PublishDetails(id, status) {
    //    $.ajax({
    //        type: "Get",
    //        url: "/Admission/PublishNotification",
    //        dataType: 'json',
    //        data: {
    //            notificationId: id
    //        },
    //        success: function (response) {
    //            if (response == true) {
    //                var _msg = "Published  Successfully";
    //                bootbox.alert({ message: _msg, callback: function () { window.location.href = window.location.href; } });
    //            }
    //            else {
    //                var _msg = "Fail to send";
    //                bootbox.alert(_msg);
    //            }
    //        }, error: function (e) {
    //            var _msg = "Something went wrong.";
    //            bootbox.alert(_msg);
    //            $("#preloder, .loader").hide();
    //        }
    //    });
    //}

</script>
@*<script type="text/javascript">
        var selectedTab = '@Model.selectTab';
        var NotifId = '@Model.Exam_Notif_Number';


</script>*@
