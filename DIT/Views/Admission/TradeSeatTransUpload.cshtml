@model Models.Admission.MasterDataEntry.TableDetails

@{
    ViewBag.Title = "TradeSeatTransUpload";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<style>
    .headetitle {
        text-align: center;
        background-color: cornflowerblue;
        color: white;
        border-radius: 5px;
        height: 35px;
    }
    button {
        background-color: #5A8CD3;
        color: white;
    }

    .content-box-gray .content {
        overflow: hidden;
        padding: 10px;
        font-size: 15px;
        border-bottom-left-radius: 5px;
        border-bottom-right-radius: 5px;
        border: 1px solid gray;
        color: #3385FF;
    }

    .content-box-gray .title {
        height: 50px;
        line-height: 30px;
        border-top-left-radius: 5px;
        border-top-right-radius: 5px;
        /*background: #5A8CD3;*/
        font-size: 18px;
        font-weight: bold;
        font-family: verdana;
        display: block;
        color: white;
        display: block;
        padding: 10px;
        border: 1px solid gray;
        border-bottom: none;
    }

    .tox-statusbar {
        visibility: hidden;
    }

    .modal-dialog {
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
    }

    .modal-content {
        height: auto;
        min-height: 100%;
        border-radius: 0;
    }
</style>
<head>

    <script type="text/javascript">
        tinymce.init({
            selector: 'textarea',
            //width: 1520,
            height: 500,
            plugins: 'table',
        });

    </script>
</head>
<br /><br /><br />

<h4>
    <ul class="nav nav-tabs">
        <li class="active">
            <a href="#tab_1" data-toggle="tab">Master data entry of seat availability</a>
        </li>
        <li>
            <a href="#tab_2" data-toggle="tab">Update seat availability</a>
        </li>
        <li>
            <a href="#tab_3" data-toggle="tab">View seat availability</a>
        </li>
    </ul>
</h4>

<br />

<div class="tab-content">
    <div class="tab-pane fade in active" id="tab_1">
        <div class="container" style="background-color:white;box-shadow: 0 2px 4px rgba(0,0,0,0.6);margin-top:20px; padding:20px;">
            <div class="row">
                <div class="col-lg-12">

                    <h4 class="headetitle">Master data of seat availability</h4>
                    <br /><br />
                    @using (Html.BeginForm("Upload", "Admission", new { from = 1 }, FormMethod.Post, new { enctype = "multipart/form-data" }))
                    {
                        <br />
                        <div class="row">
                            <div class="col-sm-3"></div>
                            <div class="col-sm-2">
                                <label for="CourseTypes">Choose Course Type :</label>
                            </div>
                            <div class="col-sm-3">
                                <select class="form-control" id="CourseTypes"> <option value="choose">choose</option></select>
                            </div>
                            @*<div class="col-sm-2">
                                    <input type="button" class="btn btn-primary" id="Upload" name="Upload" value="Submit" />
                                </div>*@
                        </div>
                        <br />
                        <div class="row">
                            <div class="col-md-3"></div>
                            <div class="col-md-2">
                                <div class="text-right">
                                    <label for="UploadedFile">Upload Excel File :</label>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <input type="file" accept=".Xls, .Xlsx" class="form-control" id="UploadedFile" name="UploadedFile" />
                            </div>
                            <div class="col-md-2">
                                <input type="submit" id="submit" class="btn btn-primary" name="Submit" value="Load Data" />
                            </div>
                        </div>
                    }
                    <div class="row">
                        @*<div class="col-md-12"><br />
                                @if (Model.Table != null)
                                {
                                    <div class="row p-3" id="RRFileUploadMain">
                                        <div class="col-lg-12">
                                            <div class="">
                                                <div class="row">
                                                    <div class="col-sm-3">
                                                        <label for="CourseTypes">Choose Course Type :</label>
                                                    </div>
                                                    <div class="col-sm-6">
                                                        <select class="form-control" id="CourseTypes"> <option value="choose">choose</option></select>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <input type="button" class="btn btn-primary" id="Upload" name="Upload" value="Submit" />
                                                    </div><br />
                                                    <br />
                                                </div>
                                                <div class="card-body" style="width: 500px;overflow:hidden;">
                                                    <div class="row">
                                                        <table cellpadding="5" id="RRDetailsList" class="table table-hover table-bordered">
                                                            <thead>
                                                                <tr>
                                                                    @foreach (System.Data.DataColumn col in Model.Table.Columns)
                                                                    {
                                                                        <th>@col.Caption</th>
                                                                    }
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                @foreach (System.Data.DataRow row in Model.Table.Rows)
                                                                {
                                                                    <tr>
                                                                        @foreach (var cell in row.ItemArray)
                                                                        {
                                                                            <td>@cell.ToString()</td>
                                                                        }
                                                                    </tr>
                                                                }
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                }
                            </div>*@
                        @*<div class="col-md-1"></div>*@
                        @*<div class="col-md-5">
                                @if (Model.Table1 != null)
                                {
                                    <div class="row p-3" id="FileUpload">
                                        <div class="col-lg-12">
                                            <div class="">
                                                <div class="row">
                                                    <div class="card shadow">
                                                        <h5 style="color:red;">
                                                            This Excel file is not satisfying the condition, Division Id,DistrictCode,Institute Id,Trade Id,Seats per unit,Unit,govt/ GIA seats,
                                                            PPP Seats,IMC/Private/Management Seats and Shift cost must be number
                                                        </h5>
                                                    </div>
                                                    <br />
                                                </div>
                                                <div class="card-body">
                                                    <div class="row">
                                                        <table cellpadding="5" id="RRDetailsList" class="table table-hover table-bordered">
                                                            <thead>
                                                                <tr>
                                                                    @foreach (System.Data.DataColumn col in Model.Table1.Columns)
                                                                    {
                                                                        <th>@col.Caption</th>
                                                                    }
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                @foreach (System.Data.DataRow row in Model.Table1.Rows)
                                                                {
                                                                    <tr>
                                                                        @foreach (var cell in row.ItemArray)
                                                                        {
                                                                            <td>@cell.ToString()</td>
                                                                        }
                                                                    </tr>
                                                                }
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                }
                            </div>*@
                    </div>
                </div>
            </div>
            <div class="row">

                <div class="col-md-12">
                    <br />
                    @if (Model.Table != null)
                    {
                        <div class="row p-3" id="RRFileUploadMain">
                            <div class="row">
                                <div class="col-lg-5"></div>
                                <div class="col-lg-2">
                                    <input type="button" class="btn btn-primary" id="Upload" name="Upload" value="Upload File" />
                                </div>
                                <div class="col-lg-5"></div>
                            </div>
                            <div class="col-lg-12">
                                <div class="">
                                    @*<div class="row">
                                            <div class="col-sm-3"></div>
                                            <div class="col-sm-2">
                                                <label for="CourseTypes">Choose Course Type :</label>
                                            </div>
                                            <div class="col-sm-3">
                                                <select class="form-control" id="CourseTypes"> <option value="choose">choose</option></select>
                                            </div>
                                            <div class="col-sm-2">
                                                <input type="button" class="btn btn-primary" id="Upload" name="Upload" value="Submit" />
                                            </div>
                                            <div class="col-sm-2"></div><br />
                                            <br />
                                        </div>*@
                                    <br />
                                    <div class="card-body" style="overflow:scroll;height:500px;">
                                        <div class="row">
                                            <table cellpadding="5" id="RRDetailsList" class="table table-hover table-bordered" style="margin-left:15px;">
                                                <thead>
                                                    <tr>
                                                        @foreach (System.Data.DataColumn col in Model.Table.Columns)
                                                        {
                                                            <th>@col.Caption</th>
                                                        }
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    @foreach (System.Data.DataRow row in Model.Table.Rows)
                                                    {
                                                        <tr>
                                                            @foreach (var cell in row.ItemArray)
                                                            {
                                                                <td>@cell.ToString()</td>
                                                            }
                                                        </tr>
                                                    }
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    }
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <br />
                    @if (Model.Table1 != null)
                    {
                        <div class="row p-3" id="FileUpload">
                            <div class="col-lg-12">
                                <div class="">
                                    <div class="row">
                                        <div class="card shadow">
                                            <h5 style="color:red;">
                                                This Excel file is not satisfying the condition, Division Code,DistrictCode,Institute Id,Trade Code,Seats per unit,Unit,govt/ GIA seats,
                                                PPP Seats,IMC/Private/Management Seats and Shift cost must be number
                                            </h5>
                                        </div>
                                        <br />
                                    </div>
                                    <div class="card-body" style="overflow:scroll;height:500px;">
                                        <div class="row">
                                            <table cellpadding="5" id="RRDetailsList" class="table table-hover table-bordered" style="margin-left:15px;">
                                                <thead>
                                                    <tr>
                                                        @foreach (System.Data.DataColumn col in Model.Table1.Columns)
                                                        {
                                                            <th>@col.Caption</th>
                                                        }
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    @foreach (System.Data.DataRow row in Model.Table1.Rows)
                                                    {
                                                        <tr>
                                                            @foreach (var cell in row.ItemArray)
                                                            {
                                                                <td>@cell.ToString()</td>
                                                            }
                                                        </tr>
                                                    }
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    }
                </div>
            </div>
        </div>

        <br /><br />
    </div>

    <div class="tab-pane fade" id="tab_2">
        <div class="container" style="background-color:white;box-shadow: 0 2px 4px rgba(0,0,0,0.6);margin-top:2px; padding:20px;width:1200px">
            <div class="row">
                <div class="col-lg-12">
                    <div id="DivReadyToSentforApproval">

                        <div class="tab-pane container active p-0" id="home">
                            <br />
                            <div class="form-group">
                                <div class="row">
                                    <div class="col-md-3">
                                        <div class="col-sm-6">
                                            <div class="text-right">
                                                <label for="txtAgencyRegnNo">Course Type :</label>
                                            </div>                                            
                                        </div>
                                        <div class="col-sm-6">
                                            <div class="text-left">
                                                <select class="form-control" id="CourseTypes1">
                                                    <option value="choose">Select</option>
                                                </select>
                                            </div>                                            
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="col-sm-6">
                                            <div class="text-right">
                                                <label for="txtAgencyRegnNo">Submitted By :</label>     
                                            </div>                                            
                                        </div>
                                        <div class="col-sm-6">
                                            <select class="form-control" id="SubmittedBy">
                                                <option value="choose">Select</option>
                                            </select>
                                        </div>
                                    </div>                                    
                                    <div class="col-lg-1">
                                        <label for="txtAgencyRegnNo">Division</label>
                                    </div>
                                    <div class="col-lg-2">
                                        <select class="form-control" id="Divisions" onchange="GetDistricts('Divisions','Districts')">
                                            <option value="choose">Select</option>
                                        </select>
                                    </div>
                                    <div class="col-lg-1">
                                        <label for="txtAgencyRegnNo">District</label>
                                    </div>
                                    <div class="col-lg-2">
                                        <select class="form-control" id="Districts" onchange="GetTaluks('Districts','Talukas')">
                                            <option value="choose">Select</option>
                                        </select>
                                    </div>

                                </div>
                            </div>
                            <br />
                            <div class="col-lg-1">
                                <label for="txtAgencyRegnNo">Taluka</label>
                            </div>
                            <div class="col-lg-2">
                                <select class="form-control" id="Talukas">
                                    <option value="choose">Select</option>
                                </select>
                            </div>
                            <div class="col-lg-9" align="right">
                                <a class=" btn btn-primary sendBtn3" onclick="GetUpdateGridDetails()">Search</a>
                            </div>
                        </div>

                        <br />
                        <div style="overflow-y:scroll;overflow-x:scroll">
                            <table class="table table-striped table-hover text-center shadow clswidth" id="GridUpdateSeatAvailability" style="width:100% !important" border="1" align="center"></table>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
    
    <div class="tab-pane fade" id="tab_3">
        <div class="container" style="background-color:white;box-shadow: 0 2px 4px rgba(0,0,0,0.6);margin-top:2px; padding:20px; width:1200px">
            <div class="row">
                <div class="col-lg-12">
                    <div>
                        <div class="tab-pane container active p-0" id="home">
                            <br />
                            <div class="form-group">
                                <div class="row">
                                    <div class="col-lg-1">
                                        <label for="txtAgencyRegnNo">Course Type</label>
                                    </div>
                                    <div class="col-lg-2">
                                        <select class="form-control" id="CourseTypes2">
                                            <option value="choose">Select</option>
                                        </select>
                                    </div>
                                    <div class="col-lg-1">
                                        <label for="txtAgencyRegnNo">Division</label>
                                    </div>
                                    <div class="col-lg-2">
                                        <select class="form-control" id="Divisions1" onchange="GetDistricts('Divisions1','Districts1')">
                                            <option value="choose">Select</option>
                                        </select>
                                    </div>
                                    <div class="col-lg-1">
                                        <label for="txtAgencyRegnNo">District</label>
                                    </div>
                                    <div class="col-lg-2">
                                        <select class="form-control" id="Districts1" onchange="GetTaluks('Districts1','Talukas1')">
                                            <option value="choose">Select</option>
                                        </select>
                                    </div>
                                    <div class="col-lg-1">
                                        <label for="txtAgencyRegnNo">Taluka</label>
                                    </div>
                                    <div class="col-lg-2">
                                        <select class="form-control" id="Talukas1">
                                            <option value="choose">Select</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <br />
                            <div class="col-lg-12" align="right">
                                <a class=" btn btn-primary sendBtn3" onclick="GetGridDetails()">Search</a>
                            </div>
                        </div>

                        <br />
                        <div style="overflow-y:scroll;overflow-x:scroll">
                            <table class="table table-striped table-hover text-center shadow clswidth" id="GridViewSeatAvailability" style="width:100% !important" border="1" align="center"></table>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>

@Scripts.Render("~/bundles/MasterDataUpload")

<script type="text/javascript">


    $("#Upload").click(function () {
            var CourseId = $("#CourseTypes").children("option:selected").val();
            if (CourseId == 'choose') {
                alert('Please select the course type');
            }
            else {
                $.ajax({
                    url: "/Admission/UploadFile",
                    data: { FileName: "@Model.FileName", CourseId: CourseId },
                    type: 'Get',
                    contentType: 'application/json; charset=utf-8',
                    success: function (result) {
                        if (result == 'success') {
                            alert("details uploaded Successfully");
                        }

                    }, error: function (result) {
                        alert("Error", "file details uploaded failed");
                    }
                });
            }

    });


</script>
